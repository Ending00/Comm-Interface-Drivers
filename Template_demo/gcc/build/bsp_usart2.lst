ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"bsp_usart2.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.TIM4_Set,"ax",%progbits
  18              		.align	1
  19              		.global	TIM4_Set
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	TIM4_Set:
  25              	.LVL0:
  26              	.LFB36:
  27              		.file 1 "../bsp/bsp_usart2.c"
   1:../bsp/bsp_usart2.c **** #include "delay.h"
   2:../bsp/bsp_usart2.c **** #include "bsp_usart2.h"
   3:../bsp/bsp_usart2.c **** #include "stdarg.h"	 	 
   4:../bsp/bsp_usart2.c **** #include "stdio.h"	 	 
   5:../bsp/bsp_usart2.c **** #include "string.h"	   
   6:../bsp/bsp_usart2.c **** //////////////////////////////////////////////////////////////////////////////////	 
   7:../bsp/bsp_usart2.c **** //±¾³ÌÐòÖ»¹©Ñ§Ï°Ê¹ÓÃ£¬Î´¾­×÷ÕßÐí¿É£¬²»µÃÓÃÓÚÆäËüÈÎºÎÓÃÍ¾
   8:../bsp/bsp_usart2.c **** //ALIENTEK STM32¿ª·¢°å
   9:../bsp/bsp_usart2.c **** //´®¿Ú2Çý¶¯´úÂë	   
  10:../bsp/bsp_usart2.c **** //ÕýµãÔ­×Ó@ALIENTEK
  11:../bsp/bsp_usart2.c **** //¼¼ÊõÂÛÌ³:www.openedv.com
  12:../bsp/bsp_usart2.c **** //ÐÞ¸ÄÈÕÆÚ:2014/3/29
  13:../bsp/bsp_usart2.c **** //°æ±¾£ºV1.0
  14:../bsp/bsp_usart2.c **** //°æÈ¨ËùÓÐ£¬µÁ°æ±Ø¾¿¡£
  15:../bsp/bsp_usart2.c **** //Copyright(C) ¹ãÖÝÊÐÐÇÒíµç×Ó¿Æ¼¼ÓÐÏÞ¹«Ë¾ 2009-2019
  16:../bsp/bsp_usart2.c **** //All rights reserved									  
  17:../bsp/bsp_usart2.c **** ////////////////////////////////////////////////////////////////////////////////// 	   
  18:../bsp/bsp_usart2.c **** 
  19:../bsp/bsp_usart2.c **** //´®¿Ú·¢ËÍ»º´æÇø 	
  20:../bsp/bsp_usart2.c **** __attribute__((aligned(8))) u8 USART2_TX_BUF[USART2_MAX_SEND_LEN];  // ·¢ËÍ»º³å
  21:../bsp/bsp_usart2.c **** 
  22:../bsp/bsp_usart2.c **** //__align(8) u8 USART2_TX_BUF[USART2_MAX_SEND_LEN]; 	//·¢ËÍ»º³å,×î´óUSART2_MAX_SEND_LEN×Ö½Ú
  23:../bsp/bsp_usart2.c **** #ifdef USART2_RX_EN   								//Èç¹ûÊ¹ÄÜÁË½ÓÊÕ   	  
  24:../bsp/bsp_usart2.c **** //´®¿Ú½ÓÊÕ»º´æÇø 	
  25:../bsp/bsp_usart2.c **** u8 USART2_RX_BUF[USART2_MAX_RECV_LEN]; 				//½ÓÊÕ»º³å,×î´óUSART2_MAX_RECV_LEN¸ö×Ö½Ú.
  26:../bsp/bsp_usart2.c **** 
  27:../bsp/bsp_usart2.c **** 
  28:../bsp/bsp_usart2.c **** 
  29:../bsp/bsp_usart2.c **** //Í¨¹ýÅÐ¶Ï½ÓÊÕÁ¬Ðø2¸ö×Ö·ûÖ®¼äµÄÊ±¼ä²î²»´óÓÚ10msÀ´¾ö¶¨ÊÇ²»ÊÇÒ»´ÎÁ¬ÐøµÄÊý¾Ý.
  30:../bsp/bsp_usart2.c **** //Èç¹û2¸ö×Ö·û½ÓÊÕ¼ä¸ô³¬¹ý10ms,ÔòÈÏÎª²»ÊÇ1´ÎÁ¬ÐøÊý¾Ý.Ò²¾ÍÊÇ³¬¹ý10msÃ»ÓÐ½ÓÊÕµ½
  31:../bsp/bsp_usart2.c **** //ÈÎºÎÊý¾Ý,Ôò±íÊ¾´Ë´Î½ÓÊÕÍê±Ï.
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 2


  32:../bsp/bsp_usart2.c **** //½ÓÊÕµ½µÄÊý¾Ý×´Ì¬
  33:../bsp/bsp_usart2.c **** //[15]:0,Ã»ÓÐ½ÓÊÕµ½Êý¾Ý;1,½ÓÊÕµ½ÁËÒ»ÅúÊý¾Ý.
  34:../bsp/bsp_usart2.c **** //[14:0]:½ÓÊÕµ½µÄÊý¾Ý³¤¶È
  35:../bsp/bsp_usart2.c **** u16 USART2_RX_STA=0;   	 
  36:../bsp/bsp_usart2.c **** void USART2_IRQHandler(void)
  37:../bsp/bsp_usart2.c **** {
  38:../bsp/bsp_usart2.c **** 	u8 res;	    
  39:../bsp/bsp_usart2.c **** 	if(USART_GetITStatus(USART2, USART_IT_RXNE) != RESET)//½ÓÊÕµ½Êý¾Ý
  40:../bsp/bsp_usart2.c **** 	{	 
  41:../bsp/bsp_usart2.c ****  
  42:../bsp/bsp_usart2.c **** 	res =USART_ReceiveData(USART2);		
  43:../bsp/bsp_usart2.c **** 		if(USART2_RX_STA<USART2_MAX_RECV_LEN)		//»¹¿ÉÒÔ½ÓÊÕÊý¾Ý
  44:../bsp/bsp_usart2.c **** 		{
  45:../bsp/bsp_usart2.c **** 			TIM_SetCounter(TIM4,0);//¼ÆÊýÆ÷Çå¿Õ        				 
  46:../bsp/bsp_usart2.c **** 			if(USART2_RX_STA==0)TIM4_Set(1);	 	//Ê¹ÄÜ¶¨Ê±Æ÷4µÄÖÐ¶Ï 
  47:../bsp/bsp_usart2.c **** 			USART2_RX_BUF[USART2_RX_STA++]=res;		//¼ÇÂ¼½ÓÊÕµ½µÄÖµ	 
  48:../bsp/bsp_usart2.c **** 		}else 
  49:../bsp/bsp_usart2.c **** 		{
  50:../bsp/bsp_usart2.c **** 			USART2_RX_STA|=1<<15;					//Ç¿ÖÆ±ê¼Ç½ÓÊÕÍê³É
  51:../bsp/bsp_usart2.c **** 		} 
  52:../bsp/bsp_usart2.c **** 	}  											 
  53:../bsp/bsp_usart2.c **** }   
  54:../bsp/bsp_usart2.c **** //³õÊ¼»¯IO ´®¿Ú2
  55:../bsp/bsp_usart2.c **** //pclk1:PCLK1Ê±ÖÓÆµÂÊ(Mhz)
  56:../bsp/bsp_usart2.c **** //bound:²¨ÌØÂÊ	  
  57:../bsp/bsp_usart2.c **** void usart2_init(u32 bound)
  58:../bsp/bsp_usart2.c **** {  
  59:../bsp/bsp_usart2.c **** 	NVIC_InitTypeDef NVIC_InitStructure;
  60:../bsp/bsp_usart2.c **** 	GPIO_InitTypeDef GPIO_InitStructure;
  61:../bsp/bsp_usart2.c **** 	USART_InitTypeDef USART_InitStructure;
  62:../bsp/bsp_usart2.c **** 
  63:../bsp/bsp_usart2.c **** 	RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);	// GPIOAÊ±ÖÓ
  64:../bsp/bsp_usart2.c **** 	RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART2,ENABLE);
  65:../bsp/bsp_usart2.c **** 
  66:../bsp/bsp_usart2.c **** 	USART_DeInit(USART2);  //¸´Î»´®¿Ú2
  67:../bsp/bsp_usart2.c **** 	//USART2_TX   PA.2
  68:../bsp/bsp_usart2.c **** 	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_2; //PA.2
  69:../bsp/bsp_usart2.c **** 	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
  70:../bsp/bsp_usart2.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;	//¸´ÓÃÍÆÍìÊä³ö
  71:../bsp/bsp_usart2.c **** 	GPIO_Init(GPIOA, &GPIO_InitStructure); //³õÊ¼»¯PA2
  72:../bsp/bsp_usart2.c **** 
  73:../bsp/bsp_usart2.c **** 	//USART2_RX	  PA.3
  74:../bsp/bsp_usart2.c **** 	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_3;
  75:../bsp/bsp_usart2.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;//¸¡¿ÕÊäÈë
  76:../bsp/bsp_usart2.c **** 	GPIO_Init(GPIOA, &GPIO_InitStructure);  //³õÊ¼»¯PA3
  77:../bsp/bsp_usart2.c **** 
  78:../bsp/bsp_usart2.c **** 	USART_InitStructure.USART_BaudRate = bound;//Ò»°ãÉèÖÃÎª9600;
  79:../bsp/bsp_usart2.c **** 	USART_InitStructure.USART_WordLength = USART_WordLength_8b;//×Ö³¤Îª8Î»Êý¾Ý¸ñÊ½
  80:../bsp/bsp_usart2.c **** 	USART_InitStructure.USART_StopBits = USART_StopBits_1;//Ò»¸öÍ£Ö¹Î»
  81:../bsp/bsp_usart2.c **** 	USART_InitStructure.USART_Parity = USART_Parity_No;//ÎÞÆæÅ¼Ð£ÑéÎ»
  82:../bsp/bsp_usart2.c **** 	USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;//ÎÞÓ²¼þÊý¾ÝÁ÷¿ØÖÆ
  83:../bsp/bsp_usart2.c **** 	USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;	//ÊÕ·¢Ä£Ê½
  84:../bsp/bsp_usart2.c **** 
  85:../bsp/bsp_usart2.c **** 	USART_Init(USART2, &USART_InitStructure); //³õÊ¼»¯´®¿Ú	2
  86:../bsp/bsp_usart2.c **** 
  87:../bsp/bsp_usart2.c **** 	//²¨ÌØÂÊÉèÖÃ
  88:../bsp/bsp_usart2.c **** 	//	USART2->BRR=(pclk1*1000000)/(bound);// ²¨ÌØÂÊÉèÖÃ	 
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 3


  89:../bsp/bsp_usart2.c **** 	//USART2->CR1|=0X200C;  	//1Î»Í£Ö¹,ÎÞÐ£ÑéÎ».
  90:../bsp/bsp_usart2.c **** 	USART_DMACmd(USART2,USART_DMAReq_Tx,ENABLE);  	//Ê¹ÄÜ´®¿Ú2µÄDMA·¢ËÍ
  91:../bsp/bsp_usart2.c **** 	UART_DMA_Config(DMA1_Channel7,(u32)&USART2->DR,(u32)USART2_TX_BUF);//DMA1Í¨µÀ7,ÍâÉèÎª´®¿Ú2,´æ´¢Æ÷Î
  92:../bsp/bsp_usart2.c **** 	USART_Cmd(USART2, ENABLE);                    //Ê¹ÄÜ´®¿Ú 
  93:../bsp/bsp_usart2.c **** 
  94:../bsp/bsp_usart2.c **** 	#ifdef USART2_RX_EN		  	//Èç¹ûÊ¹ÄÜÁË½ÓÊÕ
  95:../bsp/bsp_usart2.c **** 	//Ê¹ÄÜ½ÓÊÕÖÐ¶Ï
  96:../bsp/bsp_usart2.c **** 	USART_ITConfig(USART2, USART_IT_RXNE, ENABLE);//¿ªÆôÖÐ¶Ï   
  97:../bsp/bsp_usart2.c **** 
  98:../bsp/bsp_usart2.c **** 	NVIC_InitStructure.NVIC_IRQChannel = USART2_IRQn;
  99:../bsp/bsp_usart2.c **** 	NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority=2 ;//ÇÀÕ¼ÓÅÏÈ¼¶3
 100:../bsp/bsp_usart2.c **** 	NVIC_InitStructure.NVIC_IRQChannelSubPriority = 3;		//×ÓÓÅÏÈ¼¶3
 101:../bsp/bsp_usart2.c **** 	NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;			//IRQÍ¨µÀÊ¹ÄÜ
 102:../bsp/bsp_usart2.c **** 	NVIC_Init(&NVIC_InitStructure);	//¸ù¾ÝÖ¸¶¨µÄ²ÎÊý³õÊ¼»¯VIC¼Ä´æÆ÷
 103:../bsp/bsp_usart2.c **** 	TIM4_Init(999,7199);		//10msÖÐ¶Ï
 104:../bsp/bsp_usart2.c **** 	USART2_RX_STA=0;		//ÇåÁã
 105:../bsp/bsp_usart2.c **** 	TIM4_Set(0);			//¹Ø±Õ¶¨Ê±Æ÷4
 106:../bsp/bsp_usart2.c **** 	#endif	 	
 107:../bsp/bsp_usart2.c **** 
 108:../bsp/bsp_usart2.c **** }
 109:../bsp/bsp_usart2.c **** //´®¿Ú2,printf º¯Êý
 110:../bsp/bsp_usart2.c **** //È·±£Ò»´Î·¢ËÍÊý¾Ý²»³¬¹ýUSART2_MAX_SEND_LEN×Ö½Ú
 111:../bsp/bsp_usart2.c **** void u2_printf(char* fmt,...)  
 112:../bsp/bsp_usart2.c **** {  
 113:../bsp/bsp_usart2.c **** 	va_list ap;
 114:../bsp/bsp_usart2.c **** 	va_start(ap,fmt);
 115:../bsp/bsp_usart2.c **** 	vsprintf((char*)USART2_TX_BUF,fmt,ap);
 116:../bsp/bsp_usart2.c **** 	va_end(ap);
 117:../bsp/bsp_usart2.c **** 	while(DMA_GetCurrDataCounter(DMA1_Channel7)!=0);	//µÈ´ýÍ¨µÀ7´«ÊäÍê³É   
 118:../bsp/bsp_usart2.c **** 	UART_DMA_Enable(DMA1_Channel7,strlen((const char*)USART2_TX_BUF)); 	//Í¨¹ýdma·¢ËÍ³öÈ¥
 119:../bsp/bsp_usart2.c **** }
 120:../bsp/bsp_usart2.c **** //¶¨Ê±Æ÷4ÖÐ¶Ï·þÎñ³ÌÐò		    
 121:../bsp/bsp_usart2.c **** void TIM4_IRQHandler(void)
 122:../bsp/bsp_usart2.c **** { 	
 123:../bsp/bsp_usart2.c **** 	if (TIM_GetITStatus(TIM4, TIM_IT_Update) != RESET)//ÊÇ¸üÐÂÖÐ¶Ï
 124:../bsp/bsp_usart2.c **** 	{	 			   
 125:../bsp/bsp_usart2.c **** 		USART2_RX_STA|=1<<15;	//±ê¼Ç½ÓÊÕÍê³É
 126:../bsp/bsp_usart2.c **** 		TIM_ClearITPendingBit(TIM4, TIM_IT_Update  );  //Çå³ýTIMx¸üÐÂÖÐ¶Ï±êÖ¾    
 127:../bsp/bsp_usart2.c **** 		TIM4_Set(0);			//¹Ø±ÕTIM4  
 128:../bsp/bsp_usart2.c **** 	}	    
 129:../bsp/bsp_usart2.c **** }
 130:../bsp/bsp_usart2.c **** //ÉèÖÃTIM4µÄ¿ª¹Ø
 131:../bsp/bsp_usart2.c **** //sta:0£¬¹Ø±Õ;1,¿ªÆô;
 132:../bsp/bsp_usart2.c **** void TIM4_Set(u8 sta)
 133:../bsp/bsp_usart2.c **** {
  28              		.loc 1 133 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		.loc 1 133 1 is_stmt 0 view .LVU1
  33 0000 10B5     		push	{r4, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 4, -8
  37              		.cfi_offset 14, -4
 134:../bsp/bsp_usart2.c **** 	if(sta)
  38              		.loc 1 134 2 is_stmt 1 view .LVU2
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 4


  39              		.loc 1 134 4 is_stmt 0 view .LVU3
  40 0002 48B1     		cbz	r0, .L2
 135:../bsp/bsp_usart2.c **** 	{
 136:../bsp/bsp_usart2.c ****        
 137:../bsp/bsp_usart2.c **** 		TIM_SetCounter(TIM4,0);//¼ÆÊýÆ÷Çå¿Õ
  41              		.loc 1 137 3 is_stmt 1 view .LVU4
  42 0004 074C     		ldr	r4, .L5
  43 0006 0021     		movs	r1, #0
  44 0008 2046     		mov	r0, r4
  45              	.LVL1:
  46              		.loc 1 137 3 is_stmt 0 view .LVU5
  47 000a FFF7FEFF 		bl	TIM_SetCounter
  48              	.LVL2:
 138:../bsp/bsp_usart2.c **** 		TIM_Cmd(TIM4, ENABLE);  //Ê¹ÄÜTIMx	
  49              		.loc 1 138 3 is_stmt 1 view .LVU6
  50 000e 0121     		movs	r1, #1
  51 0010 2046     		mov	r0, r4
  52 0012 FFF7FEFF 		bl	TIM_Cmd
  53              	.LVL3:
  54              	.L1:
 139:../bsp/bsp_usart2.c **** 	}else TIM_Cmd(TIM4, DISABLE);//¹Ø±Õ¶¨Ê±Æ÷4	   
 140:../bsp/bsp_usart2.c **** }
  55              		.loc 1 140 1 is_stmt 0 view .LVU7
  56 0016 10BD     		pop	{r4, pc}
  57              	.LVL4:
  58              	.L2:
 139:../bsp/bsp_usart2.c **** 	}else TIM_Cmd(TIM4, DISABLE);//¹Ø±Õ¶¨Ê±Æ÷4	   
  59              		.loc 1 139 8 is_stmt 1 view .LVU8
  60 0018 0021     		movs	r1, #0
  61 001a 0248     		ldr	r0, .L5
  62              	.LVL5:
 139:../bsp/bsp_usart2.c **** 	}else TIM_Cmd(TIM4, DISABLE);//¹Ø±Õ¶¨Ê±Æ÷4	   
  63              		.loc 1 139 8 is_stmt 0 view .LVU9
  64 001c FFF7FEFF 		bl	TIM_Cmd
  65              	.LVL6:
  66              		.loc 1 140 1 view .LVU10
  67 0020 F9E7     		b	.L1
  68              	.L6:
  69 0022 00BF     		.align	2
  70              	.L5:
  71 0024 00080040 		.word	1073743872
  72              		.cfi_endproc
  73              	.LFE36:
  75              		.section	.text.USART2_IRQHandler,"ax",%progbits
  76              		.align	1
  77              		.global	USART2_IRQHandler
  78              		.syntax unified
  79              		.thumb
  80              		.thumb_func
  82              	USART2_IRQHandler:
  83              	.LFB32:
  37:../bsp/bsp_usart2.c **** 	u8 res;	    
  84              		.loc 1 37 1 is_stmt 1 view -0
  85              		.cfi_startproc
  86              		@ args = 0, pretend = 0, frame = 0
  87              		@ frame_needed = 0, uses_anonymous_args = 0
  88 0000 10B5     		push	{r4, lr}
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 5


  89              	.LCFI1:
  90              		.cfi_def_cfa_offset 8
  91              		.cfi_offset 4, -8
  92              		.cfi_offset 14, -4
  38:../bsp/bsp_usart2.c **** 	if(USART_GetITStatus(USART2, USART_IT_RXNE) != RESET)//½ÓÊÕµ½Êý¾Ý
  93              		.loc 1 38 2 view .LVU12
  39:../bsp/bsp_usart2.c **** 	{	 
  94              		.loc 1 39 2 view .LVU13
  39:../bsp/bsp_usart2.c **** 	{	 
  95              		.loc 1 39 5 is_stmt 0 view .LVU14
  96 0002 40F22551 		movw	r1, #1317
  97 0006 1348     		ldr	r0, .L15
  98 0008 FFF7FEFF 		bl	USART_GetITStatus
  99              	.LVL7:
  39:../bsp/bsp_usart2.c **** 	{	 
 100              		.loc 1 39 4 view .LVU15
 101 000c 00B9     		cbnz	r0, .L12
 102              	.L7:
  53:../bsp/bsp_usart2.c **** //³õÊ¼»¯IO ´®¿Ú2
 103              		.loc 1 53 1 view .LVU16
 104 000e 10BD     		pop	{r4, pc}
 105              	.L12:
  42:../bsp/bsp_usart2.c **** 		if(USART2_RX_STA<USART2_MAX_RECV_LEN)		//»¹¿ÉÒÔ½ÓÊÕÊý¾Ý
 106              		.loc 1 42 2 is_stmt 1 view .LVU17
  42:../bsp/bsp_usart2.c **** 		if(USART2_RX_STA<USART2_MAX_RECV_LEN)		//»¹¿ÉÒÔ½ÓÊÕÊý¾Ý
 107              		.loc 1 42 7 is_stmt 0 view .LVU18
 108 0010 1048     		ldr	r0, .L15
 109 0012 FFF7FEFF 		bl	USART_ReceiveData
 110              	.LVL8:
  42:../bsp/bsp_usart2.c **** 		if(USART2_RX_STA<USART2_MAX_RECV_LEN)		//»¹¿ÉÒÔ½ÓÊÕÊý¾Ý
 111              		.loc 1 42 6 view .LVU19
 112 0016 C4B2     		uxtb	r4, r0
 113              	.LVL9:
  43:../bsp/bsp_usart2.c **** 		{
 114              		.loc 1 43 3 is_stmt 1 view .LVU20
  43:../bsp/bsp_usart2.c **** 		{
 115              		.loc 1 43 19 is_stmt 0 view .LVU21
 116 0018 0F4B     		ldr	r3, .L15+4
 117 001a 1B88     		ldrh	r3, [r3]
  43:../bsp/bsp_usart2.c **** 		{
 118              		.loc 1 43 5 view .LVU22
 119 001c B3F5806F 		cmp	r3, #1024
 120 0020 06D3     		bcc	.L13
  50:../bsp/bsp_usart2.c **** 		} 
 121              		.loc 1 50 4 is_stmt 1 view .LVU23
  50:../bsp/bsp_usart2.c **** 		} 
 122              		.loc 1 50 17 is_stmt 0 view .LVU24
 123 0022 6FEA4343 		mvn	r3, r3, lsl #17
 124 0026 6FEA5343 		mvn	r3, r3, lsr #17
 125 002a 0B4A     		ldr	r2, .L15+4
 126 002c 1380     		strh	r3, [r2]	@ movhi
  53:../bsp/bsp_usart2.c **** //³õÊ¼»¯IO ´®¿Ú2
 127              		.loc 1 53 1 view .LVU25
 128 002e EEE7     		b	.L7
 129              	.L13:
  45:../bsp/bsp_usart2.c **** 			if(USART2_RX_STA==0)TIM4_Set(1);	 	//Ê¹ÄÜ¶¨Ê±Æ÷4µÄÖÐ¶Ï 
 130              		.loc 1 45 4 is_stmt 1 view .LVU26
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 6


 131 0030 0021     		movs	r1, #0
 132 0032 0A48     		ldr	r0, .L15+8
 133 0034 FFF7FEFF 		bl	TIM_SetCounter
 134              	.LVL10:
  46:../bsp/bsp_usart2.c **** 			USART2_RX_BUF[USART2_RX_STA++]=res;		//¼ÇÂ¼½ÓÊÕµ½µÄÖµ	 
 135              		.loc 1 46 4 view .LVU27
  46:../bsp/bsp_usart2.c **** 			USART2_RX_BUF[USART2_RX_STA++]=res;		//¼ÇÂ¼½ÓÊÕµ½µÄÖµ	 
 136              		.loc 1 46 20 is_stmt 0 view .LVU28
 137 0038 074B     		ldr	r3, .L15+4
 138 003a 1B88     		ldrh	r3, [r3]
  46:../bsp/bsp_usart2.c **** 			USART2_RX_BUF[USART2_RX_STA++]=res;		//¼ÇÂ¼½ÓÊÕµ½µÄÖµ	 
 139              		.loc 1 46 6 view .LVU29
 140 003c 33B1     		cbz	r3, .L14
 141              	.L10:
  47:../bsp/bsp_usart2.c **** 		}else 
 142              		.loc 1 47 4 is_stmt 1 view .LVU30
  47:../bsp/bsp_usart2.c **** 		}else 
 143              		.loc 1 47 31 is_stmt 0 view .LVU31
 144 003e 064A     		ldr	r2, .L15+4
 145 0040 1388     		ldrh	r3, [r2]
 146 0042 591C     		adds	r1, r3, #1
 147 0044 1180     		strh	r1, [r2]	@ movhi
  47:../bsp/bsp_usart2.c **** 		}else 
 148              		.loc 1 47 34 view .LVU32
 149 0046 064A     		ldr	r2, .L15+12
 150 0048 D454     		strb	r4, [r2, r3]
 151 004a E0E7     		b	.L7
 152              	.L14:
  46:../bsp/bsp_usart2.c **** 			USART2_RX_BUF[USART2_RX_STA++]=res;		//¼ÇÂ¼½ÓÊÕµ½µÄÖµ	 
 153              		.loc 1 46 24 is_stmt 1 discriminator 1 view .LVU33
 154 004c 0120     		movs	r0, #1
 155 004e FFF7FEFF 		bl	TIM4_Set
 156              	.LVL11:
 157 0052 F4E7     		b	.L10
 158              	.L16:
 159              		.align	2
 160              	.L15:
 161 0054 00440040 		.word	1073759232
 162 0058 00000000 		.word	.LANCHOR0
 163 005c 00080040 		.word	1073743872
 164 0060 00000000 		.word	.LANCHOR1
 165              		.cfi_endproc
 166              	.LFE32:
 168              		.section	.text.TIM4_IRQHandler,"ax",%progbits
 169              		.align	1
 170              		.global	TIM4_IRQHandler
 171              		.syntax unified
 172              		.thumb
 173              		.thumb_func
 175              	TIM4_IRQHandler:
 176              	.LFB35:
 122:../bsp/bsp_usart2.c **** 	if (TIM_GetITStatus(TIM4, TIM_IT_Update) != RESET)//ÊÇ¸üÐÂÖÐ¶Ï
 177              		.loc 1 122 1 view -0
 178              		.cfi_startproc
 179              		@ args = 0, pretend = 0, frame = 0
 180              		@ frame_needed = 0, uses_anonymous_args = 0
 181 0000 08B5     		push	{r3, lr}
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 7


 182              	.LCFI2:
 183              		.cfi_def_cfa_offset 8
 184              		.cfi_offset 3, -8
 185              		.cfi_offset 14, -4
 123:../bsp/bsp_usart2.c **** 	{	 			   
 186              		.loc 1 123 2 view .LVU35
 123:../bsp/bsp_usart2.c **** 	{	 			   
 187              		.loc 1 123 6 is_stmt 0 view .LVU36
 188 0002 0121     		movs	r1, #1
 189 0004 0948     		ldr	r0, .L21
 190 0006 FFF7FEFF 		bl	TIM_GetITStatus
 191              	.LVL12:
 123:../bsp/bsp_usart2.c **** 	{	 			   
 192              		.loc 1 123 5 view .LVU37
 193 000a 00B9     		cbnz	r0, .L20
 194              	.L17:
 129:../bsp/bsp_usart2.c **** //ÉèÖÃTIM4µÄ¿ª¹Ø
 195              		.loc 1 129 1 view .LVU38
 196 000c 08BD     		pop	{r3, pc}
 197              	.L20:
 125:../bsp/bsp_usart2.c **** 		TIM_ClearITPendingBit(TIM4, TIM_IT_Update  );  //Çå³ýTIMx¸üÐÂÖÐ¶Ï±êÖ¾    
 198              		.loc 1 125 3 is_stmt 1 view .LVU39
 125:../bsp/bsp_usart2.c **** 		TIM_ClearITPendingBit(TIM4, TIM_IT_Update  );  //Çå³ýTIMx¸üÐÂÖÐ¶Ï±êÖ¾    
 199              		.loc 1 125 16 is_stmt 0 view .LVU40
 200 000e 084A     		ldr	r2, .L21+4
 201 0010 1388     		ldrh	r3, [r2]
 202 0012 6FEA4343 		mvn	r3, r3, lsl #17
 203 0016 6FEA5343 		mvn	r3, r3, lsr #17
 204 001a 1380     		strh	r3, [r2]	@ movhi
 126:../bsp/bsp_usart2.c **** 		TIM4_Set(0);			//¹Ø±ÕTIM4  
 205              		.loc 1 126 3 is_stmt 1 view .LVU41
 206 001c 0121     		movs	r1, #1
 207 001e 0348     		ldr	r0, .L21
 208 0020 FFF7FEFF 		bl	TIM_ClearITPendingBit
 209              	.LVL13:
 127:../bsp/bsp_usart2.c **** 	}	    
 210              		.loc 1 127 3 view .LVU42
 211 0024 0020     		movs	r0, #0
 212 0026 FFF7FEFF 		bl	TIM4_Set
 213              	.LVL14:
 129:../bsp/bsp_usart2.c **** //ÉèÖÃTIM4µÄ¿ª¹Ø
 214              		.loc 1 129 1 is_stmt 0 view .LVU43
 215 002a EFE7     		b	.L17
 216              	.L22:
 217              		.align	2
 218              	.L21:
 219 002c 00080040 		.word	1073743872
 220 0030 00000000 		.word	.LANCHOR0
 221              		.cfi_endproc
 222              	.LFE35:
 224              		.section	.text.TIM4_Init,"ax",%progbits
 225              		.align	1
 226              		.global	TIM4_Init
 227              		.syntax unified
 228              		.thumb
 229              		.thumb_func
 231              	TIM4_Init:
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 8


 232              	.LVL15:
 233              	.LFB37:
 141:../bsp/bsp_usart2.c **** //Í¨ÓÃ¶¨Ê±Æ÷ÖÐ¶Ï³õÊ¼»¯
 142:../bsp/bsp_usart2.c **** //ÕâÀïÊ¼ÖÕÑ¡ÔñÎªAPB1µÄ2±¶£¬¶øAPB1Îª36M
 143:../bsp/bsp_usart2.c **** //arr£º×Ô¶¯ÖØ×°Öµ¡£
 144:../bsp/bsp_usart2.c **** //psc£ºÊ±ÖÓÔ¤·ÖÆµÊý		 
 145:../bsp/bsp_usart2.c **** void TIM4_Init(u16 arr,u16 psc)
 146:../bsp/bsp_usart2.c **** {	
 234              		.loc 1 146 1 is_stmt 1 view -0
 235              		.cfi_startproc
 236              		@ args = 0, pretend = 0, frame = 16
 237              		@ frame_needed = 0, uses_anonymous_args = 0
 238              		.loc 1 146 1 is_stmt 0 view .LVU45
 239 0000 30B5     		push	{r4, r5, lr}
 240              	.LCFI3:
 241              		.cfi_def_cfa_offset 12
 242              		.cfi_offset 4, -12
 243              		.cfi_offset 5, -8
 244              		.cfi_offset 14, -4
 245 0002 85B0     		sub	sp, sp, #20
 246              	.LCFI4:
 247              		.cfi_def_cfa_offset 32
 248 0004 0546     		mov	r5, r0
 249 0006 0C46     		mov	r4, r1
 147:../bsp/bsp_usart2.c **** 	NVIC_InitTypeDef NVIC_InitStructure;
 250              		.loc 1 147 2 is_stmt 1 view .LVU46
 148:../bsp/bsp_usart2.c **** 	TIM_TimeBaseInitTypeDef  TIM_TimeBaseStructure;
 251              		.loc 1 148 2 view .LVU47
 149:../bsp/bsp_usart2.c **** 
 150:../bsp/bsp_usart2.c **** 	RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM4, ENABLE); //Ê±ÖÓÊ¹ÄÜ//TIM4Ê±ÖÓÊ¹ÄÜ    
 252              		.loc 1 150 2 view .LVU48
 253 0008 0121     		movs	r1, #1
 254              	.LVL16:
 255              		.loc 1 150 2 is_stmt 0 view .LVU49
 256 000a 0420     		movs	r0, #4
 257              	.LVL17:
 258              		.loc 1 150 2 view .LVU50
 259 000c FFF7FEFF 		bl	RCC_APB1PeriphClockCmd
 260              	.LVL18:
 151:../bsp/bsp_usart2.c **** 	
 152:../bsp/bsp_usart2.c **** 	//¶¨Ê±Æ÷TIM3³õÊ¼»¯
 153:../bsp/bsp_usart2.c **** 	TIM_TimeBaseStructure.TIM_Period = arr; //ÉèÖÃÔÚÏÂÒ»¸ö¸üÐÂÊÂ¼þ×°Èë»î¶¯µÄ×Ô¶¯ÖØ×°ÔØ¼Ä´æÆ÷ÖÜÆÚµÄÖµ	
 261              		.loc 1 153 2 is_stmt 1 view .LVU51
 262              		.loc 1 153 35 is_stmt 0 view .LVU52
 263 0010 ADF80450 		strh	r5, [sp, #4]	@ movhi
 154:../bsp/bsp_usart2.c **** 	TIM_TimeBaseStructure.TIM_Prescaler =psc; //ÉèÖÃÓÃÀ´×÷ÎªTIMxÊ±ÖÓÆµÂÊ³ýÊýµÄÔ¤·ÖÆµÖµ
 264              		.loc 1 154 2 is_stmt 1 view .LVU53
 265              		.loc 1 154 38 is_stmt 0 view .LVU54
 266 0014 ADF80040 		strh	r4, [sp]	@ movhi
 155:../bsp/bsp_usart2.c **** 	TIM_TimeBaseStructure.TIM_ClockDivision = TIM_CKD_DIV1; //ÉèÖÃÊ±ÖÓ·Ö¸î:TDTS = Tck_tim
 267              		.loc 1 155 2 is_stmt 1 view .LVU55
 268              		.loc 1 155 42 is_stmt 0 view .LVU56
 269 0018 0023     		movs	r3, #0
 270 001a ADF80630 		strh	r3, [sp, #6]	@ movhi
 156:../bsp/bsp_usart2.c **** 	TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;  //TIMÏòÉÏ¼ÆÊýÄ£Ê½
 271              		.loc 1 156 2 is_stmt 1 view .LVU57
 272              		.loc 1 156 40 is_stmt 0 view .LVU58
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 9


 273 001e ADF80230 		strh	r3, [sp, #2]	@ movhi
 157:../bsp/bsp_usart2.c **** 	TIM_TimeBaseInit(TIM4, &TIM_TimeBaseStructure); //¸ù¾ÝÖ¸¶¨µÄ²ÎÊý³õÊ¼»¯TIMxµÄÊ±¼ä»ùÊýµ¥Î»
 274              		.loc 1 157 2 is_stmt 1 view .LVU59
 275 0022 0D4C     		ldr	r4, .L25
 276 0024 6946     		mov	r1, sp
 277 0026 2046     		mov	r0, r4
 278 0028 FFF7FEFF 		bl	TIM_TimeBaseInit
 279              	.LVL19:
 158:../bsp/bsp_usart2.c ****  
 159:../bsp/bsp_usart2.c **** 	TIM_ITConfig(TIM4,TIM_IT_Update,ENABLE ); //Ê¹ÄÜÖ¸¶¨µÄTIM4ÖÐ¶Ï,ÔÊÐí¸üÐÂÖÐ¶Ï
 280              		.loc 1 159 2 view .LVU60
 281 002c 0122     		movs	r2, #1
 282 002e 1146     		mov	r1, r2
 283 0030 2046     		mov	r0, r4
 284 0032 FFF7FEFF 		bl	TIM_ITConfig
 285              	.LVL20:
 160:../bsp/bsp_usart2.c **** 
 161:../bsp/bsp_usart2.c **** 	 	  
 162:../bsp/bsp_usart2.c **** 	NVIC_InitStructure.NVIC_IRQChannel = TIM4_IRQn;
 286              		.loc 1 162 2 view .LVU61
 287              		.loc 1 162 37 is_stmt 0 view .LVU62
 288 0036 1E23     		movs	r3, #30
 289 0038 8DF80C30 		strb	r3, [sp, #12]
 163:../bsp/bsp_usart2.c **** 	NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority=1 ;//ÇÀÕ¼ÓÅÏÈ¼¶3
 290              		.loc 1 163 2 is_stmt 1 view .LVU63
 291              		.loc 1 163 54 is_stmt 0 view .LVU64
 292 003c 0123     		movs	r3, #1
 293 003e 8DF80D30 		strb	r3, [sp, #13]
 164:../bsp/bsp_usart2.c **** 	NVIC_InitStructure.NVIC_IRQChannelSubPriority = 2;		//×ÓÓÅÏÈ¼¶3
 294              		.loc 1 164 2 is_stmt 1 view .LVU65
 295              		.loc 1 164 48 is_stmt 0 view .LVU66
 296 0042 0222     		movs	r2, #2
 297 0044 8DF80E20 		strb	r2, [sp, #14]
 165:../bsp/bsp_usart2.c **** 	NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;			//IRQÍ¨µÀÊ¹ÄÜ
 298              		.loc 1 165 2 is_stmt 1 view .LVU67
 299              		.loc 1 165 40 is_stmt 0 view .LVU68
 300 0048 8DF80F30 		strb	r3, [sp, #15]
 166:../bsp/bsp_usart2.c **** 	NVIC_Init(&NVIC_InitStructure);	//¸ù¾ÝÖ¸¶¨µÄ²ÎÊý³õÊ¼»¯VIC¼Ä´æÆ÷
 301              		.loc 1 166 2 is_stmt 1 view .LVU69
 302 004c 03A8     		add	r0, sp, #12
 303 004e FFF7FEFF 		bl	NVIC_Init
 304              	.LVL21:
 167:../bsp/bsp_usart2.c **** 	
 168:../bsp/bsp_usart2.c **** }
 305              		.loc 1 168 1 is_stmt 0 view .LVU70
 306 0052 05B0     		add	sp, sp, #20
 307              	.LCFI5:
 308              		.cfi_def_cfa_offset 12
 309              		@ sp needed
 310 0054 30BD     		pop	{r4, r5, pc}
 311              	.L26:
 312 0056 00BF     		.align	2
 313              	.L25:
 314 0058 00080040 		.word	1073743872
 315              		.cfi_endproc
 316              	.LFE37:
 318              		.section	.text.UART_DMA_Config,"ax",%progbits
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 10


 319              		.align	1
 320              		.global	UART_DMA_Config
 321              		.syntax unified
 322              		.thumb
 323              		.thumb_func
 325              	UART_DMA_Config:
 326              	.LVL22:
 327              	.LFB38:
 169:../bsp/bsp_usart2.c **** #endif		 
 170:../bsp/bsp_usart2.c **** ///////////////////////////////////////USART2 DMA·¢ËÍÅäÖÃ²¿·Ö//////////////////////////////////	   
 171:../bsp/bsp_usart2.c **** //DMA1µÄ¸÷Í¨µÀÅäÖÃ
 172:../bsp/bsp_usart2.c **** //ÕâÀïµÄ´«ÊäÐÎÊ½ÊÇ¹Ì¶¨µÄ,ÕâµãÒª¸ù¾Ý²»Í¬µÄÇé¿öÀ´ÐÞ¸Ä
 173:../bsp/bsp_usart2.c **** //´Ó´æ´¢Æ÷->ÍâÉèÄ£Ê½/8Î»Êý¾Ý¿í¶È/´æ´¢Æ÷ÔöÁ¿Ä£Ê½
 174:../bsp/bsp_usart2.c **** //DMA_CHx:DMAÍ¨µÀCHx
 175:../bsp/bsp_usart2.c **** //cpar:ÍâÉèµØÖ·
 176:../bsp/bsp_usart2.c **** //cmar:´æ´¢Æ÷µØÖ·    
 177:../bsp/bsp_usart2.c **** void UART_DMA_Config(DMA_Channel_TypeDef*DMA_CHx,u32 cpar,u32 cmar)
 178:../bsp/bsp_usart2.c **** {
 328              		.loc 1 178 1 is_stmt 1 view -0
 329              		.cfi_startproc
 330              		@ args = 0, pretend = 0, frame = 48
 331              		@ frame_needed = 0, uses_anonymous_args = 0
 332              		.loc 1 178 1 is_stmt 0 view .LVU72
 333 0000 70B5     		push	{r4, r5, r6, lr}
 334              	.LCFI6:
 335              		.cfi_def_cfa_offset 16
 336              		.cfi_offset 4, -16
 337              		.cfi_offset 5, -12
 338              		.cfi_offset 6, -8
 339              		.cfi_offset 14, -4
 340 0002 8CB0     		sub	sp, sp, #48
 341              	.LCFI7:
 342              		.cfi_def_cfa_offset 64
 343 0004 0446     		mov	r4, r0
 344 0006 0E46     		mov	r6, r1
 345 0008 1546     		mov	r5, r2
 179:../bsp/bsp_usart2.c **** 	DMA_InitTypeDef DMA_InitStructure;
 346              		.loc 1 179 2 is_stmt 1 view .LVU73
 180:../bsp/bsp_usart2.c ****  	RCC_AHBPeriphClockCmd(RCC_AHBPeriph_DMA1, ENABLE);	//Ê¹ÄÜDMA´«Êä
 347              		.loc 1 180 3 view .LVU74
 348 000a 0121     		movs	r1, #1
 349              	.LVL23:
 350              		.loc 1 180 3 is_stmt 0 view .LVU75
 351 000c 0846     		mov	r0, r1
 352              	.LVL24:
 353              		.loc 1 180 3 view .LVU76
 354 000e FFF7FEFF 		bl	RCC_AHBPeriphClockCmd
 355              	.LVL25:
 181:../bsp/bsp_usart2.c ****   DMA_DeInit(DMA_CHx);   //½«DMAµÄÍ¨µÀ1¼Ä´æÆ÷ÖØÉèÎªÈ±Ê¡Öµ
 356              		.loc 1 181 3 is_stmt 1 view .LVU77
 357 0012 2046     		mov	r0, r4
 358 0014 FFF7FEFF 		bl	DMA_DeInit
 359              	.LVL26:
 182:../bsp/bsp_usart2.c **** 	DMA_InitStructure.DMA_PeripheralBaseAddr = cpar;  //DMAÍâÉèADC»ùµØÖ·
 360              		.loc 1 182 2 view .LVU78
 361              		.loc 1 182 43 is_stmt 0 view .LVU79
 362 0018 0196     		str	r6, [sp, #4]
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 11


 183:../bsp/bsp_usart2.c **** 	DMA_InitStructure.DMA_MemoryBaseAddr = cmar;  //DMAÄÚ´æ»ùµØÖ·
 363              		.loc 1 183 2 is_stmt 1 view .LVU80
 364              		.loc 1 183 39 is_stmt 0 view .LVU81
 365 001a 0295     		str	r5, [sp, #8]
 184:../bsp/bsp_usart2.c **** 	DMA_InitStructure.DMA_DIR = DMA_DIR_PeripheralDST;  //Êý¾Ý´«Êä·½Ïò£¬´ÓÄÚ´æ¶ÁÈ¡·¢ËÍµ½ÍâÉè
 366              		.loc 1 184 2 is_stmt 1 view .LVU82
 367              		.loc 1 184 28 is_stmt 0 view .LVU83
 368 001c 1023     		movs	r3, #16
 369 001e 0393     		str	r3, [sp, #12]
 185:../bsp/bsp_usart2.c **** 	DMA_InitStructure.DMA_BufferSize = 0;  //DMAÍ¨µÀµÄDMA»º´æµÄ´óÐ¡
 370              		.loc 1 185 2 is_stmt 1 view .LVU84
 371              		.loc 1 185 35 is_stmt 0 view .LVU85
 372 0020 0023     		movs	r3, #0
 373 0022 0493     		str	r3, [sp, #16]
 186:../bsp/bsp_usart2.c **** 	DMA_InitStructure.DMA_PeripheralInc = DMA_PeripheralInc_Disable;  //ÍâÉèµØÖ·¼Ä´æÆ÷²»±ä
 374              		.loc 1 186 2 is_stmt 1 view .LVU86
 375              		.loc 1 186 38 is_stmt 0 view .LVU87
 376 0024 0593     		str	r3, [sp, #20]
 187:../bsp/bsp_usart2.c **** 	DMA_InitStructure.DMA_MemoryInc = DMA_MemoryInc_Enable;  //ÄÚ´æµØÖ·¼Ä´æÆ÷µÝÔö
 377              		.loc 1 187 2 is_stmt 1 view .LVU88
 378              		.loc 1 187 34 is_stmt 0 view .LVU89
 379 0026 8022     		movs	r2, #128
 380 0028 0692     		str	r2, [sp, #24]
 188:../bsp/bsp_usart2.c **** 	DMA_InitStructure.DMA_PeripheralDataSize = DMA_PeripheralDataSize_Byte;  //Êý¾Ý¿í¶ÈÎª8Î»
 381              		.loc 1 188 2 is_stmt 1 view .LVU90
 382              		.loc 1 188 43 is_stmt 0 view .LVU91
 383 002a 0793     		str	r3, [sp, #28]
 189:../bsp/bsp_usart2.c **** 	DMA_InitStructure.DMA_MemoryDataSize = DMA_MemoryDataSize_Byte; //Êý¾Ý¿í¶ÈÎª8Î»
 384              		.loc 1 189 2 is_stmt 1 view .LVU92
 385              		.loc 1 189 39 is_stmt 0 view .LVU93
 386 002c 0893     		str	r3, [sp, #32]
 190:../bsp/bsp_usart2.c **** 	DMA_InitStructure.DMA_Mode = DMA_Mode_Normal;  //¹¤×÷ÔÚÕý³£»º´æÄ£Ê½
 387              		.loc 1 190 2 is_stmt 1 view .LVU94
 388              		.loc 1 190 29 is_stmt 0 view .LVU95
 389 002e 0993     		str	r3, [sp, #36]
 191:../bsp/bsp_usart2.c **** 	DMA_InitStructure.DMA_Priority = DMA_Priority_Medium; //DMAÍ¨µÀ xÓµÓÐÖÐÓÅÏÈ¼¶ 
 390              		.loc 1 191 2 is_stmt 1 view .LVU96
 391              		.loc 1 191 33 is_stmt 0 view .LVU97
 392 0030 4FF48052 		mov	r2, #4096
 393 0034 0A92     		str	r2, [sp, #40]
 192:../bsp/bsp_usart2.c **** 	DMA_InitStructure.DMA_M2M = DMA_M2M_Disable;  //DMAÍ¨µÀxÃ»ÓÐÉèÖÃÎªÄÚ´æµ½ÄÚ´æ´«Êä
 394              		.loc 1 192 2 is_stmt 1 view .LVU98
 395              		.loc 1 192 28 is_stmt 0 view .LVU99
 396 0036 0B93     		str	r3, [sp, #44]
 193:../bsp/bsp_usart2.c **** 	DMA_Init(DMA_CHx, &DMA_InitStructure);  //¸ù¾ÝDMA_InitStructÖÐÖ¸¶¨µÄ²ÎÊý³õÊ¼»¯DMAµÄÍ¨µÀUSART1_Tx_D
 397              		.loc 1 193 2 is_stmt 1 view .LVU100
 398 0038 01A9     		add	r1, sp, #4
 399 003a 2046     		mov	r0, r4
 400 003c FFF7FEFF 		bl	DMA_Init
 401              	.LVL27:
 194:../bsp/bsp_usart2.c **** } 
 402              		.loc 1 194 1 is_stmt 0 view .LVU101
 403 0040 0CB0     		add	sp, sp, #48
 404              	.LCFI8:
 405              		.cfi_def_cfa_offset 16
 406              		@ sp needed
 407 0042 70BD     		pop	{r4, r5, r6, pc}
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 12


 408              		.loc 1 194 1 view .LVU102
 409              		.cfi_endproc
 410              	.LFE38:
 412              		.section	.text.usart2_init,"ax",%progbits
 413              		.align	1
 414              		.global	usart2_init
 415              		.syntax unified
 416              		.thumb
 417              		.thumb_func
 419              	usart2_init:
 420              	.LVL28:
 421              	.LFB33:
  58:../bsp/bsp_usart2.c **** 	NVIC_InitTypeDef NVIC_InitStructure;
 422              		.loc 1 58 1 is_stmt 1 view -0
 423              		.cfi_startproc
 424              		@ args = 0, pretend = 0, frame = 24
 425              		@ frame_needed = 0, uses_anonymous_args = 0
  58:../bsp/bsp_usart2.c **** 	NVIC_InitTypeDef NVIC_InitStructure;
 426              		.loc 1 58 1 is_stmt 0 view .LVU104
 427 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 428              	.LCFI9:
 429              		.cfi_def_cfa_offset 24
 430              		.cfi_offset 4, -24
 431              		.cfi_offset 5, -20
 432              		.cfi_offset 6, -16
 433              		.cfi_offset 7, -12
 434              		.cfi_offset 8, -8
 435              		.cfi_offset 14, -4
 436 0004 86B0     		sub	sp, sp, #24
 437              	.LCFI10:
 438              		.cfi_def_cfa_offset 48
 439 0006 0446     		mov	r4, r0
  59:../bsp/bsp_usart2.c **** 	GPIO_InitTypeDef GPIO_InitStructure;
 440              		.loc 1 59 2 is_stmt 1 view .LVU105
  60:../bsp/bsp_usart2.c **** 	USART_InitTypeDef USART_InitStructure;
 441              		.loc 1 60 2 view .LVU106
  61:../bsp/bsp_usart2.c **** 
 442              		.loc 1 61 2 view .LVU107
  63:../bsp/bsp_usart2.c **** 	RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART2,ENABLE);
 443              		.loc 1 63 2 view .LVU108
 444 0008 0121     		movs	r1, #1
 445 000a 0420     		movs	r0, #4
 446              	.LVL29:
  63:../bsp/bsp_usart2.c **** 	RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART2,ENABLE);
 447              		.loc 1 63 2 is_stmt 0 view .LVU109
 448 000c FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 449              	.LVL30:
  64:../bsp/bsp_usart2.c **** 
 450              		.loc 1 64 2 is_stmt 1 view .LVU110
 451 0010 0121     		movs	r1, #1
 452 0012 4FF40030 		mov	r0, #131072
 453 0016 FFF7FEFF 		bl	RCC_APB1PeriphClockCmd
 454              	.LVL31:
  66:../bsp/bsp_usart2.c **** 	//USART2_TX   PA.2
 455              		.loc 1 66 2 view .LVU111
 456 001a 2E4D     		ldr	r5, .L31
 457 001c 2846     		mov	r0, r5
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 13


 458 001e FFF7FEFF 		bl	USART_DeInit
 459              	.LVL32:
  68:../bsp/bsp_usart2.c **** 	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 460              		.loc 1 68 2 view .LVU112
  68:../bsp/bsp_usart2.c **** 	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 461              		.loc 1 68 30 is_stmt 0 view .LVU113
 462 0022 4FF00408 		mov	r8, #4
 463 0026 ADF81080 		strh	r8, [sp, #16]	@ movhi
  69:../bsp/bsp_usart2.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;	//¸´ÓÃÍÆÍìÊä³ö
 464              		.loc 1 69 2 is_stmt 1 view .LVU114
  69:../bsp/bsp_usart2.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;	//¸´ÓÃÍÆÍìÊä³ö
 465              		.loc 1 69 32 is_stmt 0 view .LVU115
 466 002a 0326     		movs	r6, #3
 467 002c 8DF81260 		strb	r6, [sp, #18]
  70:../bsp/bsp_usart2.c **** 	GPIO_Init(GPIOA, &GPIO_InitStructure); //³õÊ¼»¯PA2
 468              		.loc 1 70 2 is_stmt 1 view .LVU116
  70:../bsp/bsp_usart2.c **** 	GPIO_Init(GPIOA, &GPIO_InitStructure); //³õÊ¼»¯PA2
 469              		.loc 1 70 31 is_stmt 0 view .LVU117
 470 0030 1823     		movs	r3, #24
 471 0032 8DF81330 		strb	r3, [sp, #19]
  71:../bsp/bsp_usart2.c **** 
 472              		.loc 1 71 2 is_stmt 1 view .LVU118
 473 0036 284F     		ldr	r7, .L31+4
 474 0038 04A9     		add	r1, sp, #16
 475 003a 3846     		mov	r0, r7
 476 003c FFF7FEFF 		bl	GPIO_Init
 477              	.LVL33:
  74:../bsp/bsp_usart2.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;//¸¡¿ÕÊäÈë
 478              		.loc 1 74 2 view .LVU119
  74:../bsp/bsp_usart2.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;//¸¡¿ÕÊäÈë
 479              		.loc 1 74 30 is_stmt 0 view .LVU120
 480 0040 0823     		movs	r3, #8
 481 0042 ADF81030 		strh	r3, [sp, #16]	@ movhi
  75:../bsp/bsp_usart2.c **** 	GPIO_Init(GPIOA, &GPIO_InitStructure);  //³õÊ¼»¯PA3
 482              		.loc 1 75 2 is_stmt 1 view .LVU121
  75:../bsp/bsp_usart2.c **** 	GPIO_Init(GPIOA, &GPIO_InitStructure);  //³õÊ¼»¯PA3
 483              		.loc 1 75 31 is_stmt 0 view .LVU122
 484 0046 8DF81380 		strb	r8, [sp, #19]
  76:../bsp/bsp_usart2.c **** 
 485              		.loc 1 76 2 is_stmt 1 view .LVU123
 486 004a 04A9     		add	r1, sp, #16
 487 004c 3846     		mov	r0, r7
 488 004e FFF7FEFF 		bl	GPIO_Init
 489              	.LVL34:
  78:../bsp/bsp_usart2.c **** 	USART_InitStructure.USART_WordLength = USART_WordLength_8b;//×Ö³¤Îª8Î»Êý¾Ý¸ñÊ½
 490              		.loc 1 78 2 view .LVU124
  78:../bsp/bsp_usart2.c **** 	USART_InitStructure.USART_WordLength = USART_WordLength_8b;//×Ö³¤Îª8Î»Êý¾Ý¸ñÊ½
 491              		.loc 1 78 37 is_stmt 0 view .LVU125
 492 0052 0094     		str	r4, [sp]
  79:../bsp/bsp_usart2.c **** 	USART_InitStructure.USART_StopBits = USART_StopBits_1;//Ò»¸öÍ£Ö¹Î»
 493              		.loc 1 79 2 is_stmt 1 view .LVU126
  79:../bsp/bsp_usart2.c **** 	USART_InitStructure.USART_StopBits = USART_StopBits_1;//Ò»¸öÍ£Ö¹Î»
 494              		.loc 1 79 39 is_stmt 0 view .LVU127
 495 0054 0024     		movs	r4, #0
 496              	.LVL35:
  79:../bsp/bsp_usart2.c **** 	USART_InitStructure.USART_StopBits = USART_StopBits_1;//Ò»¸öÍ£Ö¹Î»
 497              		.loc 1 79 39 view .LVU128
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 14


 498 0056 ADF80440 		strh	r4, [sp, #4]	@ movhi
  80:../bsp/bsp_usart2.c **** 	USART_InitStructure.USART_Parity = USART_Parity_No;//ÎÞÆæÅ¼Ð£ÑéÎ»
 499              		.loc 1 80 2 is_stmt 1 view .LVU129
  80:../bsp/bsp_usart2.c **** 	USART_InitStructure.USART_Parity = USART_Parity_No;//ÎÞÆæÅ¼Ð£ÑéÎ»
 500              		.loc 1 80 37 is_stmt 0 view .LVU130
 501 005a ADF80640 		strh	r4, [sp, #6]	@ movhi
  81:../bsp/bsp_usart2.c **** 	USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;//ÎÞÓ²¼þÊý¾ÝÁ÷¿ØÖÆ
 502              		.loc 1 81 2 is_stmt 1 view .LVU131
  81:../bsp/bsp_usart2.c **** 	USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;//ÎÞÓ²¼þÊý¾ÝÁ÷¿ØÖÆ
 503              		.loc 1 81 35 is_stmt 0 view .LVU132
 504 005e ADF80840 		strh	r4, [sp, #8]	@ movhi
  82:../bsp/bsp_usart2.c **** 	USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;	//ÊÕ·¢Ä£Ê½
 505              		.loc 1 82 2 is_stmt 1 view .LVU133
  82:../bsp/bsp_usart2.c **** 	USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;	//ÊÕ·¢Ä£Ê½
 506              		.loc 1 82 48 is_stmt 0 view .LVU134
 507 0062 ADF80C40 		strh	r4, [sp, #12]	@ movhi
  83:../bsp/bsp_usart2.c **** 
 508              		.loc 1 83 2 is_stmt 1 view .LVU135
  83:../bsp/bsp_usart2.c **** 
 509              		.loc 1 83 33 is_stmt 0 view .LVU136
 510 0066 0C23     		movs	r3, #12
 511 0068 ADF80A30 		strh	r3, [sp, #10]	@ movhi
  85:../bsp/bsp_usart2.c **** 
 512              		.loc 1 85 2 is_stmt 1 view .LVU137
 513 006c 6946     		mov	r1, sp
 514 006e 2846     		mov	r0, r5
 515 0070 FFF7FEFF 		bl	USART_Init
 516              	.LVL36:
  90:../bsp/bsp_usart2.c **** 	UART_DMA_Config(DMA1_Channel7,(u32)&USART2->DR,(u32)USART2_TX_BUF);//DMA1Í¨µÀ7,ÍâÉèÎª´®¿Ú2,´æ´¢Æ÷Î
 517              		.loc 1 90 2 view .LVU138
 518 0074 0122     		movs	r2, #1
 519 0076 8021     		movs	r1, #128
 520 0078 2846     		mov	r0, r5
 521 007a FFF7FEFF 		bl	USART_DMACmd
 522              	.LVL37:
  91:../bsp/bsp_usart2.c **** 	USART_Cmd(USART2, ENABLE);                    //Ê¹ÄÜ´®¿Ú 
 523              		.loc 1 91 2 view .LVU139
 524 007e 174A     		ldr	r2, .L31+8
 525 0080 1749     		ldr	r1, .L31+12
 526 0082 1848     		ldr	r0, .L31+16
 527 0084 FFF7FEFF 		bl	UART_DMA_Config
 528              	.LVL38:
  92:../bsp/bsp_usart2.c **** 
 529              		.loc 1 92 2 view .LVU140
 530 0088 0121     		movs	r1, #1
 531 008a 2846     		mov	r0, r5
 532 008c FFF7FEFF 		bl	USART_Cmd
 533              	.LVL39:
  96:../bsp/bsp_usart2.c **** 
 534              		.loc 1 96 2 view .LVU141
 535 0090 0122     		movs	r2, #1
 536 0092 40F22551 		movw	r1, #1317
 537 0096 2846     		mov	r0, r5
 538 0098 FFF7FEFF 		bl	USART_ITConfig
 539              	.LVL40:
  98:../bsp/bsp_usart2.c **** 	NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority=2 ;//ÇÀÕ¼ÓÅÏÈ¼¶3
 540              		.loc 1 98 2 view .LVU142
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 15


  98:../bsp/bsp_usart2.c **** 	NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority=2 ;//ÇÀÕ¼ÓÅÏÈ¼¶3
 541              		.loc 1 98 37 is_stmt 0 view .LVU143
 542 009c 2623     		movs	r3, #38
 543 009e 8DF81430 		strb	r3, [sp, #20]
  99:../bsp/bsp_usart2.c **** 	NVIC_InitStructure.NVIC_IRQChannelSubPriority = 3;		//×ÓÓÅÏÈ¼¶3
 544              		.loc 1 99 2 is_stmt 1 view .LVU144
  99:../bsp/bsp_usart2.c **** 	NVIC_InitStructure.NVIC_IRQChannelSubPriority = 3;		//×ÓÓÅÏÈ¼¶3
 545              		.loc 1 99 54 is_stmt 0 view .LVU145
 546 00a2 0223     		movs	r3, #2
 547 00a4 8DF81530 		strb	r3, [sp, #21]
 100:../bsp/bsp_usart2.c **** 	NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;			//IRQÍ¨µÀÊ¹ÄÜ
 548              		.loc 1 100 2 is_stmt 1 view .LVU146
 100:../bsp/bsp_usart2.c **** 	NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;			//IRQÍ¨µÀÊ¹ÄÜ
 549              		.loc 1 100 48 is_stmt 0 view .LVU147
 550 00a8 8DF81660 		strb	r6, [sp, #22]
 101:../bsp/bsp_usart2.c **** 	NVIC_Init(&NVIC_InitStructure);	//¸ù¾ÝÖ¸¶¨µÄ²ÎÊý³õÊ¼»¯VIC¼Ä´æÆ÷
 551              		.loc 1 101 2 is_stmt 1 view .LVU148
 101:../bsp/bsp_usart2.c **** 	NVIC_Init(&NVIC_InitStructure);	//¸ù¾ÝÖ¸¶¨µÄ²ÎÊý³õÊ¼»¯VIC¼Ä´æÆ÷
 552              		.loc 1 101 40 is_stmt 0 view .LVU149
 553 00ac 0123     		movs	r3, #1
 554 00ae 8DF81730 		strb	r3, [sp, #23]
 102:../bsp/bsp_usart2.c **** 	TIM4_Init(999,7199);		//10msÖÐ¶Ï
 555              		.loc 1 102 2 is_stmt 1 view .LVU150
 556 00b2 05A8     		add	r0, sp, #20
 557 00b4 FFF7FEFF 		bl	NVIC_Init
 558              	.LVL41:
 103:../bsp/bsp_usart2.c **** 	USART2_RX_STA=0;		//ÇåÁã
 559              		.loc 1 103 2 view .LVU151
 560 00b8 41F61F41 		movw	r1, #7199
 561 00bc 40F2E730 		movw	r0, #999
 562 00c0 FFF7FEFF 		bl	TIM4_Init
 563              	.LVL42:
 104:../bsp/bsp_usart2.c **** 	TIM4_Set(0);			//¹Ø±Õ¶¨Ê±Æ÷4
 564              		.loc 1 104 2 view .LVU152
 104:../bsp/bsp_usart2.c **** 	TIM4_Set(0);			//¹Ø±Õ¶¨Ê±Æ÷4
 565              		.loc 1 104 15 is_stmt 0 view .LVU153
 566 00c4 084B     		ldr	r3, .L31+20
 567 00c6 1C80     		strh	r4, [r3]	@ movhi
 105:../bsp/bsp_usart2.c **** 	#endif	 	
 568              		.loc 1 105 2 is_stmt 1 view .LVU154
 569 00c8 2046     		mov	r0, r4
 570 00ca FFF7FEFF 		bl	TIM4_Set
 571              	.LVL43:
 108:../bsp/bsp_usart2.c **** //´®¿Ú2,printf º¯Êý
 572              		.loc 1 108 1 is_stmt 0 view .LVU155
 573 00ce 06B0     		add	sp, sp, #24
 574              	.LCFI11:
 575              		.cfi_def_cfa_offset 24
 576              		@ sp needed
 577 00d0 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 578              	.L32:
 579              		.align	2
 580              	.L31:
 581 00d4 00440040 		.word	1073759232
 582 00d8 00080140 		.word	1073809408
 583 00dc 00000000 		.word	.LANCHOR2
 584 00e0 04440040 		.word	1073759236
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 16


 585 00e4 80000240 		.word	1073873024
 586 00e8 00000000 		.word	.LANCHOR0
 587              		.cfi_endproc
 588              	.LFE33:
 590              		.section	.text.UART_DMA_Enable,"ax",%progbits
 591              		.align	1
 592              		.global	UART_DMA_Enable
 593              		.syntax unified
 594              		.thumb
 595              		.thumb_func
 597              	UART_DMA_Enable:
 598              	.LVL44:
 599              	.LFB39:
 195:../bsp/bsp_usart2.c **** //¿ªÆôÒ»´ÎDMA´«Êä
 196:../bsp/bsp_usart2.c **** void UART_DMA_Enable(DMA_Channel_TypeDef*DMA_CHx,u8 len)
 197:../bsp/bsp_usart2.c **** {
 600              		.loc 1 197 1 is_stmt 1 view -0
 601              		.cfi_startproc
 602              		@ args = 0, pretend = 0, frame = 0
 603              		@ frame_needed = 0, uses_anonymous_args = 0
 604              		.loc 1 197 1 is_stmt 0 view .LVU157
 605 0000 38B5     		push	{r3, r4, r5, lr}
 606              	.LCFI12:
 607              		.cfi_def_cfa_offset 16
 608              		.cfi_offset 3, -16
 609              		.cfi_offset 4, -12
 610              		.cfi_offset 5, -8
 611              		.cfi_offset 14, -4
 612 0002 0446     		mov	r4, r0
 613 0004 0D46     		mov	r5, r1
 198:../bsp/bsp_usart2.c **** 	DMA_Cmd(DMA_CHx, DISABLE );  //¹Ø±Õ Ö¸Ê¾µÄÍ¨µÀ        
 614              		.loc 1 198 2 is_stmt 1 view .LVU158
 615 0006 0021     		movs	r1, #0
 616              	.LVL45:
 617              		.loc 1 198 2 is_stmt 0 view .LVU159
 618 0008 FFF7FEFF 		bl	DMA_Cmd
 619              	.LVL46:
 199:../bsp/bsp_usart2.c **** 	DMA_SetCurrDataCounter(DMA_CHx,len);//DMAÍ¨µÀµÄDMA»º´æµÄ´óÐ¡	
 620              		.loc 1 199 2 is_stmt 1 view .LVU160
 621 000c 2946     		mov	r1, r5
 622 000e 2046     		mov	r0, r4
 623 0010 FFF7FEFF 		bl	DMA_SetCurrDataCounter
 624              	.LVL47:
 200:../bsp/bsp_usart2.c **** 	DMA_Cmd(DMA_CHx, ENABLE);           //¿ªÆôDMA´«Êä
 625              		.loc 1 200 2 view .LVU161
 626 0014 0121     		movs	r1, #1
 627 0016 2046     		mov	r0, r4
 628 0018 FFF7FEFF 		bl	DMA_Cmd
 629              	.LVL48:
 201:../bsp/bsp_usart2.c **** }	   
 630              		.loc 1 201 1 is_stmt 0 view .LVU162
 631 001c 38BD     		pop	{r3, r4, r5, pc}
 632              		.loc 1 201 1 view .LVU163
 633              		.cfi_endproc
 634              	.LFE39:
 636              		.section	.text.u2_printf,"ax",%progbits
 637              		.align	1
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 17


 638              		.global	u2_printf
 639              		.syntax unified
 640              		.thumb
 641              		.thumb_func
 643              	u2_printf:
 644              	.LVL49:
 645              	.LFB34:
 112:../bsp/bsp_usart2.c **** 	va_list ap;
 646              		.loc 1 112 1 is_stmt 1 view -0
 647              		.cfi_startproc
 648              		@ args = 4, pretend = 16, frame = 8
 649              		@ frame_needed = 0, uses_anonymous_args = 1
 112:../bsp/bsp_usart2.c **** 	va_list ap;
 650              		.loc 1 112 1 is_stmt 0 view .LVU165
 651 0000 0FB4     		push	{r0, r1, r2, r3}
 652              	.LCFI13:
 653              		.cfi_def_cfa_offset 16
 654              		.cfi_offset 0, -16
 655              		.cfi_offset 1, -12
 656              		.cfi_offset 2, -8
 657              		.cfi_offset 3, -4
 658 0002 00B5     		push	{lr}
 659              	.LCFI14:
 660              		.cfi_def_cfa_offset 20
 661              		.cfi_offset 14, -20
 662 0004 83B0     		sub	sp, sp, #12
 663              	.LCFI15:
 664              		.cfi_def_cfa_offset 32
 665 0006 04AA     		add	r2, sp, #16
 666 0008 52F8041B 		ldr	r1, [r2], #4
 113:../bsp/bsp_usart2.c **** 	va_start(ap,fmt);
 667              		.loc 1 113 2 is_stmt 1 view .LVU166
 114:../bsp/bsp_usart2.c **** 	vsprintf((char*)USART2_TX_BUF,fmt,ap);
 668              		.loc 1 114 2 view .LVU167
 669 000c 0192     		str	r2, [sp, #4]
 115:../bsp/bsp_usart2.c **** 	va_end(ap);
 670              		.loc 1 115 2 view .LVU168
 671 000e 0A48     		ldr	r0, .L38
 672 0010 FFF7FEFF 		bl	vsprintf
 673              	.LVL50:
 116:../bsp/bsp_usart2.c **** 	while(DMA_GetCurrDataCounter(DMA1_Channel7)!=0);	//µÈ´ýÍ¨µÀ7´«ÊäÍê³É   
 674              		.loc 1 116 2 view .LVU169
 117:../bsp/bsp_usart2.c **** 	UART_DMA_Enable(DMA1_Channel7,strlen((const char*)USART2_TX_BUF)); 	//Í¨¹ýdma·¢ËÍ³öÈ¥
 675              		.loc 1 117 2 view .LVU170
 676              	.L36:
 117:../bsp/bsp_usart2.c **** 	UART_DMA_Enable(DMA1_Channel7,strlen((const char*)USART2_TX_BUF)); 	//Í¨¹ýdma·¢ËÍ³öÈ¥
 677              		.loc 1 117 49 discriminator 1 view .LVU171
 117:../bsp/bsp_usart2.c **** 	UART_DMA_Enable(DMA1_Channel7,strlen((const char*)USART2_TX_BUF)); 	//Í¨¹ýdma·¢ËÍ³öÈ¥
 678              		.loc 1 117 7 discriminator 1 view .LVU172
 117:../bsp/bsp_usart2.c **** 	UART_DMA_Enable(DMA1_Channel7,strlen((const char*)USART2_TX_BUF)); 	//Í¨¹ýdma·¢ËÍ³öÈ¥
 679              		.loc 1 117 8 is_stmt 0 discriminator 1 view .LVU173
 680 0014 0948     		ldr	r0, .L38+4
 681 0016 FFF7FEFF 		bl	DMA_GetCurrDataCounter
 682              	.LVL51:
 117:../bsp/bsp_usart2.c **** 	UART_DMA_Enable(DMA1_Channel7,strlen((const char*)USART2_TX_BUF)); 	//Í¨¹ýdma·¢ËÍ³öÈ¥
 683              		.loc 1 117 7 discriminator 1 view .LVU174
 684 001a 0028     		cmp	r0, #0
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 18


 685 001c FAD1     		bne	.L36
 118:../bsp/bsp_usart2.c **** }
 686              		.loc 1 118 2 is_stmt 1 view .LVU175
 118:../bsp/bsp_usart2.c **** }
 687              		.loc 1 118 32 is_stmt 0 view .LVU176
 688 001e 0648     		ldr	r0, .L38
 689 0020 FFF7FEFF 		bl	strlen
 690              	.LVL52:
 118:../bsp/bsp_usart2.c **** }
 691              		.loc 1 118 2 view .LVU177
 692 0024 C1B2     		uxtb	r1, r0
 693 0026 0548     		ldr	r0, .L38+4
 694 0028 FFF7FEFF 		bl	UART_DMA_Enable
 695              	.LVL53:
 119:../bsp/bsp_usart2.c **** //¶¨Ê±Æ÷4ÖÐ¶Ï·þÎñ³ÌÐò		    
 696              		.loc 1 119 1 view .LVU178
 697 002c 03B0     		add	sp, sp, #12
 698              	.LCFI16:
 699              		.cfi_def_cfa_offset 20
 700              		@ sp needed
 701 002e 5DF804EB 		ldr	lr, [sp], #4
 702              	.LCFI17:
 703              		.cfi_restore 14
 704              		.cfi_def_cfa_offset 16
 705 0032 04B0     		add	sp, sp, #16
 706              	.LCFI18:
 707              		.cfi_restore 3
 708              		.cfi_restore 2
 709              		.cfi_restore 1
 710              		.cfi_restore 0
 711              		.cfi_def_cfa_offset 0
 712 0034 7047     		bx	lr
 713              	.L39:
 714 0036 00BF     		.align	2
 715              	.L38:
 716 0038 00000000 		.word	.LANCHOR2
 717 003c 80000240 		.word	1073873024
 718              		.cfi_endproc
 719              	.LFE34:
 721              		.global	USART2_RX_STA
 722              		.global	USART2_RX_BUF
 723              		.global	USART2_TX_BUF
 724              		.section	.bss.USART2_RX_BUF,"aw",%nobits
 725              		.align	2
 726              		.set	.LANCHOR1,. + 0
 729              	USART2_RX_BUF:
 730 0000 00000000 		.space	1024
 730      00000000 
 730      00000000 
 730      00000000 
 730      00000000 
 731              		.section	.bss.USART2_RX_STA,"aw",%nobits
 732              		.align	1
 733              		.set	.LANCHOR0,. + 0
 736              	USART2_RX_STA:
 737 0000 0000     		.space	2
 738              		.section	.bss.USART2_TX_BUF,"aw",%nobits
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 19


 739              		.align	3
 740              		.set	.LANCHOR2,. + 0
 743              	USART2_TX_BUF:
 744 0000 00000000 		.space	1024
 744      00000000 
 744      00000000 
 744      00000000 
 744      00000000 
 745              		.text
 746              	.Letext0:
 747              		.file 2 "g:\\software\\vscode_for_stm32\\2024-q4-armgcc\\10 2021.10\\arm-none-eabi\\include\\machi
 748              		.file 3 "g:\\software\\vscode_for_stm32\\2024-q4-armgcc\\10 2021.10\\arm-none-eabi\\include\\sys\\
 749              		.file 4 "../user/stm32f10x.h"
 750              		.file 5 "../stm32f10x_fwlib/inc/stm32f10x_dma.h"
 751              		.file 6 "../stm32f10x_fwlib/inc/stm32f10x_gpio.h"
 752              		.file 7 "../stm32f10x_fwlib/inc/stm32f10x_tim.h"
 753              		.file 8 "../stm32f10x_fwlib/inc/stm32f10x_usart.h"
 754              		.file 9 "../stm32f10x_fwlib/inc/misc.h"
 755              		.file 10 "../bsp/bsp_usart2.h"
 756              		.file 11 "g:\\software\\vscode_for_stm32\\2024-q4-armgcc\\10 2021.10\\lib\\gcc\\arm-none-eabi\\10.
 757              		.file 12 "../stm32f10x_fwlib/inc/stm32f10x_rcc.h"
 758              		.file 13 "g:\\software\\vscode_for_stm32\\2024-q4-armgcc\\10 2021.10\\arm-none-eabi\\include\\stdi
 759              		.file 14 "g:\\software\\vscode_for_stm32\\2024-q4-armgcc\\10 2021.10\\arm-none-eabi\\include\\stri
 760              		.file 15 "<built-in>"
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 20


DEFINED SYMBOLS
                            *ABS*:00000000 bsp_usart2.c
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:18     .text.TIM4_Set:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:24     .text.TIM4_Set:00000000 TIM4_Set
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:71     .text.TIM4_Set:00000024 $d
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:76     .text.USART2_IRQHandler:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:82     .text.USART2_IRQHandler:00000000 USART2_IRQHandler
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:161    .text.USART2_IRQHandler:00000054 $d
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:169    .text.TIM4_IRQHandler:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:175    .text.TIM4_IRQHandler:00000000 TIM4_IRQHandler
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:219    .text.TIM4_IRQHandler:0000002c $d
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:225    .text.TIM4_Init:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:231    .text.TIM4_Init:00000000 TIM4_Init
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:314    .text.TIM4_Init:00000058 $d
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:319    .text.UART_DMA_Config:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:325    .text.UART_DMA_Config:00000000 UART_DMA_Config
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:413    .text.usart2_init:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:419    .text.usart2_init:00000000 usart2_init
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:581    .text.usart2_init:000000d4 $d
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:591    .text.UART_DMA_Enable:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:597    .text.UART_DMA_Enable:00000000 UART_DMA_Enable
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:637    .text.u2_printf:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:643    .text.u2_printf:00000000 u2_printf
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:716    .text.u2_printf:00000038 $d
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:736    .bss.USART2_RX_STA:00000000 USART2_RX_STA
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:729    .bss.USART2_RX_BUF:00000000 USART2_RX_BUF
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:743    .bss.USART2_TX_BUF:00000000 USART2_TX_BUF
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:725    .bss.USART2_RX_BUF:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:732    .bss.USART2_RX_STA:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s:739    .bss.USART2_TX_BUF:00000000 $d

UNDEFINED SYMBOLS
TIM_SetCounter
TIM_Cmd
USART_GetITStatus
USART_ReceiveData
TIM_GetITStatus
TIM_ClearITPendingBit
RCC_APB1PeriphClockCmd
TIM_TimeBaseInit
TIM_ITConfig
NVIC_Init
RCC_AHBPeriphClockCmd
DMA_DeInit
DMA_Init
RCC_APB2PeriphClockCmd
USART_DeInit
GPIO_Init
USART_Init
USART_DMACmd
USART_Cmd
USART_ITConfig
DMA_Cmd
DMA_SetCurrDataCounter
vsprintf
DMA_GetCurrDataCounter
strlen
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccMMeGU6.s 			page 21


