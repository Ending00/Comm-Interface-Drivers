ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"common.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata.atk_8266_at_response.str1.4,"aMS",%progbits,1
  18              		.align	2
  19              	.LC0:
  20 0000 257300   		.ascii	"%s\000"
  21              		.section	.text.atk_8266_at_response,"ax",%progbits
  22              		.align	1
  23              		.global	atk_8266_at_response
  24              		.syntax unified
  25              		.thumb
  26              		.thumb_func
  28              	atk_8266_at_response:
  29              	.LVL0:
  30              	.LFB32:
  31              		.file 1 "../app/ESP8266/common.c"
   1:../app/ESP8266/common.c **** #include "common.h"
   2:../app/ESP8266/common.c **** 
   3:../app/ESP8266/common.c **** //连接端口号:8086,可自行修改为其他端口.
   4:../app/ESP8266/common.c **** const u8* portnum="8086";		 
   5:../app/ESP8266/common.c **** 
   6:../app/ESP8266/common.c **** //WIFI STA模式,设置要去连接的路由器无线参数,请根据你自己的路由器设置,自行修改.
   7:../app/ESP8266/common.c **** const u8* wifista_ssid="ALIENTEK";			//路由器SSID号
   8:../app/ESP8266/common.c **** const u8* wifista_encryption="wpa2_aes";	//wpa/wpa2 aes加密方式
   9:../app/ESP8266/common.c **** const u8* wifista_password="15902020353"; 	//连接密码
  10:../app/ESP8266/common.c **** 
  11:../app/ESP8266/common.c **** //WIFI AP模式,模块对外的无线参数,可自行修改.
  12:../app/ESP8266/common.c **** const u8* wifiap_ssid="ATK-ESP8266";			//对外SSID号
  13:../app/ESP8266/common.c **** const u8* wifiap_encryption="wpawpa2_aes";	//wpa/wpa2 aes加密方式
  14:../app/ESP8266/common.c **** const u8* wifiap_password="12345678"; 		//连接密码 
  15:../app/ESP8266/common.c **** 
  16:../app/ESP8266/common.c **** ///////////////////////////////////////////////////////////////////////////////////////////////////
  17:../app/ESP8266/common.c **** //4个网络模式
  18:../app/ESP8266/common.c **** const char *ATK_ESP8266_CWMODE_TBL[3]={"STA模式 ","AP模式 ","AP&STA模式 "};	//ATK-ESP8266,3种网络模
  19:../app/ESP8266/common.c **** //4种工作模式
  20:../app/ESP8266/common.c **** const char *ATK_ESP8266_WORKMODE_TBL[3]={"TCP服务器","TCP客户端"," UDP模式"};	//ATK-ESP8266,4种工作
  21:../app/ESP8266/common.c **** //5种加密方式
  22:../app/ESP8266/common.c **** const u8 *ATK_ESP8266_ECN_TBL[5]={"OPEN","WEP","WPA_PSK","WPA2_PSK","WPA_WAP2_PSK"};
  23:../app/ESP8266/common.c **** ///////////////////////////////////////////////////////////////////////////////////////////////////
  24:../app/ESP8266/common.c **** 
  25:../app/ESP8266/common.c **** //usmart支持部分
  26:../app/ESP8266/common.c **** //将收到的AT指令应答数据返回给电脑串口
  27:../app/ESP8266/common.c **** //mode:0,不清零USART2_RX_STA;
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 2


  28:../app/ESP8266/common.c **** //     1,清零USART2_RX_STA;
  29:../app/ESP8266/common.c **** void atk_8266_at_response(u8 mode)
  30:../app/ESP8266/common.c **** {
  32              		.loc 1 30 1 view -0
  33              		.cfi_startproc
  34              		@ args = 0, pretend = 0, frame = 0
  35              		@ frame_needed = 0, uses_anonymous_args = 0
  31:../app/ESP8266/common.c **** 	if(USART2_RX_STA&0X8000)		//接收到一次数据了
  36              		.loc 1 31 2 view .LVU1
  37              		.loc 1 31 5 is_stmt 0 view .LVU2
  38 0000 0A4B     		ldr	r3, .L8
  39 0002 1A88     		ldrh	r2, [r3]
  40 0004 B3F90030 		ldrsh	r3, [r3]
  41              		.loc 1 31 4 view .LVU3
  42 0008 002B     		cmp	r3, #0
  43 000a 00DB     		blt	.L7
  44 000c 7047     		bx	lr
  45              	.L7:
  30:../app/ESP8266/common.c **** 	if(USART2_RX_STA&0X8000)		//接收到一次数据了
  46              		.loc 1 30 1 view .LVU4
  47 000e 10B5     		push	{r4, lr}
  48              	.LCFI0:
  49              		.cfi_def_cfa_offset 8
  50              		.cfi_offset 4, -8
  51              		.cfi_offset 14, -4
  52 0010 0446     		mov	r4, r0
  32:../app/ESP8266/common.c **** 	{ 
  33:../app/ESP8266/common.c **** 		USART2_RX_BUF[USART2_RX_STA&0X7FFF]=0;//添加结束符
  53              		.loc 1 33 3 is_stmt 1 view .LVU5
  54              		.loc 1 33 30 is_stmt 0 view .LVU6
  55 0012 C2F30E02 		ubfx	r2, r2, #0, #15
  56              		.loc 1 33 38 view .LVU7
  57 0016 0649     		ldr	r1, .L8+4
  58 0018 0023     		movs	r3, #0
  59 001a 8B54     		strb	r3, [r1, r2]
  34:../app/ESP8266/common.c **** 		printf("%s",USART2_RX_BUF);	//发送到串口
  60              		.loc 1 34 3 is_stmt 1 view .LVU8
  61 001c 0548     		ldr	r0, .L8+8
  62              	.LVL1:
  63              		.loc 1 34 3 is_stmt 0 view .LVU9
  64 001e FFF7FEFF 		bl	printf
  65              	.LVL2:
  35:../app/ESP8266/common.c **** 		if(mode)USART2_RX_STA=0;
  66              		.loc 1 35 3 is_stmt 1 view .LVU10
  67              		.loc 1 35 5 is_stmt 0 view .LVU11
  68 0022 14B1     		cbz	r4, .L1
  69              		.loc 1 35 11 is_stmt 1 discriminator 1 view .LVU12
  70              		.loc 1 35 24 is_stmt 0 discriminator 1 view .LVU13
  71 0024 014B     		ldr	r3, .L8
  72 0026 0022     		movs	r2, #0
  73 0028 1A80     		strh	r2, [r3]	@ movhi
  74              	.L1:
  36:../app/ESP8266/common.c **** 	} 
  37:../app/ESP8266/common.c **** }
  75              		.loc 1 37 1 view .LVU14
  76 002a 10BD     		pop	{r4, pc}
  77              	.L9:
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 3


  78              		.align	2
  79              	.L8:
  80 002c 00000000 		.word	USART2_RX_STA
  81 0030 00000000 		.word	USART2_RX_BUF
  82 0034 00000000 		.word	.LC0
  83              		.cfi_endproc
  84              	.LFE32:
  86              		.section	.text.atk_8266_check_cmd,"ax",%progbits
  87              		.align	1
  88              		.global	atk_8266_check_cmd
  89              		.syntax unified
  90              		.thumb
  91              		.thumb_func
  93              	atk_8266_check_cmd:
  94              	.LVL3:
  95              	.LFB33:
  38:../app/ESP8266/common.c **** //ATK-ESP8266发送命令后,检测接收到的应答
  39:../app/ESP8266/common.c **** //str:期待的应答结果
  40:../app/ESP8266/common.c **** //返回值:0,没有得到期待的应答结果
  41:../app/ESP8266/common.c **** //    其他,期待应答结果的位置(str的位置)
  42:../app/ESP8266/common.c **** u8* atk_8266_check_cmd(u8 *str)
  43:../app/ESP8266/common.c **** {
  96              		.loc 1 43 1 is_stmt 1 view -0
  97              		.cfi_startproc
  98              		@ args = 0, pretend = 0, frame = 0
  99              		@ frame_needed = 0, uses_anonymous_args = 0
 100              		.loc 1 43 1 is_stmt 0 view .LVU16
 101 0000 08B5     		push	{r3, lr}
 102              	.LCFI1:
 103              		.cfi_def_cfa_offset 8
 104              		.cfi_offset 3, -8
 105              		.cfi_offset 14, -4
  44:../app/ESP8266/common.c **** 	
  45:../app/ESP8266/common.c **** 	char *strx=0;
 106              		.loc 1 45 2 is_stmt 1 view .LVU17
 107              	.LVL4:
  46:../app/ESP8266/common.c **** 	if(USART2_RX_STA&0X8000)		//接收到一次数据了
 108              		.loc 1 46 2 view .LVU18
 109              		.loc 1 46 5 is_stmt 0 view .LVU19
 110 0002 084B     		ldr	r3, .L14
 111 0004 1A88     		ldrh	r2, [r3]
 112 0006 B3F90030 		ldrsh	r3, [r3]
 113              		.loc 1 46 4 view .LVU20
 114 000a 002B     		cmp	r3, #0
 115 000c 08DA     		bge	.L12
 116 000e 0146     		mov	r1, r0
  47:../app/ESP8266/common.c **** 	{ 
  48:../app/ESP8266/common.c **** 		USART2_RX_BUF[USART2_RX_STA&0X7FFF]=0;//添加结束符
 117              		.loc 1 48 3 is_stmt 1 view .LVU21
 118              		.loc 1 48 30 is_stmt 0 view .LVU22
 119 0010 C2F30E02 		ubfx	r2, r2, #0, #15
 120              		.loc 1 48 38 view .LVU23
 121 0014 0448     		ldr	r0, .L14+4
 122              	.LVL5:
 123              		.loc 1 48 38 view .LVU24
 124 0016 0023     		movs	r3, #0
 125 0018 8354     		strb	r3, [r0, r2]
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 4


  49:../app/ESP8266/common.c **** 		strx=strstr((const char*)USART2_RX_BUF,(const char*)str);
 126              		.loc 1 49 3 is_stmt 1 view .LVU25
 127              		.loc 1 49 8 is_stmt 0 view .LVU26
 128 001a FFF7FEFF 		bl	strstr
 129              	.LVL6:
 130              	.L10:
  50:../app/ESP8266/common.c **** 	} 
  51:../app/ESP8266/common.c **** 	return (u8*)strx;
  52:../app/ESP8266/common.c **** }
 131              		.loc 1 52 1 view .LVU27
 132 001e 08BD     		pop	{r3, pc}
 133              	.LVL7:
 134              	.L12:
  45:../app/ESP8266/common.c **** 	if(USART2_RX_STA&0X8000)		//接收到一次数据了
 135              		.loc 1 45 8 view .LVU28
 136 0020 0020     		movs	r0, #0
 137              	.LVL8:
  51:../app/ESP8266/common.c **** }
 138              		.loc 1 51 2 is_stmt 1 view .LVU29
  51:../app/ESP8266/common.c **** }
 139              		.loc 1 51 9 is_stmt 0 view .LVU30
 140 0022 FCE7     		b	.L10
 141              	.L15:
 142              		.align	2
 143              	.L14:
 144 0024 00000000 		.word	USART2_RX_STA
 145 0028 00000000 		.word	USART2_RX_BUF
 146              		.cfi_endproc
 147              	.LFE33:
 149              		.section	.rodata.atk_8266_send_cmd.str1.4,"aMS",%progbits,1
 150              		.align	2
 151              	.LC1:
 152 0000 25730D0A 		.ascii	"%s\015\012\000"
 152      00
 153 0005 000000   		.align	2
 154              	.LC2:
 155 0008 61636B3A 		.ascii	"ack:%s\015\012\000"
 155      25730D0A 
 155      00
 156              		.section	.text.atk_8266_send_cmd,"ax",%progbits
 157              		.align	1
 158              		.global	atk_8266_send_cmd
 159              		.syntax unified
 160              		.thumb
 161              		.thumb_func
 163              	atk_8266_send_cmd:
 164              	.LVL9:
 165              	.LFB34:
  53:../app/ESP8266/common.c **** //向ATK-ESP8266发送命令
  54:../app/ESP8266/common.c **** //cmd:发送的命令字符串
  55:../app/ESP8266/common.c **** //ack:期待的应答结果,如果为空,则表示不需要等待应答
  56:../app/ESP8266/common.c **** //waittime:等待时间(单位:10ms)
  57:../app/ESP8266/common.c **** //返回值:0,发送成功(得到了期待的应答结果)
  58:../app/ESP8266/common.c **** //       1,发送失败
  59:../app/ESP8266/common.c **** u8 atk_8266_send_cmd(u8 *cmd,u8 *ack,u16 waittime)
  60:../app/ESP8266/common.c **** {
 166              		.loc 1 60 1 is_stmt 1 view -0
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 5


 167              		.cfi_startproc
 168              		@ args = 0, pretend = 0, frame = 0
 169              		@ frame_needed = 0, uses_anonymous_args = 0
 170              		.loc 1 60 1 is_stmt 0 view .LVU32
 171 0000 38B5     		push	{r3, r4, r5, lr}
 172              	.LCFI2:
 173              		.cfi_def_cfa_offset 16
 174              		.cfi_offset 3, -16
 175              		.cfi_offset 4, -12
 176              		.cfi_offset 5, -8
 177              		.cfi_offset 14, -4
 178 0002 0D46     		mov	r5, r1
 179 0004 1446     		mov	r4, r2
  61:../app/ESP8266/common.c **** 	u8 res=0; 
 180              		.loc 1 61 2 is_stmt 1 view .LVU33
 181              	.LVL10:
  62:../app/ESP8266/common.c **** 	USART2_RX_STA=0;
 182              		.loc 1 62 2 view .LVU34
 183              		.loc 1 62 15 is_stmt 0 view .LVU35
 184 0006 154B     		ldr	r3, .L27
 185 0008 0022     		movs	r2, #0
 186              	.LVL11:
 187              		.loc 1 62 15 view .LVU36
 188 000a 1A80     		strh	r2, [r3]	@ movhi
  63:../app/ESP8266/common.c **** 	u2_printf("%s\r\n",cmd);	//发送命令
 189              		.loc 1 63 2 is_stmt 1 view .LVU37
 190 000c 0146     		mov	r1, r0
 191              	.LVL12:
 192              		.loc 1 63 2 is_stmt 0 view .LVU38
 193 000e 1448     		ldr	r0, .L27+4
 194              	.LVL13:
 195              		.loc 1 63 2 view .LVU39
 196 0010 FFF7FEFF 		bl	u2_printf
 197              	.LVL14:
  64:../app/ESP8266/common.c **** 	if(ack&&waittime)		//需要等待应答
 198              		.loc 1 64 2 is_stmt 1 view .LVU40
 199              		.loc 1 64 4 is_stmt 0 view .LVU41
 200 0014 F5B1     		cbz	r5, .L23
 201              		.loc 1 64 8 discriminator 1 view .LVU42
 202 0016 44B9     		cbnz	r4, .L18
  61:../app/ESP8266/common.c **** 	USART2_RX_STA=0;
 203              		.loc 1 61 5 view .LVU43
 204 0018 0020     		movs	r0, #0
 205              	.LVL15:
 206              	.L17:
  65:../app/ESP8266/common.c **** 	{
  66:../app/ESP8266/common.c **** 		while(--waittime)	//等待倒计时
  67:../app/ESP8266/common.c **** 		{
  68:../app/ESP8266/common.c **** 			delay_ms(10);
  69:../app/ESP8266/common.c **** 			if(USART2_RX_STA&0X8000)//接收到期待的应答结果
  70:../app/ESP8266/common.c **** 			{
  71:../app/ESP8266/common.c **** 				if(atk_8266_check_cmd(ack))
  72:../app/ESP8266/common.c **** 				{
  73:../app/ESP8266/common.c **** 					printf("ack:%s\r\n",(u8*)ack);
  74:../app/ESP8266/common.c **** 					break;//得到有效数据 
  75:../app/ESP8266/common.c **** 				}
  76:../app/ESP8266/common.c **** 					USART2_RX_STA=0;
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 6


  77:../app/ESP8266/common.c **** 			} 
  78:../app/ESP8266/common.c **** 		}
  79:../app/ESP8266/common.c **** 		if(waittime==0)res=1; 
  80:../app/ESP8266/common.c **** 	}
  81:../app/ESP8266/common.c **** 	return res;
 207              		.loc 1 81 2 is_stmt 1 view .LVU44
  82:../app/ESP8266/common.c **** } 
 208              		.loc 1 82 1 is_stmt 0 view .LVU45
 209 001a 38BD     		pop	{r3, r4, r5, pc}
 210              	.LVL16:
 211              	.L26:
  73:../app/ESP8266/common.c **** 					break;//得到有效数据 
 212              		.loc 1 73 6 is_stmt 1 view .LVU46
 213 001c 2946     		mov	r1, r5
 214 001e 1148     		ldr	r0, .L27+8
 215 0020 FFF7FEFF 		bl	printf
 216              	.LVL17:
  74:../app/ESP8266/common.c **** 				}
 217              		.loc 1 74 6 view .LVU47
 218              	.L21:
  79:../app/ESP8266/common.c **** 	}
 219              		.loc 1 79 3 view .LVU48
  79:../app/ESP8266/common.c **** 	}
 220              		.loc 1 79 5 is_stmt 0 view .LVU49
 221 0024 C4B1     		cbz	r4, .L24
  61:../app/ESP8266/common.c **** 	USART2_RX_STA=0;
 222              		.loc 1 61 5 view .LVU50
 223 0026 0020     		movs	r0, #0
 224 0028 F7E7     		b	.L17
 225              	.LVL18:
 226              	.L18:
  66:../app/ESP8266/common.c **** 		{
 227              		.loc 1 66 8 is_stmt 1 view .LVU51
 228 002a 013C     		subs	r4, r4, #1
 229              	.LVL19:
  66:../app/ESP8266/common.c **** 		{
 230              		.loc 1 66 8 is_stmt 0 view .LVU52
 231 002c A4B2     		uxth	r4, r4
 232              	.LVL20:
  66:../app/ESP8266/common.c **** 		{
 233              		.loc 1 66 8 view .LVU53
 234 002e 002C     		cmp	r4, #0
 235 0030 F8D0     		beq	.L21
  68:../app/ESP8266/common.c **** 			if(USART2_RX_STA&0X8000)//接收到期待的应答结果
 236              		.loc 1 68 4 is_stmt 1 view .LVU54
 237 0032 0A20     		movs	r0, #10
 238 0034 FFF7FEFF 		bl	delay_ms
 239              	.LVL21:
  69:../app/ESP8266/common.c **** 			{
 240              		.loc 1 69 4 view .LVU55
  69:../app/ESP8266/common.c **** 			{
 241              		.loc 1 69 7 is_stmt 0 view .LVU56
 242 0038 084B     		ldr	r3, .L27
 243 003a B3F90030 		ldrsh	r3, [r3]
  69:../app/ESP8266/common.c **** 			{
 244              		.loc 1 69 6 view .LVU57
 245 003e 002B     		cmp	r3, #0
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 7


 246 0040 F3DA     		bge	.L18
  71:../app/ESP8266/common.c **** 				{
 247              		.loc 1 71 5 is_stmt 1 view .LVU58
  71:../app/ESP8266/common.c **** 				{
 248              		.loc 1 71 8 is_stmt 0 view .LVU59
 249 0042 2846     		mov	r0, r5
 250 0044 FFF7FEFF 		bl	atk_8266_check_cmd
 251              	.LVL22:
  71:../app/ESP8266/common.c **** 				{
 252              		.loc 1 71 7 view .LVU60
 253 0048 0028     		cmp	r0, #0
 254 004a E7D1     		bne	.L26
  76:../app/ESP8266/common.c **** 			} 
 255              		.loc 1 76 6 is_stmt 1 view .LVU61
  76:../app/ESP8266/common.c **** 			} 
 256              		.loc 1 76 19 is_stmt 0 view .LVU62
 257 004c 034B     		ldr	r3, .L27
 258 004e 0022     		movs	r2, #0
 259 0050 1A80     		strh	r2, [r3]	@ movhi
 260 0052 EAE7     		b	.L18
 261              	.LVL23:
 262              	.L23:
  61:../app/ESP8266/common.c **** 	USART2_RX_STA=0;
 263              		.loc 1 61 5 view .LVU63
 264 0054 0020     		movs	r0, #0
 265 0056 E0E7     		b	.L17
 266              	.LVL24:
 267              	.L24:
  79:../app/ESP8266/common.c **** 	}
 268              		.loc 1 79 21 view .LVU64
 269 0058 0120     		movs	r0, #1
 270 005a DEE7     		b	.L17
 271              	.L28:
 272              		.align	2
 273              	.L27:
 274 005c 00000000 		.word	USART2_RX_STA
 275 0060 00000000 		.word	.LC1
 276 0064 08000000 		.word	.LC2
 277              		.cfi_endproc
 278              	.LFE34:
 280              		.section	.text.atk_8266_send_data,"ax",%progbits
 281              		.align	1
 282              		.global	atk_8266_send_data
 283              		.syntax unified
 284              		.thumb
 285              		.thumb_func
 287              	atk_8266_send_data:
 288              	.LVL25:
 289              	.LFB35:
  83:../app/ESP8266/common.c **** //向ATK-ESP8266发送指定数据
  84:../app/ESP8266/common.c **** //data:发送的数据(不需要添加回车了)
  85:../app/ESP8266/common.c **** //ack:期待的应答结果,如果为空,则表示不需要等待应答
  86:../app/ESP8266/common.c **** //waittime:等待时间(单位:10ms)
  87:../app/ESP8266/common.c **** //返回值:0,发送成功(得到了期待的应答结果)luojian
  88:../app/ESP8266/common.c **** u8 atk_8266_send_data(u8 *data,u8 *ack,u16 waittime)
  89:../app/ESP8266/common.c **** {
 290              		.loc 1 89 1 is_stmt 1 view -0
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 8


 291              		.cfi_startproc
 292              		@ args = 0, pretend = 0, frame = 0
 293              		@ frame_needed = 0, uses_anonymous_args = 0
 294              		.loc 1 89 1 is_stmt 0 view .LVU66
 295 0000 38B5     		push	{r3, r4, r5, lr}
 296              	.LCFI3:
 297              		.cfi_def_cfa_offset 16
 298              		.cfi_offset 3, -16
 299              		.cfi_offset 4, -12
 300              		.cfi_offset 5, -8
 301              		.cfi_offset 14, -4
 302 0002 0D46     		mov	r5, r1
 303 0004 1446     		mov	r4, r2
  90:../app/ESP8266/common.c **** 	u8 res=0; 
 304              		.loc 1 90 2 is_stmt 1 view .LVU67
 305              	.LVL26:
  91:../app/ESP8266/common.c **** 	USART2_RX_STA=0;
 306              		.loc 1 91 2 view .LVU68
 307              		.loc 1 91 15 is_stmt 0 view .LVU69
 308 0006 124B     		ldr	r3, .L38
 309 0008 0022     		movs	r2, #0
 310              	.LVL27:
 311              		.loc 1 91 15 view .LVU70
 312 000a 1A80     		strh	r2, [r3]	@ movhi
  92:../app/ESP8266/common.c **** 	u2_printf("%s",data);	//发送命令
 313              		.loc 1 92 2 is_stmt 1 view .LVU71
 314 000c 0146     		mov	r1, r0
 315              	.LVL28:
 316              		.loc 1 92 2 is_stmt 0 view .LVU72
 317 000e 1148     		ldr	r0, .L38+4
 318              	.LVL29:
 319              		.loc 1 92 2 view .LVU73
 320 0010 FFF7FEFF 		bl	u2_printf
 321              	.LVL30:
  93:../app/ESP8266/common.c **** 	if(ack&&waittime)		//需要等待应答
 322              		.loc 1 93 2 is_stmt 1 view .LVU74
 323              		.loc 1 93 4 is_stmt 0 view .LVU75
 324 0014 C5B1     		cbz	r5, .L35
 325              		.loc 1 93 8 discriminator 1 view .LVU76
 326 0016 0CB9     		cbnz	r4, .L31
  90:../app/ESP8266/common.c **** 	USART2_RX_STA=0;
 327              		.loc 1 90 5 view .LVU77
 328 0018 0020     		movs	r0, #0
 329              	.LVL31:
 330              	.L30:
  94:../app/ESP8266/common.c **** 	{
  95:../app/ESP8266/common.c **** 		while(--waittime)	//等待倒计时
  96:../app/ESP8266/common.c **** 		{
  97:../app/ESP8266/common.c **** 			delay_ms(10);
  98:../app/ESP8266/common.c **** 			if(USART2_RX_STA&0X8000)//接收到期待的应答结果
  99:../app/ESP8266/common.c **** 			{
 100:../app/ESP8266/common.c **** 				if(atk_8266_check_cmd(ack))break;//得到有效数据 
 101:../app/ESP8266/common.c **** 				USART2_RX_STA=0;
 102:../app/ESP8266/common.c **** 			} 
 103:../app/ESP8266/common.c **** 		}
 104:../app/ESP8266/common.c **** 		if(waittime==0)res=1; 
 105:../app/ESP8266/common.c **** 	}
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 9


 106:../app/ESP8266/common.c **** 	return res;
 331              		.loc 1 106 2 is_stmt 1 view .LVU78
 107:../app/ESP8266/common.c **** }
 332              		.loc 1 107 1 is_stmt 0 view .LVU79
 333 001a 38BD     		pop	{r3, r4, r5, pc}
 334              	.LVL32:
 335              	.L31:
  95:../app/ESP8266/common.c **** 		{
 336              		.loc 1 95 8 is_stmt 1 view .LVU80
 337 001c 013C     		subs	r4, r4, #1
 338              	.LVL33:
  95:../app/ESP8266/common.c **** 		{
 339              		.loc 1 95 8 is_stmt 0 view .LVU81
 340 001e A4B2     		uxth	r4, r4
 341              	.LVL34:
  95:../app/ESP8266/common.c **** 		{
 342              		.loc 1 95 8 view .LVU82
 343 0020 7CB1     		cbz	r4, .L33
  97:../app/ESP8266/common.c **** 			if(USART2_RX_STA&0X8000)//接收到期待的应答结果
 344              		.loc 1 97 4 is_stmt 1 view .LVU83
 345 0022 0A20     		movs	r0, #10
 346 0024 FFF7FEFF 		bl	delay_ms
 347              	.LVL35:
  98:../app/ESP8266/common.c **** 			{
 348              		.loc 1 98 4 view .LVU84
  98:../app/ESP8266/common.c **** 			{
 349              		.loc 1 98 7 is_stmt 0 view .LVU85
 350 0028 094B     		ldr	r3, .L38
 351 002a B3F90030 		ldrsh	r3, [r3]
  98:../app/ESP8266/common.c **** 			{
 352              		.loc 1 98 6 view .LVU86
 353 002e 002B     		cmp	r3, #0
 354 0030 F4DA     		bge	.L31
 100:../app/ESP8266/common.c **** 				USART2_RX_STA=0;
 355              		.loc 1 100 5 is_stmt 1 view .LVU87
 100:../app/ESP8266/common.c **** 				USART2_RX_STA=0;
 356              		.loc 1 100 8 is_stmt 0 view .LVU88
 357 0032 2846     		mov	r0, r5
 358 0034 FFF7FEFF 		bl	atk_8266_check_cmd
 359              	.LVL36:
 100:../app/ESP8266/common.c **** 				USART2_RX_STA=0;
 360              		.loc 1 100 7 view .LVU89
 361 0038 18B9     		cbnz	r0, .L33
 101:../app/ESP8266/common.c **** 			} 
 362              		.loc 1 101 5 is_stmt 1 view .LVU90
 101:../app/ESP8266/common.c **** 			} 
 363              		.loc 1 101 18 is_stmt 0 view .LVU91
 364 003a 054B     		ldr	r3, .L38
 365 003c 0022     		movs	r2, #0
 366 003e 1A80     		strh	r2, [r3]	@ movhi
 367 0040 ECE7     		b	.L31
 368              	.L33:
 104:../app/ESP8266/common.c **** 	}
 369              		.loc 1 104 3 is_stmt 1 view .LVU92
 104:../app/ESP8266/common.c **** 	}
 370              		.loc 1 104 5 is_stmt 0 view .LVU93
 371 0042 1CB1     		cbz	r4, .L36
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 10


  90:../app/ESP8266/common.c **** 	USART2_RX_STA=0;
 372              		.loc 1 90 5 view .LVU94
 373 0044 0020     		movs	r0, #0
 374 0046 E8E7     		b	.L30
 375              	.LVL37:
 376              	.L35:
  90:../app/ESP8266/common.c **** 	USART2_RX_STA=0;
 377              		.loc 1 90 5 view .LVU95
 378 0048 0020     		movs	r0, #0
 379 004a E6E7     		b	.L30
 380              	.LVL38:
 381              	.L36:
 104:../app/ESP8266/common.c **** 	}
 382              		.loc 1 104 21 view .LVU96
 383 004c 0120     		movs	r0, #1
 384 004e E4E7     		b	.L30
 385              	.L39:
 386              		.align	2
 387              	.L38:
 388 0050 00000000 		.word	USART2_RX_STA
 389 0054 00000000 		.word	.LC0
 390              		.cfi_endproc
 391              	.LFE35:
 393              		.section	.rodata.atk_8266_quit_trans.str1.4,"aMS",%progbits,1
 394              		.align	2
 395              	.LC3:
 396 0000 4F4B00   		.ascii	"OK\000"
 397 0003 00       		.align	2
 398              	.LC4:
 399 0004 415400   		.ascii	"AT\000"
 400              		.section	.text.atk_8266_quit_trans,"ax",%progbits
 401              		.align	1
 402              		.global	atk_8266_quit_trans
 403              		.syntax unified
 404              		.thumb
 405              		.thumb_func
 407              	atk_8266_quit_trans:
 408              	.LFB36:
 108:../app/ESP8266/common.c **** //ATK-ESP8266退出透传模式
 109:../app/ESP8266/common.c **** //返回值:0,退出成功;
 110:../app/ESP8266/common.c **** //       1,退出失败
 111:../app/ESP8266/common.c **** u8 atk_8266_quit_trans(void)
 112:../app/ESP8266/common.c **** {
 409              		.loc 1 112 1 is_stmt 1 view -0
 410              		.cfi_startproc
 411              		@ args = 0, pretend = 0, frame = 0
 412              		@ frame_needed = 0, uses_anonymous_args = 0
 413 0000 08B5     		push	{r3, lr}
 414              	.LCFI4:
 415              		.cfi_def_cfa_offset 8
 416              		.cfi_offset 3, -8
 417              		.cfi_offset 14, -4
 418              	.L41:
 113:../app/ESP8266/common.c **** 	while((USART2->SR&0X40)==0);	//等待发送空
 419              		.loc 1 113 29 discriminator 1 view .LVU98
 420              		.loc 1 113 7 discriminator 1 view .LVU99
 421              		.loc 1 113 15 is_stmt 0 discriminator 1 view .LVU100
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 11


 422 0002 144B     		ldr	r3, .L45
 423 0004 1B88     		ldrh	r3, [r3]
 424              		.loc 1 113 7 discriminator 1 view .LVU101
 425 0006 13F0400F 		tst	r3, #64
 426 000a FAD0     		beq	.L41
 114:../app/ESP8266/common.c **** 	USART2->DR='+';      
 427              		.loc 1 114 2 is_stmt 1 view .LVU102
 428              		.loc 1 114 12 is_stmt 0 view .LVU103
 429 000c 114B     		ldr	r3, .L45
 430 000e 2B22     		movs	r2, #43
 431 0010 9A80     		strh	r2, [r3, #4]	@ movhi
 115:../app/ESP8266/common.c **** 	delay_ms(15);					//大于串口组帧时间(10ms)
 432              		.loc 1 115 2 is_stmt 1 view .LVU104
 433 0012 0F20     		movs	r0, #15
 434 0014 FFF7FEFF 		bl	delay_ms
 435              	.LVL39:
 116:../app/ESP8266/common.c **** 	while((USART2->SR&0X40)==0);	//等待发送空
 436              		.loc 1 116 2 view .LVU105
 437              	.L42:
 438              		.loc 1 116 29 discriminator 1 view .LVU106
 439              		.loc 1 116 7 discriminator 1 view .LVU107
 440              		.loc 1 116 15 is_stmt 0 discriminator 1 view .LVU108
 441 0018 0E4B     		ldr	r3, .L45
 442 001a 1B88     		ldrh	r3, [r3]
 443              		.loc 1 116 7 discriminator 1 view .LVU109
 444 001c 13F0400F 		tst	r3, #64
 445 0020 FAD0     		beq	.L42
 117:../app/ESP8266/common.c **** 	USART2->DR='+';      
 446              		.loc 1 117 2 is_stmt 1 view .LVU110
 447              		.loc 1 117 12 is_stmt 0 view .LVU111
 448 0022 0C4B     		ldr	r3, .L45
 449 0024 2B22     		movs	r2, #43
 450 0026 9A80     		strh	r2, [r3, #4]	@ movhi
 118:../app/ESP8266/common.c **** 	delay_ms(15);					//大于串口组帧时间(10ms)
 451              		.loc 1 118 2 is_stmt 1 view .LVU112
 452 0028 0F20     		movs	r0, #15
 453 002a FFF7FEFF 		bl	delay_ms
 454              	.LVL40:
 119:../app/ESP8266/common.c **** 	while((USART2->SR&0X40)==0);	//等待发送空
 455              		.loc 1 119 2 view .LVU113
 456              	.L43:
 457              		.loc 1 119 29 discriminator 1 view .LVU114
 458              		.loc 1 119 7 discriminator 1 view .LVU115
 459              		.loc 1 119 15 is_stmt 0 discriminator 1 view .LVU116
 460 002e 094B     		ldr	r3, .L45
 461 0030 1B88     		ldrh	r3, [r3]
 462              		.loc 1 119 7 discriminator 1 view .LVU117
 463 0032 13F0400F 		tst	r3, #64
 464 0036 FAD0     		beq	.L43
 120:../app/ESP8266/common.c **** 	USART2->DR='+';      
 465              		.loc 1 120 2 is_stmt 1 view .LVU118
 466              		.loc 1 120 12 is_stmt 0 view .LVU119
 467 0038 064B     		ldr	r3, .L45
 468 003a 2B22     		movs	r2, #43
 469 003c 9A80     		strh	r2, [r3, #4]	@ movhi
 121:../app/ESP8266/common.c **** 	delay_ms(500);					//等待500ms
 470              		.loc 1 121 2 is_stmt 1 view .LVU120
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 12


 471 003e 4FF4FA70 		mov	r0, #500
 472 0042 FFF7FEFF 		bl	delay_ms
 473              	.LVL41:
 122:../app/ESP8266/common.c **** 	return atk_8266_send_cmd("AT","OK",20);//退出透传判断.
 474              		.loc 1 122 2 view .LVU121
 475              		.loc 1 122 9 is_stmt 0 view .LVU122
 476 0046 1422     		movs	r2, #20
 477 0048 0349     		ldr	r1, .L45+4
 478 004a 0448     		ldr	r0, .L45+8
 479 004c FFF7FEFF 		bl	atk_8266_send_cmd
 480              	.LVL42:
 123:../app/ESP8266/common.c **** }
 481              		.loc 1 123 1 view .LVU123
 482 0050 08BD     		pop	{r3, pc}
 483              	.L46:
 484 0052 00BF     		.align	2
 485              	.L45:
 486 0054 00440040 		.word	1073759232
 487 0058 00000000 		.word	.LC3
 488 005c 04000000 		.word	.LC4
 489              		.cfi_endproc
 490              	.LFE36:
 492              		.section	.rodata.atk_8266_apsta_check.str1.4,"aMS",%progbits,1
 493              		.align	2
 494              	.LC5:
 495 0000 3A00     		.ascii	":\000"
 496 0002 0000     		.align	2
 497              	.LC6:
 498 0004 41542B43 		.ascii	"AT+CIPSTATUS\000"
 498      49505354 
 498      41545553 
 498      00
 499 0011 000000   		.align	2
 500              	.LC7:
 501 0014 2B434950 		.ascii	"+CIPSTATUS:0\000"
 501      53544154 
 501      55533A30 
 501      00
 502 0021 000000   		.align	2
 503              	.LC8:
 504 0024 2B434950 		.ascii	"+CIPSTATUS:1\000"
 504      53544154 
 504      55533A31 
 504      00
 505 0031 000000   		.align	2
 506              	.LC9:
 507 0034 2B434950 		.ascii	"+CIPSTATUS:2\000"
 507      53544154 
 507      55533A32 
 507      00
 508 0041 000000   		.align	2
 509              	.LC10:
 510 0044 2B434950 		.ascii	"+CIPSTATUS:4\000"
 510      53544154 
 510      55533A34 
 510      00
 511              		.section	.text.atk_8266_apsta_check,"ax",%progbits
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 13


 512              		.align	1
 513              		.global	atk_8266_apsta_check
 514              		.syntax unified
 515              		.thumb
 516              		.thumb_func
 518              	atk_8266_apsta_check:
 519              	.LFB37:
 124:../app/ESP8266/common.c **** //获取ATK-ESP8266模块的AP+STA连接状态
 125:../app/ESP8266/common.c **** //返回值:0，未连接;1,连接成功
 126:../app/ESP8266/common.c **** u8 atk_8266_apsta_check(void)
 127:../app/ESP8266/common.c **** {
 520              		.loc 1 127 1 is_stmt 1 view -0
 521              		.cfi_startproc
 522              		@ args = 0, pretend = 0, frame = 0
 523              		@ frame_needed = 0, uses_anonymous_args = 0
 524 0000 10B5     		push	{r4, lr}
 525              	.LCFI5:
 526              		.cfi_def_cfa_offset 8
 527              		.cfi_offset 4, -8
 528              		.cfi_offset 14, -4
 128:../app/ESP8266/common.c **** 	if(atk_8266_quit_trans())return 0;			//退出透传 
 529              		.loc 1 128 2 view .LVU125
 530              		.loc 1 128 5 is_stmt 0 view .LVU126
 531 0002 FFF7FEFF 		bl	atk_8266_quit_trans
 532              	.LVL43:
 533              		.loc 1 128 4 view .LVU127
 534 0006 10B1     		cbz	r0, .L52
 535              		.loc 1 128 34 view .LVU128
 536 0008 0024     		movs	r4, #0
 537              	.L48:
 129:../app/ESP8266/common.c **** 	atk_8266_send_cmd("AT+CIPSTATUS",":",50);	//发送AT+CIPSTATUS指令,查询连接状态
 130:../app/ESP8266/common.c **** 	if(atk_8266_check_cmd("+CIPSTATUS:0")&&
 131:../app/ESP8266/common.c **** 		 atk_8266_check_cmd("+CIPSTATUS:1")&&
 132:../app/ESP8266/common.c **** 		 atk_8266_check_cmd("+CIPSTATUS:2")&&
 133:../app/ESP8266/common.c **** 		 atk_8266_check_cmd("+CIPSTATUS:4"))
 134:../app/ESP8266/common.c **** 		return 0;
 135:../app/ESP8266/common.c **** 	else return 1;
 136:../app/ESP8266/common.c **** }
 538              		.loc 1 136 1 view .LVU129
 539 000a 2046     		mov	r0, r4
 540 000c 10BD     		pop	{r4, pc}
 541              	.L52:
 542 000e 0446     		mov	r4, r0
 129:../app/ESP8266/common.c **** 	atk_8266_send_cmd("AT+CIPSTATUS",":",50);	//发送AT+CIPSTATUS指令,查询连接状态
 543              		.loc 1 129 2 is_stmt 1 view .LVU130
 544 0010 3222     		movs	r2, #50
 545 0012 0B49     		ldr	r1, .L53
 546 0014 0B48     		ldr	r0, .L53+4
 547 0016 FFF7FEFF 		bl	atk_8266_send_cmd
 548              	.LVL44:
 130:../app/ESP8266/common.c **** 		 atk_8266_check_cmd("+CIPSTATUS:1")&&
 549              		.loc 1 130 2 view .LVU131
 130:../app/ESP8266/common.c **** 		 atk_8266_check_cmd("+CIPSTATUS:1")&&
 550              		.loc 1 130 5 is_stmt 0 view .LVU132
 551 001a 0B48     		ldr	r0, .L53+8
 552 001c FFF7FEFF 		bl	atk_8266_check_cmd
 553              	.LVL45:
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 14


 130:../app/ESP8266/common.c **** 		 atk_8266_check_cmd("+CIPSTATUS:1")&&
 554              		.loc 1 130 4 view .LVU133
 555 0020 60B1     		cbz	r0, .L49
 131:../app/ESP8266/common.c **** 		 atk_8266_check_cmd("+CIPSTATUS:2")&&
 556              		.loc 1 131 4 discriminator 1 view .LVU134
 557 0022 0A48     		ldr	r0, .L53+12
 558 0024 FFF7FEFF 		bl	atk_8266_check_cmd
 559              	.LVL46:
 130:../app/ESP8266/common.c **** 		 atk_8266_check_cmd("+CIPSTATUS:1")&&
 560              		.loc 1 130 39 discriminator 1 view .LVU135
 561 0028 40B1     		cbz	r0, .L49
 132:../app/ESP8266/common.c **** 		 atk_8266_check_cmd("+CIPSTATUS:4"))
 562              		.loc 1 132 4 view .LVU136
 563 002a 0948     		ldr	r0, .L53+16
 564 002c FFF7FEFF 		bl	atk_8266_check_cmd
 565              	.LVL47:
 131:../app/ESP8266/common.c **** 		 atk_8266_check_cmd("+CIPSTATUS:2")&&
 566              		.loc 1 131 38 view .LVU137
 567 0030 20B1     		cbz	r0, .L49
 133:../app/ESP8266/common.c **** 		return 0;
 568              		.loc 1 133 4 view .LVU138
 569 0032 0848     		ldr	r0, .L53+20
 570 0034 FFF7FEFF 		bl	atk_8266_check_cmd
 571              	.LVL48:
 132:../app/ESP8266/common.c **** 		 atk_8266_check_cmd("+CIPSTATUS:4"))
 572              		.loc 1 132 38 view .LVU139
 573 0038 0028     		cmp	r0, #0
 574 003a E6D1     		bne	.L48
 575              	.L49:
 135:../app/ESP8266/common.c **** }
 576              		.loc 1 135 7 is_stmt 1 view .LVU140
 135:../app/ESP8266/common.c **** }
 577              		.loc 1 135 14 is_stmt 0 view .LVU141
 578 003c 0124     		movs	r4, #1
 579 003e E4E7     		b	.L48
 580              	.L54:
 581              		.align	2
 582              	.L53:
 583 0040 00000000 		.word	.LC5
 584 0044 04000000 		.word	.LC6
 585 0048 14000000 		.word	.LC7
 586 004c 24000000 		.word	.LC8
 587 0050 34000000 		.word	.LC9
 588 0054 44000000 		.word	.LC10
 589              		.cfi_endproc
 590              	.LFE37:
 592              		.section	.rodata.atk_8266_consta_check.str1.4,"aMS",%progbits,1
 593              		.align	2
 594              	.LC11:
 595 0000 2B434950 		.ascii	"+CIPSTATUS:\000"
 595      53544154 
 595      55533A00 
 596              		.section	.text.atk_8266_consta_check,"ax",%progbits
 597              		.align	1
 598              		.global	atk_8266_consta_check
 599              		.syntax unified
 600              		.thumb
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 15


 601              		.thumb_func
 603              	atk_8266_consta_check:
 604              	.LFB38:
 137:../app/ESP8266/common.c **** //获取ATK-ESP8266模块的连接状态
 138:../app/ESP8266/common.c **** //返回值:0,未连接;1,连接成功.
 139:../app/ESP8266/common.c **** u8 atk_8266_consta_check(void)
 140:../app/ESP8266/common.c **** {
 605              		.loc 1 140 1 is_stmt 1 view -0
 606              		.cfi_startproc
 607              		@ args = 0, pretend = 0, frame = 0
 608              		@ frame_needed = 0, uses_anonymous_args = 0
 609 0000 08B5     		push	{r3, lr}
 610              	.LCFI6:
 611              		.cfi_def_cfa_offset 8
 612              		.cfi_offset 3, -8
 613              		.cfi_offset 14, -4
 141:../app/ESP8266/common.c **** 	u8 *p;
 614              		.loc 1 141 2 view .LVU143
 142:../app/ESP8266/common.c **** 	u8 res;
 615              		.loc 1 142 2 view .LVU144
 143:../app/ESP8266/common.c **** 	if(atk_8266_quit_trans())return 0;			//退出透传 
 616              		.loc 1 143 2 view .LVU145
 617              		.loc 1 143 5 is_stmt 0 view .LVU146
 618 0002 FFF7FEFF 		bl	atk_8266_quit_trans
 619              	.LVL49:
 620              		.loc 1 143 4 view .LVU147
 621 0006 08B1     		cbz	r0, .L59
 622              		.loc 1 143 34 view .LVU148
 623 0008 0020     		movs	r0, #0
 624              	.L56:
 144:../app/ESP8266/common.c **** 	atk_8266_send_cmd("AT+CIPSTATUS",":",50);	//发送AT+CIPSTATUS指令,查询连接状态
 145:../app/ESP8266/common.c **** 	p=atk_8266_check_cmd("+CIPSTATUS:"); 
 146:../app/ESP8266/common.c **** 	res=*p;		
 147:../app/ESP8266/common.c **** 	return res;
 148:../app/ESP8266/common.c **** }
 625              		.loc 1 148 1 view .LVU149
 626 000a 08BD     		pop	{r3, pc}
 627              	.L59:
 144:../app/ESP8266/common.c **** 	atk_8266_send_cmd("AT+CIPSTATUS",":",50);	//发送AT+CIPSTATUS指令,查询连接状态
 628              		.loc 1 144 2 is_stmt 1 view .LVU150
 629 000c 3222     		movs	r2, #50
 630 000e 0449     		ldr	r1, .L60
 631 0010 0448     		ldr	r0, .L60+4
 632 0012 FFF7FEFF 		bl	atk_8266_send_cmd
 633              	.LVL50:
 145:../app/ESP8266/common.c **** 	res=*p;		
 634              		.loc 1 145 2 view .LVU151
 145:../app/ESP8266/common.c **** 	res=*p;		
 635              		.loc 1 145 4 is_stmt 0 view .LVU152
 636 0016 0448     		ldr	r0, .L60+8
 637 0018 FFF7FEFF 		bl	atk_8266_check_cmd
 638              	.LVL51:
 146:../app/ESP8266/common.c **** 	return res;
 639              		.loc 1 146 2 is_stmt 1 view .LVU153
 146:../app/ESP8266/common.c **** 	return res;
 640              		.loc 1 146 5 is_stmt 0 view .LVU154
 641 001c 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 16


 642              	.LVL52:
 147:../app/ESP8266/common.c **** }
 643              		.loc 1 147 2 is_stmt 1 view .LVU155
 147:../app/ESP8266/common.c **** }
 644              		.loc 1 147 9 is_stmt 0 view .LVU156
 645 001e F4E7     		b	.L56
 646              	.L61:
 647              		.align	2
 648              	.L60:
 649 0020 00000000 		.word	.LC5
 650 0024 04000000 		.word	.LC6
 651 0028 00000000 		.word	.LC11
 652              		.cfi_endproc
 653              	.LFE38:
 655              		.section	.rodata.atk_8266_get_wanip.str1.4,"aMS",%progbits,1
 656              		.align	2
 657              	.LC12:
 658 0000 41542B43 		.ascii	"AT+CIFSR\000"
 658      49465352 
 658      00
 659 0009 000000   		.align	2
 660              	.LC13:
 661 000c 2200     		.ascii	"\"\000"
 662              		.section	.text.atk_8266_get_wanip,"ax",%progbits
 663              		.align	1
 664              		.global	atk_8266_get_wanip
 665              		.syntax unified
 666              		.thumb
 667              		.thumb_func
 669              	atk_8266_get_wanip:
 670              	.LVL53:
 671              	.LFB39:
 149:../app/ESP8266/common.c **** 
 150:../app/ESP8266/common.c **** //获取Client ip地址
 151:../app/ESP8266/common.c **** //ipbuf:ip地址输出缓存区
 152:../app/ESP8266/common.c **** void atk_8266_get_wanip(u8* ipbuf)
 153:../app/ESP8266/common.c **** {
 672              		.loc 1 153 1 is_stmt 1 view -0
 673              		.cfi_startproc
 674              		@ args = 0, pretend = 0, frame = 0
 675              		@ frame_needed = 0, uses_anonymous_args = 0
 676              		.loc 1 153 1 is_stmt 0 view .LVU158
 677 0000 38B5     		push	{r3, r4, r5, lr}
 678              	.LCFI7:
 679              		.cfi_def_cfa_offset 16
 680              		.cfi_offset 3, -16
 681              		.cfi_offset 4, -12
 682              		.cfi_offset 5, -8
 683              		.cfi_offset 14, -4
 684 0002 0446     		mov	r4, r0
 154:../app/ESP8266/common.c **** 	u8 *p,*p1;
 685              		.loc 1 154 2 is_stmt 1 view .LVU159
 155:../app/ESP8266/common.c **** 		if(atk_8266_send_cmd("AT+CIFSR","OK",50))//获取WAN IP地址失败
 686              		.loc 1 155 3 view .LVU160
 687              		.loc 1 155 6 is_stmt 0 view .LVU161
 688 0004 3222     		movs	r2, #50
 689 0006 0B49     		ldr	r1, .L66
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 17


 690 0008 0B48     		ldr	r0, .L66+4
 691              	.LVL54:
 692              		.loc 1 155 6 view .LVU162
 693 000a FFF7FEFF 		bl	atk_8266_send_cmd
 694              	.LVL55:
 695              		.loc 1 155 5 view .LVU163
 696 000e 10B1     		cbz	r0, .L63
 156:../app/ESP8266/common.c **** 		{
 157:../app/ESP8266/common.c **** 			ipbuf[0]=0;
 697              		.loc 1 157 4 is_stmt 1 view .LVU164
 698              		.loc 1 157 12 is_stmt 0 view .LVU165
 699 0010 0023     		movs	r3, #0
 700 0012 2370     		strb	r3, [r4]
 158:../app/ESP8266/common.c **** 			return;
 701              		.loc 1 158 4 is_stmt 1 view .LVU166
 702              	.L62:
 159:../app/ESP8266/common.c **** 		}		
 160:../app/ESP8266/common.c **** 		p=atk_8266_check_cmd("\"");
 161:../app/ESP8266/common.c **** 		p1=(u8*)strstr((const char*)(p+1),"\"");
 162:../app/ESP8266/common.c **** 		*p1=0;
 163:../app/ESP8266/common.c **** 		sprintf((char*)ipbuf,"%s",p+1);	
 164:../app/ESP8266/common.c **** }
 703              		.loc 1 164 1 is_stmt 0 view .LVU167
 704 0014 38BD     		pop	{r3, r4, r5, pc}
 705              	.LVL56:
 706              	.L63:
 160:../app/ESP8266/common.c **** 		p1=(u8*)strstr((const char*)(p+1),"\"");
 707              		.loc 1 160 3 is_stmt 1 view .LVU168
 160:../app/ESP8266/common.c **** 		p1=(u8*)strstr((const char*)(p+1),"\"");
 708              		.loc 1 160 5 is_stmt 0 view .LVU169
 709 0016 0948     		ldr	r0, .L66+8
 710 0018 FFF7FEFF 		bl	atk_8266_check_cmd
 711              	.LVL57:
 161:../app/ESP8266/common.c **** 		*p1=0;
 712              		.loc 1 161 3 is_stmt 1 view .LVU170
 161:../app/ESP8266/common.c **** 		*p1=0;
 713              		.loc 1 161 33 is_stmt 0 view .LVU171
 714 001c 451C     		adds	r5, r0, #1
 161:../app/ESP8266/common.c **** 		*p1=0;
 715              		.loc 1 161 11 view .LVU172
 716 001e 2221     		movs	r1, #34
 717 0020 2846     		mov	r0, r5
 718              	.LVL58:
 161:../app/ESP8266/common.c **** 		*p1=0;
 719              		.loc 1 161 11 view .LVU173
 720 0022 FFF7FEFF 		bl	strchr
 721              	.LVL59:
 162:../app/ESP8266/common.c **** 		sprintf((char*)ipbuf,"%s",p+1);	
 722              		.loc 1 162 3 is_stmt 1 view .LVU174
 162:../app/ESP8266/common.c **** 		sprintf((char*)ipbuf,"%s",p+1);	
 723              		.loc 1 162 6 is_stmt 0 view .LVU175
 724 0026 0023     		movs	r3, #0
 725 0028 0370     		strb	r3, [r0]
 163:../app/ESP8266/common.c **** }
 726              		.loc 1 163 3 is_stmt 1 view .LVU176
 727 002a 2946     		mov	r1, r5
 728 002c 2046     		mov	r0, r4
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 18


 729              	.LVL60:
 163:../app/ESP8266/common.c **** }
 730              		.loc 1 163 3 is_stmt 0 view .LVU177
 731 002e FFF7FEFF 		bl	strcpy
 732              	.LVL61:
 733 0032 EFE7     		b	.L62
 734              	.L67:
 735              		.align	2
 736              	.L66:
 737 0034 00000000 		.word	.LC3
 738 0038 00000000 		.word	.LC12
 739 003c 0C000000 		.word	.LC13
 740              		.cfi_endproc
 741              	.LFE39:
 743              		.section	.rodata.atk_8266_get_ip.str1.4,"aMS",%progbits,1
 744              		.align	2
 745              	.LC14:
 746 0000 41504950 		.ascii	"APIP,\"\000"
 746      2C2200
 747 0007 00       		.align	2
 748              	.LC15:
 749 0008 41502049 		.ascii	"AP IP:%s \266\313\277\332:%s\000"
 749      503A2573 
 749      20B6CBBF 
 749      DA3A2573 
 749      00
 750 0019 000000   		.align	2
 751              	.LC16:
 752 001c 53544149 		.ascii	"STAIP,\"\000"
 752      502C2200 
 753              		.align	2
 754              	.LC17:
 755 0024 53544120 		.ascii	"STA IP:%s \266\313\277\332:%s\000"
 755      49503A25 
 755      7320B6CB 
 755      BFDA3A25 
 755      7300
 756              		.section	.text.atk_8266_get_ip,"ax",%progbits
 757              		.align	1
 758              		.global	atk_8266_get_ip
 759              		.syntax unified
 760              		.thumb
 761              		.thumb_func
 763              	atk_8266_get_ip:
 764              	.LFB40:
 165:../app/ESP8266/common.c **** 
 166:../app/ESP8266/common.c **** //获取AP+STA ip地址并在指定位置显示
 167:../app/ESP8266/common.c **** //ipbuf:ip地址输出缓存区
 168:../app/ESP8266/common.c **** void atk_8266_get_ip(void)
 169:../app/ESP8266/common.c **** {
 765              		.loc 1 169 1 is_stmt 1 view -0
 766              		.cfi_startproc
 767              		@ args = 0, pretend = 0, frame = 0
 768              		@ frame_needed = 0, uses_anonymous_args = 0
 769 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 770              	.LCFI8:
 771              		.cfi_def_cfa_offset 32
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 19


 772              		.cfi_offset 4, -32
 773              		.cfi_offset 5, -28
 774              		.cfi_offset 6, -24
 775              		.cfi_offset 7, -20
 776              		.cfi_offset 8, -16
 777              		.cfi_offset 9, -12
 778              		.cfi_offset 10, -8
 779              		.cfi_offset 14, -4
 170:../app/ESP8266/common.c **** 		u8 *p;
 780              		.loc 1 170 3 view .LVU179
 171:../app/ESP8266/common.c **** 		u8 *p1;
 781              		.loc 1 171 3 view .LVU180
 172:../app/ESP8266/common.c **** 		u8 *p2;
 782              		.loc 1 172 3 view .LVU181
 173:../app/ESP8266/common.c **** 		u8 *ipbuf;
 783              		.loc 1 173 3 view .LVU182
 174:../app/ESP8266/common.c **** 		u8 *buf;
 784              		.loc 1 174 3 view .LVU183
 175:../app/ESP8266/common.c **** 		p=mymalloc(32);							//申请32字节内存
 785              		.loc 1 175 3 view .LVU184
 786              		.loc 1 175 5 is_stmt 0 view .LVU185
 787 0004 2020     		movs	r0, #32
 788 0006 FFF7FEFF 		bl	mymalloc
 789              	.LVL62:
 176:../app/ESP8266/common.c **** 		p1=mymalloc(32);							//申请32字节内存
 790              		.loc 1 176 3 is_stmt 1 view .LVU186
 791              		.loc 1 176 6 is_stmt 0 view .LVU187
 792 000a 2020     		movs	r0, #32
 793 000c FFF7FEFF 		bl	mymalloc
 794              	.LVL63:
 177:../app/ESP8266/common.c **** 		p2=mymalloc(32);							//申请32字节内存
 795              		.loc 1 177 3 is_stmt 1 view .LVU188
 796              		.loc 1 177 6 is_stmt 0 view .LVU189
 797 0010 2020     		movs	r0, #32
 798 0012 FFF7FEFF 		bl	mymalloc
 799              	.LVL64:
 178:../app/ESP8266/common.c **** 	    ipbuf=mymalloc(32);							//申请32字节内存
 800              		.loc 1 178 6 is_stmt 1 view .LVU190
 801              		.loc 1 178 12 is_stmt 0 view .LVU191
 802 0016 2020     		movs	r0, #32
 803 0018 FFF7FEFF 		bl	mymalloc
 804              	.LVL65:
 805 001c 0446     		mov	r4, r0
 806              	.LVL66:
 179:../app/ESP8266/common.c **** 		buf=mymalloc(32);							//申请32字节内存
 807              		.loc 1 179 3 is_stmt 1 view .LVU192
 808              		.loc 1 179 7 is_stmt 0 view .LVU193
 809 001e 2020     		movs	r0, #32
 810              	.LVL67:
 811              		.loc 1 179 7 view .LVU194
 812 0020 FFF7FEFF 		bl	mymalloc
 813              	.LVL68:
 814 0024 0546     		mov	r5, r0
 815              	.LVL69:
 180:../app/ESP8266/common.c **** 		if(atk_8266_send_cmd("AT+CIFSR","OK",50))//获取WAN IP地址失败
 816              		.loc 1 180 3 is_stmt 1 view .LVU195
 817              		.loc 1 180 6 is_stmt 0 view .LVU196
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 20


 818 0026 3222     		movs	r2, #50
 819 0028 2249     		ldr	r1, .L72
 820 002a 2348     		ldr	r0, .L72+4
 821              	.LVL70:
 822              		.loc 1 180 6 view .LVU197
 823 002c FFF7FEFF 		bl	atk_8266_send_cmd
 824              	.LVL71:
 825              		.loc 1 180 5 view .LVU198
 826 0030 18B1     		cbz	r0, .L69
 181:../app/ESP8266/common.c **** 		{ 
 182:../app/ESP8266/common.c **** 			*ipbuf=0;
 827              		.loc 1 182 4 is_stmt 1 view .LVU199
 828              		.loc 1 182 10 is_stmt 0 view .LVU200
 829 0032 0023     		movs	r3, #0
 830 0034 2370     		strb	r3, [r4]
 831              	.LVL72:
 832              	.L68:
 183:../app/ESP8266/common.c **** 		}
 184:../app/ESP8266/common.c **** 		else
 185:../app/ESP8266/common.c **** 		{		
 186:../app/ESP8266/common.c **** 			p=atk_8266_check_cmd("APIP,\"");
 187:../app/ESP8266/common.c **** 			p1=(u8*)strstr((const char*)(p+6),"\"");
 188:../app/ESP8266/common.c **** 			p2=p1;
 189:../app/ESP8266/common.c **** 			*p1=0;
 190:../app/ESP8266/common.c **** 			ipbuf=p+6;
 191:../app/ESP8266/common.c **** 			sprintf((char*)buf,"AP IP:%s 端口:%s",ipbuf,(u8*)portnum);
 192:../app/ESP8266/common.c **** //			Show_Str(x,y,200,12,buf,12,0);				//显示AP模式的IP地址和端口
 193:../app/ESP8266/common.c **** 			p=(u8*)strstr((const char*)(p2+1),"STAIP,\"");
 194:../app/ESP8266/common.c **** 			p1=(u8*)strstr((const char*)(p+7),"\"");
 195:../app/ESP8266/common.c **** 			*p1=0;
 196:../app/ESP8266/common.c **** 			ipbuf=p+7;
 197:../app/ESP8266/common.c **** 			sprintf((char*)buf,"STA IP:%s 端口:%s",ipbuf,(u8*)portnum);
 198:../app/ESP8266/common.c **** //			Show_Str(x,y+15,200,12,buf,12,0);				//显示STA模式的IP地址和端口
 199:../app/ESP8266/common.c **** 			myfree(p);		//释放内存
 200:../app/ESP8266/common.c **** 			myfree(p1);		//释放内存
 201:../app/ESP8266/common.c **** 			myfree(p2);		//释放内存
 202:../app/ESP8266/common.c **** 			myfree(ipbuf);		//释放内存
 203:../app/ESP8266/common.c **** 			myfree(buf);		//释放内存
 204:../app/ESP8266/common.c **** 		}
 205:../app/ESP8266/common.c **** }
 833              		.loc 1 205 1 view .LVU201
 834 0036 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 835              	.LVL73:
 836              	.L69:
 186:../app/ESP8266/common.c **** 			p1=(u8*)strstr((const char*)(p+6),"\"");
 837              		.loc 1 186 4 is_stmt 1 view .LVU202
 186:../app/ESP8266/common.c **** 			p1=(u8*)strstr((const char*)(p+6),"\"");
 838              		.loc 1 186 6 is_stmt 0 view .LVU203
 839 003a 2048     		ldr	r0, .L72+8
 840 003c FFF7FEFF 		bl	atk_8266_check_cmd
 841              	.LVL74:
 187:../app/ESP8266/common.c **** 			p2=p1;
 842              		.loc 1 187 4 is_stmt 1 view .LVU204
 187:../app/ESP8266/common.c **** 			p2=p1;
 843              		.loc 1 187 34 is_stmt 0 view .LVU205
 844 0040 861D     		adds	r6, r0, #6
 187:../app/ESP8266/common.c **** 			p2=p1;
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 21


 845              		.loc 1 187 12 view .LVU206
 846 0042 2221     		movs	r1, #34
 847 0044 3046     		mov	r0, r6
 848              	.LVL75:
 187:../app/ESP8266/common.c **** 			p2=p1;
 849              		.loc 1 187 12 view .LVU207
 850 0046 FFF7FEFF 		bl	strchr
 851              	.LVL76:
 187:../app/ESP8266/common.c **** 			p2=p1;
 852              		.loc 1 187 12 view .LVU208
 853 004a 0446     		mov	r4, r0
 854              	.LVL77:
 188:../app/ESP8266/common.c **** 			*p1=0;
 855              		.loc 1 188 4 is_stmt 1 view .LVU209
 189:../app/ESP8266/common.c **** 			ipbuf=p+6;
 856              		.loc 1 189 4 view .LVU210
 189:../app/ESP8266/common.c **** 			ipbuf=p+6;
 857              		.loc 1 189 7 is_stmt 0 view .LVU211
 858 004c 4FF00009 		mov	r9, #0
 859 0050 0746     		mov	r7, r0
 860 0052 07F8019B 		strb	r9, [r7], #1
 190:../app/ESP8266/common.c **** 			sprintf((char*)buf,"AP IP:%s 端口:%s",ipbuf,(u8*)portnum);
 861              		.loc 1 190 4 is_stmt 1 view .LVU212
 862              	.LVL78:
 191:../app/ESP8266/common.c **** //			Show_Str(x,y,200,12,buf,12,0);				//显示AP模式的IP地址和端口
 863              		.loc 1 191 4 view .LVU213
 864 0056 DFF86880 		ldr	r8, .L72+12
 865 005a D8F80030 		ldr	r3, [r8]
 866 005e 3246     		mov	r2, r6
 867 0060 1849     		ldr	r1, .L72+16
 868 0062 2846     		mov	r0, r5
 869              	.LVL79:
 191:../app/ESP8266/common.c **** //			Show_Str(x,y,200,12,buf,12,0);				//显示AP模式的IP地址和端口
 870              		.loc 1 191 4 is_stmt 0 view .LVU214
 871 0064 FFF7FEFF 		bl	sprintf
 872              	.LVL80:
 193:../app/ESP8266/common.c **** 			p1=(u8*)strstr((const char*)(p+7),"\"");
 873              		.loc 1 193 4 is_stmt 1 view .LVU215
 193:../app/ESP8266/common.c **** 			p1=(u8*)strstr((const char*)(p+7),"\"");
 874              		.loc 1 193 11 is_stmt 0 view .LVU216
 875 0068 1749     		ldr	r1, .L72+20
 876 006a 3846     		mov	r0, r7
 877 006c FFF7FEFF 		bl	strstr
 878              	.LVL81:
 879 0070 0746     		mov	r7, r0
 880              	.LVL82:
 194:../app/ESP8266/common.c **** 			*p1=0;
 881              		.loc 1 194 4 is_stmt 1 view .LVU217
 194:../app/ESP8266/common.c **** 			*p1=0;
 882              		.loc 1 194 34 is_stmt 0 view .LVU218
 883 0072 00F1070A 		add	r10, r0, #7
 194:../app/ESP8266/common.c **** 			*p1=0;
 884              		.loc 1 194 12 view .LVU219
 885 0076 2221     		movs	r1, #34
 886 0078 5046     		mov	r0, r10
 887              	.LVL83:
 194:../app/ESP8266/common.c **** 			*p1=0;
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 22


 888              		.loc 1 194 12 view .LVU220
 889 007a FFF7FEFF 		bl	strchr
 890              	.LVL84:
 891 007e 0646     		mov	r6, r0
 892              	.LVL85:
 195:../app/ESP8266/common.c **** 			ipbuf=p+7;
 893              		.loc 1 195 4 is_stmt 1 view .LVU221
 195:../app/ESP8266/common.c **** 			ipbuf=p+7;
 894              		.loc 1 195 7 is_stmt 0 view .LVU222
 895 0080 80F80090 		strb	r9, [r0]
 196:../app/ESP8266/common.c **** 			sprintf((char*)buf,"STA IP:%s 端口:%s",ipbuf,(u8*)portnum);
 896              		.loc 1 196 4 is_stmt 1 view .LVU223
 897              	.LVL86:
 197:../app/ESP8266/common.c **** //			Show_Str(x,y+15,200,12,buf,12,0);				//显示STA模式的IP地址和端口
 898              		.loc 1 197 4 view .LVU224
 899 0084 D8F80030 		ldr	r3, [r8]
 900 0088 5246     		mov	r2, r10
 901 008a 1049     		ldr	r1, .L72+24
 902 008c 2846     		mov	r0, r5
 903              	.LVL87:
 197:../app/ESP8266/common.c **** //			Show_Str(x,y+15,200,12,buf,12,0);				//显示STA模式的IP地址和端口
 904              		.loc 1 197 4 is_stmt 0 view .LVU225
 905 008e FFF7FEFF 		bl	sprintf
 906              	.LVL88:
 199:../app/ESP8266/common.c **** 			myfree(p1);		//释放内存
 907              		.loc 1 199 4 is_stmt 1 view .LVU226
 908 0092 3846     		mov	r0, r7
 909 0094 FFF7FEFF 		bl	myfree
 910              	.LVL89:
 200:../app/ESP8266/common.c **** 			myfree(p2);		//释放内存
 911              		.loc 1 200 4 view .LVU227
 912 0098 3046     		mov	r0, r6
 913 009a FFF7FEFF 		bl	myfree
 914              	.LVL90:
 201:../app/ESP8266/common.c **** 			myfree(ipbuf);		//释放内存
 915              		.loc 1 201 4 view .LVU228
 916 009e 2046     		mov	r0, r4
 917 00a0 FFF7FEFF 		bl	myfree
 918              	.LVL91:
 202:../app/ESP8266/common.c **** 			myfree(buf);		//释放内存
 919              		.loc 1 202 4 view .LVU229
 920 00a4 5046     		mov	r0, r10
 921 00a6 FFF7FEFF 		bl	myfree
 922              	.LVL92:
 203:../app/ESP8266/common.c **** 		}
 923              		.loc 1 203 4 view .LVU230
 924 00aa 2846     		mov	r0, r5
 925 00ac FFF7FEFF 		bl	myfree
 926              	.LVL93:
 927              		.loc 1 205 1 is_stmt 0 view .LVU231
 928 00b0 C1E7     		b	.L68
 929              	.L73:
 930 00b2 00BF     		.align	2
 931              	.L72:
 932 00b4 00000000 		.word	.LC3
 933 00b8 00000000 		.word	.LC12
 934 00bc 00000000 		.word	.LC14
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 23


 935 00c0 00000000 		.word	.LANCHOR0
 936 00c4 08000000 		.word	.LC15
 937 00c8 1C000000 		.word	.LC16
 938 00cc 24000000 		.word	.LC17
 939              		.cfi_endproc
 940              	.LFE40:
 942              		.section	.rodata.atk_8266_netpro_sel.str1.4,"aMS",%progbits,1
 943              		.align	2
 944              	.LC18:
 945 0000 257320B9 		.ascii	"%s \271\244\327\367\304\243\312\275\321\241\324\361"
 945      A4D7F7C4 
 945      A3CABDD1 
 945      A1D4F1
 946 000f 00       		.ascii	"\000"
 947              		.align	2
 948              	.LC19:
 949 0010 535441C4 		.ascii	"STA\304\243\312\275\000"
 949      A3CABD00 
 950              		.align	2
 951              	.LC20:
 952 0018 4150C4A3 		.ascii	"AP\304\243\312\275\000"
 952      CABD00
 953 001f 00       		.align	2
 954              	.LC21:
 955 0020 41502653 		.ascii	"AP&STA\304\243\312\275\000"
 955      5441C4A3 
 955      CABD00
 956              		.section	.text.atk_8266_netpro_sel,"ax",%progbits
 957              		.align	1
 958              		.global	atk_8266_netpro_sel
 959              		.syntax unified
 960              		.thumb
 961              		.thumb_func
 963              	atk_8266_netpro_sel:
 964              	.LVL94:
 965              	.LFB41:
 206:../app/ESP8266/common.c **** 
 207:../app/ESP8266/common.c **** //工作模式选择
 208:../app/ESP8266/common.c **** //返回值:
 209:../app/ESP8266/common.c **** //0,TCP服务器
 210:../app/ESP8266/common.c **** //1,TCP客户端
 211:../app/ESP8266/common.c **** //2,UDP模式
 212:../app/ESP8266/common.c **** u8 atk_8266_netpro_sel(const char* name) 
 213:../app/ESP8266/common.c **** {
 966              		.loc 1 213 1 is_stmt 1 view -0
 967              		.cfi_startproc
 968              		@ args = 0, pretend = 0, frame = 0
 969              		@ frame_needed = 0, uses_anonymous_args = 0
 970              		.loc 1 213 1 is_stmt 0 view .LVU233
 971 0000 38B5     		push	{r3, r4, r5, lr}
 972              	.LCFI9:
 973              		.cfi_def_cfa_offset 16
 974              		.cfi_offset 3, -16
 975              		.cfi_offset 4, -12
 976              		.cfi_offset 5, -8
 977              		.cfi_offset 14, -4
 978 0002 0446     		mov	r4, r0
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 24


 214:../app/ESP8266/common.c **** 	u8 *p;
 979              		.loc 1 214 2 is_stmt 1 view .LVU234
 215:../app/ESP8266/common.c **** 	u8 netpro=0;
 980              		.loc 1 215 2 view .LVU235
 981              	.LVL95:
 216:../app/ESP8266/common.c **** 	p=mymalloc(50);//申请50个字节的内存
 982              		.loc 1 216 2 view .LVU236
 983              		.loc 1 216 4 is_stmt 0 view .LVU237
 984 0004 3220     		movs	r0, #50
 985              	.LVL96:
 986              		.loc 1 216 4 view .LVU238
 987 0006 FFF7FEFF 		bl	mymalloc
 988              	.LVL97:
 989 000a 0546     		mov	r5, r0
 990              	.LVL98:
 217:../app/ESP8266/common.c **** 	sprintf((char*)p,"%s 工作模式选择",name);
 991              		.loc 1 217 2 is_stmt 1 view .LVU239
 992 000c 2246     		mov	r2, r4
 993 000e 1249     		ldr	r1, .L80
 994 0010 FFF7FEFF 		bl	sprintf
 995              	.LVL99:
 218:../app/ESP8266/common.c **** 
 219:../app/ESP8266/common.c **** //	while(1)
 220:../app/ESP8266/common.c **** //	{
 221:../app/ESP8266/common.c ****     // 判断网络模式
 222:../app/ESP8266/common.c ****     if (strcmp(name, "STA模式") == 0) {
 996              		.loc 1 222 5 view .LVU240
 997              		.loc 1 222 9 is_stmt 0 view .LVU241
 998 0014 1149     		ldr	r1, .L80+4
 999 0016 2046     		mov	r0, r4
 1000 0018 FFF7FEFF 		bl	strcmp
 1001              	.LVL100:
 1002              		.loc 1 222 8 view .LVU242
 1003 001c 58B1     		cbz	r0, .L76
 223:../app/ESP8266/common.c ****         netpro = 1;
 224:../app/ESP8266/common.c ****     } else if (strcmp(name, "AP模式") == 0) {
 1004              		.loc 1 224 12 is_stmt 1 view .LVU243
 1005              		.loc 1 224 16 is_stmt 0 view .LVU244
 1006 001e 1049     		ldr	r1, .L80+8
 1007 0020 2046     		mov	r0, r4
 1008 0022 FFF7FEFF 		bl	strcmp
 1009              	.LVL101:
 1010              		.loc 1 224 15 view .LVU245
 1011 0026 90B1     		cbz	r0, .L77
 225:../app/ESP8266/common.c ****         netpro = 2;
 226:../app/ESP8266/common.c ****     } else if (strcmp(name, "AP&STA模式") == 0) {
 1012              		.loc 1 226 12 is_stmt 1 view .LVU246
 1013              		.loc 1 226 16 is_stmt 0 view .LVU247
 1014 0028 0E49     		ldr	r1, .L80+12
 1015 002a 2046     		mov	r0, r4
 1016 002c FFF7FEFF 		bl	strcmp
 1017              	.LVL102:
 1018              		.loc 1 226 15 view .LVU248
 1019 0030 78B1     		cbz	r0, .L78
 215:../app/ESP8266/common.c **** 	p=mymalloc(50);//申请50个字节的内存
 1020              		.loc 1 215 5 view .LVU249
 1021 0032 0024     		movs	r4, #0
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 25


 1022              	.LVL103:
 215:../app/ESP8266/common.c **** 	p=mymalloc(50);//申请50个字节的内存
 1023              		.loc 1 215 5 view .LVU250
 1024 0034 00E0     		b	.L75
 1025              	.LVL104:
 1026              	.L76:
 223:../app/ESP8266/common.c ****         netpro = 1;
 1027              		.loc 1 223 16 view .LVU251
 1028 0036 0124     		movs	r4, #1
 1029              	.LVL105:
 1030              	.L75:
 227:../app/ESP8266/common.c ****         netpro = 3;
 228:../app/ESP8266/common.c ****     }
 229:../app/ESP8266/common.c **** 			
 230:../app/ESP8266/common.c **** 	delay_ms(10);
 1031              		.loc 1 230 2 is_stmt 1 view .LVU252
 1032 0038 0A20     		movs	r0, #10
 1033 003a FFF7FEFF 		bl	delay_ms
 1034              	.LVL106:
 231:../app/ESP8266/common.c **** 	atk_8266_at_response(1);
 1035              		.loc 1 231 2 view .LVU253
 1036 003e 0120     		movs	r0, #1
 1037 0040 FFF7FEFF 		bl	atk_8266_at_response
 1038              	.LVL107:
 232:../app/ESP8266/common.c **** //		if((t++)==20){t=0;LED0=!LED0;}//LED闪烁
 233:../app/ESP8266/common.c **** //	} 
 234:../app/ESP8266/common.c **** 	myfree(p);
 1039              		.loc 1 234 2 view .LVU254
 1040 0044 2846     		mov	r0, r5
 1041 0046 FFF7FEFF 		bl	myfree
 1042              	.LVL108:
 235:../app/ESP8266/common.c **** 	return netpro;//返回网络模式选择值 
 1043              		.loc 1 235 2 view .LVU255
 236:../app/ESP8266/common.c **** } 
 1044              		.loc 1 236 1 is_stmt 0 view .LVU256
 1045 004a 2046     		mov	r0, r4
 1046 004c 38BD     		pop	{r3, r4, r5, pc}
 1047              	.LVL109:
 1048              	.L77:
 225:../app/ESP8266/common.c ****     } else if (strcmp(name, "AP&STA模式") == 0) {
 1049              		.loc 1 225 16 view .LVU257
 1050 004e 0224     		movs	r4, #2
 1051              	.LVL110:
 225:../app/ESP8266/common.c ****     } else if (strcmp(name, "AP&STA模式") == 0) {
 1052              		.loc 1 225 16 view .LVU258
 1053 0050 F2E7     		b	.L75
 1054              	.LVL111:
 1055              	.L78:
 227:../app/ESP8266/common.c ****     }
 1056              		.loc 1 227 16 view .LVU259
 1057 0052 0324     		movs	r4, #3
 1058              	.LVL112:
 227:../app/ESP8266/common.c ****     }
 1059              		.loc 1 227 16 view .LVU260
 1060 0054 F0E7     		b	.L75
 1061              	.L81:
 1062 0056 00BF     		.align	2
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 26


 1063              	.L80:
 1064 0058 00000000 		.word	.LC18
 1065 005c 10000000 		.word	.LC19
 1066 0060 18000000 		.word	.LC20
 1067 0064 20000000 		.word	.LC21
 1068              		.cfi_endproc
 1069              	.LFE41:
 1071              		.section	.text.atk_8266_ip_set,"ax",%progbits
 1072              		.align	1
 1073              		.global	atk_8266_ip_set
 1074              		.syntax unified
 1075              		.thumb
 1076              		.thumb_func
 1078              	atk_8266_ip_set:
 1079              	.LVL113:
 1080              	.LFB42:
 237:../app/ESP8266/common.c **** 
 238:../app/ESP8266/common.c **** 
 239:../app/ESP8266/common.c **** //IP设置
 240:../app/ESP8266/common.c **** //title:ip设置标题
 241:../app/ESP8266/common.c **** //mode:工作模式
 242:../app/ESP8266/common.c **** //port:端口号
 243:../app/ESP8266/common.c **** //*ip:ip缓存区(返回IP给上层函数)
 244:../app/ESP8266/common.c **** //返回值:0,确认连接;1,取消连接.
 245:../app/ESP8266/common.c **** u8 atk_8266_ip_set(u8* title,u8* mode,u8* port,u8* ip) 
 246:../app/ESP8266/common.c **** {
 1081              		.loc 1 246 1 is_stmt 1 view -0
 1082              		.cfi_startproc
 1083              		@ args = 0, pretend = 0, frame = 0
 1084              		@ frame_needed = 0, uses_anonymous_args = 0
 1085              		.loc 1 246 1 is_stmt 0 view .LVU262
 1086 0000 10B5     		push	{r4, lr}
 1087              	.LCFI10:
 1088              		.cfi_def_cfa_offset 8
 1089              		.cfi_offset 4, -8
 1090              		.cfi_offset 14, -4
 247:../app/ESP8266/common.c **** 	u8 res=0;
 1091              		.loc 1 247 2 is_stmt 1 view .LVU263
 1092              	.LVL114:
 248:../app/ESP8266/common.c **** 	ip[0]=0; 		
 1093              		.loc 1 248 2 view .LVU264
 1094              		.loc 1 248 7 is_stmt 0 view .LVU265
 1095 0002 0024     		movs	r4, #0
 1096 0004 1C70     		strb	r4, [r3]
 249:../app/ESP8266/common.c **** 	delay_ms(10);
 1097              		.loc 1 249 2 is_stmt 1 view .LVU266
 1098 0006 0A20     		movs	r0, #10
 1099              	.LVL115:
 1100              		.loc 1 249 2 is_stmt 0 view .LVU267
 1101 0008 FFF7FEFF 		bl	delay_ms
 1102              	.LVL116:
 250:../app/ESP8266/common.c **** 	atk_8266_at_response(1);//WIFI模块发过来的数据,及时上传给电脑
 1103              		.loc 1 250 2 is_stmt 1 view .LVU268
 1104 000c 0120     		movs	r0, #1
 1105 000e FFF7FEFF 		bl	atk_8266_at_response
 1106              	.LVL117:
 251:../app/ESP8266/common.c **** 
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 27


 252:../app/ESP8266/common.c **** 	return res;
 1107              		.loc 1 252 2 view .LVU269
 253:../app/ESP8266/common.c **** }
 1108              		.loc 1 253 1 is_stmt 0 view .LVU270
 1109 0012 2046     		mov	r0, r4
 1110 0014 10BD     		pop	{r4, pc}
 1111              		.cfi_endproc
 1112              	.LFE42:
 1114              		.section	.rodata.atk_8266_mode_cofig.str1.4,"aMS",%progbits,1
 1115              		.align	2
 1116              	.LC22:
 1117 0000 554450C4 		.ascii	"UDP\304\243\312\275\000"
 1117      A3CABD00 
 1118              		.align	2
 1119              	.LC23:
 1120 0008 57494649 		.ascii	"WIFI-AP\324\266\266\313UDP IP\311\350\326\303\000"
 1120      2D4150D4 
 1120      B6B6CB55 
 1120      44502049 
 1120      50C9E8D6 
 1121 001e 0000     		.align	2
 1122              	.LC24:
 1123 0020 41542B43 		.ascii	"AT+CIPSTART=1,\"UDP\",\"%s\",%s\000"
 1123      49505354 
 1123      4152543D 
 1123      312C2255 
 1123      4450222C 
 1124              		.align	2
 1125              	.LC25:
 1126 003c 544350BF 		.ascii	"TCP\277\315\273\247\266\313\000"
 1126      CDBBA7B6 
 1126      CB00
 1127 0046 0000     		.align	2
 1128              	.LC26:
 1129 0048 57494649 		.ascii	"WIFI-AP \324\266\266\313IP\311\350\326\303\000"
 1129      2D415020 
 1129      D4B6B6CB 
 1129      4950C9E8 
 1129      D6C300
 1130 005b 00       		.align	2
 1131              	.LC27:
 1132 005c 41542B43 		.ascii	"AT+CIPSTART=1,\"TCP\",\"%s\",%s\000"
 1132      49505354 
 1132      4152543D 
 1132      312C2254 
 1132      4350222C 
 1133              		.section	.text.atk_8266_mode_cofig,"ax",%progbits
 1134              		.align	1
 1135              		.global	atk_8266_mode_cofig
 1136              		.syntax unified
 1137              		.thumb
 1138              		.thumb_func
 1140              	atk_8266_mode_cofig:
 1141              	.LVL118:
 1142              	.LFB43:
 254:../app/ESP8266/common.c **** 
 255:../app/ESP8266/common.c **** //STA模式下的AP的TCP、UDP工作模式配置
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 28


 256:../app/ESP8266/common.c **** u8 atk_8266_mode_cofig(const char* name)
 257:../app/ESP8266/common.c **** {
 1143              		.loc 1 257 1 is_stmt 1 view -0
 1144              		.cfi_startproc
 1145              		@ args = 0, pretend = 0, frame = 16
 1146              		@ frame_needed = 0, uses_anonymous_args = 0
 1147              		.loc 1 257 1 is_stmt 0 view .LVU272
 1148 0000 30B5     		push	{r4, r5, lr}
 1149              	.LCFI11:
 1150              		.cfi_def_cfa_offset 12
 1151              		.cfi_offset 4, -12
 1152              		.cfi_offset 5, -8
 1153              		.cfi_offset 14, -4
 1154 0002 85B0     		sub	sp, sp, #20
 1155              	.LCFI12:
 1156              		.cfi_def_cfa_offset 32
 1157 0004 0446     		mov	r4, r0
 258:../app/ESP8266/common.c **** //	u8 netpro;
 259:../app/ESP8266/common.c **** 	u8 ipbuf[16]; 	//IP缓存
 1158              		.loc 1 259 2 is_stmt 1 view .LVU273
 260:../app/ESP8266/common.c **** 	u8 *p;
 1159              		.loc 1 260 2 view .LVU274
 261:../app/ESP8266/common.c **** 	p=mymalloc(32);//申请32个字节的内存
 1160              		.loc 1 261 2 view .LVU275
 1161              		.loc 1 261 4 is_stmt 0 view .LVU276
 1162 0006 2020     		movs	r0, #32
 1163              	.LVL119:
 1164              		.loc 1 261 4 view .LVU277
 1165 0008 FFF7FEFF 		bl	mymalloc
 1166              	.LVL120:
 1167 000c 0546     		mov	r5, r0
 1168              	.LVL121:
 1169              		.loc 1 261 4 view .LVU278
 1170 000e 08E0     		b	.L85
 1171              	.LVL122:
 1172              	.L92:
 262:../app/ESP8266/common.c **** PRESTA:		
 263:../app/ESP8266/common.c **** //	netpro|=(atk_8266_netpro_sel((u8*)ATK_ESP8266_CWMODE_TBL[1]))<<4;	//网络模式选择 默认是AP模式
 264:../app/ESP8266/common.c **** 	if (strcmp(name, "UDP模式") == 0)
 265:../app/ESP8266/common.c **** 	{
 266:../app/ESP8266/common.c **** 		if(atk_8266_ip_set("WIFI-AP远端UDP IP设置",(u8*)ATK_ESP8266_WORKMODE_TBL[2],(u8*)portnum,ipbuf))g
 1173              		.loc 1 266 3 is_stmt 1 view .LVU279
 1174              		.loc 1 266 6 is_stmt 0 view .LVU280
 1175 0010 6B46     		mov	r3, sp
 1176 0012 204A     		ldr	r2, .L93
 1177 0014 1268     		ldr	r2, [r2]
 1178 0016 2049     		ldr	r1, .L93+4
 1179 0018 8968     		ldr	r1, [r1, #8]
 1180 001a 2048     		ldr	r0, .L93+8
 1181 001c FFF7FEFF 		bl	atk_8266_ip_set
 1182              	.LVL123:
 1183              		.loc 1 266 5 view .LVU281
 1184 0020 40B3     		cbz	r0, .L91
 1185              	.L86:
 1186              	.L85:
 264:../app/ESP8266/common.c **** 	{
 1187              		.loc 1 264 2 is_stmt 1 view .LVU282
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 29


 264:../app/ESP8266/common.c **** 	{
 1188              		.loc 1 264 6 is_stmt 0 view .LVU283
 1189 0022 1F49     		ldr	r1, .L93+12
 1190 0024 2046     		mov	r0, r4
 1191 0026 FFF7FEFF 		bl	strcmp
 1192              	.LVL124:
 264:../app/ESP8266/common.c **** 	{
 1193              		.loc 1 264 5 view .LVU284
 1194 002a 0028     		cmp	r0, #0
 1195 002c F0D0     		beq	.L92
 267:../app/ESP8266/common.c **** 		sprintf((char*)p,"AT+CIPSTART=1,\"UDP\",\"%s\",%s",ipbuf,(u8*)portnum);    //配置目标UDP服务器,及
 268:../app/ESP8266/common.c **** //		sprintf((char*)p,"AT+CIPSTART=0,\"UDP\",\"%s\",%s",ipbuf,(u8*)portnum);    //配置目标UDP服务器,
 269:../app/ESP8266/common.c **** 		delay_ms(200);
 270:../app/ESP8266/common.c **** 		atk_8266_send_cmd(p,"OK",200);
 271:../app/ESP8266/common.c **** 	}
 272:../app/ESP8266/common.c **** 	else if(strcmp(name, "TCP客户端") == 0)     //AP TCP Client    透传模式测试
 1196              		.loc 1 272 7 is_stmt 1 view .LVU285
 1197              		.loc 1 272 10 is_stmt 0 view .LVU286
 1198 002e 1D49     		ldr	r1, .L93+16
 1199 0030 2046     		mov	r0, r4
 1200 0032 FFF7FEFF 		bl	strcmp
 1201              	.LVL125:
 1202              		.loc 1 272 9 view .LVU287
 1203 0036 B8B9     		cbnz	r0, .L88
 273:../app/ESP8266/common.c **** 	{
 274:../app/ESP8266/common.c **** 		if(atk_8266_ip_set("WIFI-AP 远端IP设置",(u8*)ATK_ESP8266_WORKMODE_TBL[1],(u8*)portnum,ipbuf))goto
 1204              		.loc 1 274 3 is_stmt 1 view .LVU288
 1205              		.loc 1 274 6 is_stmt 0 view .LVU289
 1206 0038 6B46     		mov	r3, sp
 1207 003a 164A     		ldr	r2, .L93
 1208 003c 1268     		ldr	r2, [r2]
 1209 003e 1649     		ldr	r1, .L93+4
 1210 0040 4968     		ldr	r1, [r1, #4]
 1211 0042 1948     		ldr	r0, .L93+20
 1212 0044 FFF7FEFF 		bl	atk_8266_ip_set
 1213              	.LVL126:
 1214              		.loc 1 274 5 view .LVU290
 1215 0048 0028     		cmp	r0, #0
 1216 004a EAD1     		bne	.L85
 275:../app/ESP8266/common.c **** 		sprintf((char*)p,"AT+CIPSTART=1,\"TCP\",\"%s\",%s",ipbuf,(u8*)portnum);    //配置目标TCP服务器,及
 1217              		.loc 1 275 3 is_stmt 1 view .LVU291
 1218 004c 114B     		ldr	r3, .L93
 1219 004e 1B68     		ldr	r3, [r3]
 1220 0050 6A46     		mov	r2, sp
 1221 0052 1649     		ldr	r1, .L93+24
 1222 0054 2846     		mov	r0, r5
 1223 0056 FFF7FEFF 		bl	sprintf
 1224              	.LVL127:
 276:../app/ESP8266/common.c **** 		//sprintf((char*)p,"AT+CIPSTART=0,\"TCP\",\"%s\",%s",ipbuf,(u8*)portnum);    //配置目标TCP服务器,
 277:../app/ESP8266/common.c **** 		while(atk_8266_send_cmd(p,"OK",200)){}
 1225              		.loc 1 277 3 view .LVU292
 1226              	.L89:
 1227              		.loc 1 277 40 discriminator 1 view .LVU293
 1228              		.loc 1 277 8 discriminator 1 view .LVU294
 1229              		.loc 1 277 9 is_stmt 0 discriminator 1 view .LVU295
 1230 005a C822     		movs	r2, #200
 1231 005c 1449     		ldr	r1, .L93+28
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 30


 1232 005e 2846     		mov	r0, r5
 1233 0060 FFF7FEFF 		bl	atk_8266_send_cmd
 1234              	.LVL128:
 1235              		.loc 1 277 8 discriminator 1 view .LVU296
 1236 0064 0028     		cmp	r0, #0
 1237 0066 F8D1     		bne	.L89
 1238              	.L88:
 278:../app/ESP8266/common.c **** 
 279:../app/ESP8266/common.c **** 	}
 280:../app/ESP8266/common.c **** 	else;   //服务器模式不用配置
 281:../app/ESP8266/common.c **** 	myfree(p);
 1239              		.loc 1 281 2 is_stmt 1 view .LVU297
 1240 0068 2846     		mov	r0, r5
 1241 006a FFF7FEFF 		bl	myfree
 1242              	.LVL129:
 282:../app/ESP8266/common.c **** 	return 0;
 1243              		.loc 1 282 2 view .LVU298
 283:../app/ESP8266/common.c **** }
 1244              		.loc 1 283 1 is_stmt 0 view .LVU299
 1245 006e 0020     		movs	r0, #0
 1246 0070 05B0     		add	sp, sp, #20
 1247              	.LCFI13:
 1248              		.cfi_remember_state
 1249              		.cfi_def_cfa_offset 12
 1250              		@ sp needed
 1251 0072 30BD     		pop	{r4, r5, pc}
 1252              	.LVL130:
 1253              	.L91:
 1254              	.LCFI14:
 1255              		.cfi_restore_state
 267:../app/ESP8266/common.c **** //		sprintf((char*)p,"AT+CIPSTART=0,\"UDP\",\"%s\",%s",ipbuf,(u8*)portnum);    //配置目标UDP服务器,
 1256              		.loc 1 267 3 is_stmt 1 view .LVU300
 1257 0074 074B     		ldr	r3, .L93
 1258 0076 1B68     		ldr	r3, [r3]
 1259 0078 6A46     		mov	r2, sp
 1260 007a 0E49     		ldr	r1, .L93+32
 1261 007c 2846     		mov	r0, r5
 1262 007e FFF7FEFF 		bl	sprintf
 1263              	.LVL131:
 269:../app/ESP8266/common.c **** 		atk_8266_send_cmd(p,"OK",200);
 1264              		.loc 1 269 3 view .LVU301
 1265 0082 C820     		movs	r0, #200
 1266 0084 FFF7FEFF 		bl	delay_ms
 1267              	.LVL132:
 270:../app/ESP8266/common.c **** 	}
 1268              		.loc 1 270 3 view .LVU302
 1269 0088 C822     		movs	r2, #200
 1270 008a 0949     		ldr	r1, .L93+28
 1271 008c 2846     		mov	r0, r5
 1272 008e FFF7FEFF 		bl	atk_8266_send_cmd
 1273              	.LVL133:
 1274 0092 E9E7     		b	.L88
 1275              	.L94:
 1276              		.align	2
 1277              	.L93:
 1278 0094 00000000 		.word	.LANCHOR0
 1279 0098 00000000 		.word	.LANCHOR1
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 31


 1280 009c 08000000 		.word	.LC23
 1281 00a0 00000000 		.word	.LC22
 1282 00a4 3C000000 		.word	.LC25
 1283 00a8 48000000 		.word	.LC26
 1284 00ac 5C000000 		.word	.LC27
 1285 00b0 00000000 		.word	.LC3
 1286 00b4 20000000 		.word	.LC24
 1287              		.cfi_endproc
 1288              	.LFE43:
 1290              		.section	.rodata.atk_8266_mtest_ui.str1.4,"aMS",%progbits,1
 1291              		.align	2
 1292              	.LC28:
 1293 0000 41544B5F 		.ascii	"ATK_ESP8266 WIFI\304\243\277\351\262\342\312\324\015"
 1293      45535038 
 1293      32363620 
 1293      57494649 
 1293      C4A3BFE9 
 1294 0019 00       		.ascii	"\000"
 1295 001a 0000     		.align	2
 1296              	.LC29:
 1297 001c 41542B43 		.ascii	"AT+CWMODE=2\000"
 1297      574D4F44 
 1297      453D3200 
 1298              		.align	2
 1299              	.LC30:
 1300 0028 41542B52 		.ascii	"AT+RST\000"
 1300      535400
 1301 002f 00       		.align	2
 1302              	.LC31:
 1303 0030 41542B43 		.ascii	"AT+CWSAP=\"%s\",\"%s\",1,4\000"
 1303      57534150 
 1303      3D222573 
 1303      222C2225 
 1303      73222C31 
 1304 0047 00       		.align	2
 1305              	.LC32:
 1306 0048 41542B47 		.ascii	"AT+GMR\000"
 1306      4D5200
 1307 004f 00       		.align	2
 1308              	.LC33:
 1309 0050 53444B20 		.ascii	"SDK version:\000"
 1309      76657273 
 1309      696F6E3A 
 1309      00
 1310 005d 000000   		.align	2
 1311              	.LC34:
 1312 0060 B9CCBCFE 		.ascii	"\271\314\274\376\260\346\261\276:%s\015\012\000"
 1312      B0E6B1BE 
 1312      3A25730D 
 1312      0A00
 1313 006e 0000     		.align	2
 1314              	.LC35:
 1315 0070 2B43574D 		.ascii	"+CWMODE:\000"
 1315      4F44453A 
 1315      00
 1316 0079 000000   		.align	2
 1317              	.LC36:
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 32


 1318 007c 41542B43 		.ascii	"AT+CWMODE?\000"
 1318      574D4F44 
 1318      453F00
 1319 0087 00       		.align	2
 1320              	.LC37:
 1321 0088 CDF8C2E7 		.ascii	"\315\370\302\347\304\243\312\275:%s\015\012\000"
 1321      C4A3CABD 
 1321      3A25730D 
 1321      0A00
 1322 0096 0000     		.align	2
 1323              	.LC38:
 1324 0098 2B435753 		.ascii	"+CWSAP:\000"
 1324      41503A00 
 1325              		.align	2
 1326              	.LC39:
 1327 00a0 41542B43 		.ascii	"AT+CWSAP?\000"
 1327      57534150 
 1327      3F00
 1328 00aa 0000     		.align	2
 1329              	.LC40:
 1330 00ac 53534944 		.ascii	"SSID\272\305:%s\015\012\000"
 1330      BAC53A25 
 1330      730D0A00 
 1331              		.align	2
 1332              	.LC41:
 1333 00b8 C3DCC2EB 		.ascii	"\303\334\302\353:%s\015\012\000"
 1333      3A25730D 
 1333      0A00
 1334 00c2 0000     		.align	2
 1335              	.LC42:
 1336 00c4 CDA8B5C0 		.ascii	"\315\250\265\300\272\305:%s\015\012\000"
 1336      BAC53A25 
 1336      730D0A00 
 1337              		.align	2
 1338              	.LC43:
 1339 00d0 BCD3C3DC 		.ascii	"\274\323\303\334\267\275\312\275:%s\015\012\000"
 1339      B7BDCABD 
 1339      3A25730D 
 1339      0A00
 1340              		.section	.text.atk_8266_mtest_ui,"ax",%progbits
 1341              		.align	1
 1342              		.global	atk_8266_mtest_ui
 1343              		.syntax unified
 1344              		.thumb
 1345              		.thumb_func
 1347              	atk_8266_mtest_ui:
 1348              	.LFB44:
 284:../app/ESP8266/common.c **** 
 285:../app/ESP8266/common.c **** //测试界面主UI
 286:../app/ESP8266/common.c **** void atk_8266_mtest_ui(void)
 287:../app/ESP8266/common.c **** { 
 1349              		.loc 1 287 1 view -0
 1350              		.cfi_startproc
 1351              		@ args = 0, pretend = 0, frame = 0
 1352              		@ frame_needed = 0, uses_anonymous_args = 0
 1353 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1354              	.LCFI15:
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 33


 1355              		.cfi_def_cfa_offset 24
 1356              		.cfi_offset 4, -24
 1357              		.cfi_offset 5, -20
 1358              		.cfi_offset 6, -16
 1359              		.cfi_offset 7, -12
 1360              		.cfi_offset 8, -8
 1361              		.cfi_offset 14, -4
 288:../app/ESP8266/common.c **** 	u8 *p,*p1,*p2;
 1362              		.loc 1 288 2 view .LVU304
 289:../app/ESP8266/common.c **** 	p=mymalloc(32);							//申请32字节内存
 1363              		.loc 1 289 2 view .LVU305
 1364              		.loc 1 289 4 is_stmt 0 view .LVU306
 1365 0004 2020     		movs	r0, #32
 1366 0006 FFF7FEFF 		bl	mymalloc
 1367              	.LVL134:
 1368 000a 0546     		mov	r5, r0
 1369              	.LVL135:
 290:../app/ESP8266/common.c **** 	p1=mymalloc(32);							//申请32字节内存
 1370              		.loc 1 290 2 is_stmt 1 view .LVU307
 1371              		.loc 1 290 5 is_stmt 0 view .LVU308
 1372 000c 2020     		movs	r0, #32
 1373              	.LVL136:
 1374              		.loc 1 290 5 view .LVU309
 1375 000e FFF7FEFF 		bl	mymalloc
 1376              	.LVL137:
 291:../app/ESP8266/common.c **** 	p2=mymalloc(32);							//申请32字节内存
 1377              		.loc 1 291 2 is_stmt 1 view .LVU310
 1378              		.loc 1 291 5 is_stmt 0 view .LVU311
 1379 0012 2020     		movs	r0, #32
 1380 0014 FFF7FEFF 		bl	mymalloc
 1381              	.LVL138:
 292:../app/ESP8266/common.c **** 	printf("ATK_ESP8266 WIFI模块测试\r\n"); 
 1382              		.loc 1 292 2 is_stmt 1 view .LVU312
 1383 0018 4848     		ldr	r0, .L97
 1384 001a FFF7FEFF 		bl	puts
 1385              	.LVL139:
 293:../app/ESP8266/common.c **** 	
 294:../app/ESP8266/common.c **** 	atk_8266_send_cmd("AT+CWMODE=2","OK",20);
 1386              		.loc 1 294 2 view .LVU313
 1387 001e 484C     		ldr	r4, .L97+4
 1388 0020 1422     		movs	r2, #20
 1389 0022 2146     		mov	r1, r4
 1390 0024 4748     		ldr	r0, .L97+8
 1391 0026 FFF7FEFF 		bl	atk_8266_send_cmd
 1392              	.LVL140:
 295:../app/ESP8266/common.c **** 	atk_8266_send_cmd("AT+RST","OK",20);
 1393              		.loc 1 295 2 view .LVU314
 1394 002a 1422     		movs	r2, #20
 1395 002c 2146     		mov	r1, r4
 1396 002e 4648     		ldr	r0, .L97+12
 1397 0030 FFF7FEFF 		bl	atk_8266_send_cmd
 1398              	.LVL141:
 296:../app/ESP8266/common.c **** 	delay_ms(1000);//延时2s等待模块重启
 1399              		.loc 1 296 2 view .LVU315
 1400 0034 4FF47A70 		mov	r0, #1000
 1401 0038 FFF7FEFF 		bl	delay_ms
 1402              	.LVL142:
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 34


 297:../app/ESP8266/common.c **** 	delay_ms(1000);//
 1403              		.loc 1 297 2 view .LVU316
 1404 003c 4FF47A70 		mov	r0, #1000
 1405 0040 FFF7FEFF 		bl	delay_ms
 1406              	.LVL143:
 298:../app/ESP8266/common.c **** 	delay_ms(1000);
 1407              		.loc 1 298 2 view .LVU317
 1408 0044 4FF47A70 		mov	r0, #1000
 1409 0048 FFF7FEFF 		bl	delay_ms
 1410              	.LVL144:
 299:../app/ESP8266/common.c **** 	delay_ms(1000);
 1411              		.loc 1 299 2 view .LVU318
 1412 004c 4FF47A70 		mov	r0, #1000
 1413 0050 FFF7FEFF 		bl	delay_ms
 1414              	.LVL145:
 300:../app/ESP8266/common.c **** 	sprintf((char*)p,"AT+CWSAP=\"%s\",\"%s\",1,4",wifiap_ssid,wifiap_password);    //配置模块AP模式无
 1415              		.loc 1 300 2 view .LVU319
 1416 0054 3D4B     		ldr	r3, .L97+16
 1417 0056 1B68     		ldr	r3, [r3]
 1418 0058 3D4A     		ldr	r2, .L97+20
 1419 005a 1268     		ldr	r2, [r2]
 1420 005c 3D49     		ldr	r1, .L97+24
 1421 005e 2846     		mov	r0, r5
 1422 0060 FFF7FEFF 		bl	sprintf
 1423              	.LVL146:
 301:../app/ESP8266/common.c **** 	atk_8266_send_cmd(p,"OK",1000);	
 1424              		.loc 1 301 2 view .LVU320
 1425 0064 4FF47A72 		mov	r2, #1000
 1426 0068 2146     		mov	r1, r4
 1427 006a 2846     		mov	r0, r5
 1428 006c FFF7FEFF 		bl	atk_8266_send_cmd
 1429              	.LVL147:
 302:../app/ESP8266/common.c **** 
 303:../app/ESP8266/common.c **** 	atk_8266_send_cmd("AT+GMR","OK",20);		//获取固件版本号
 1430              		.loc 1 303 2 view .LVU321
 1431 0070 1422     		movs	r2, #20
 1432 0072 2146     		mov	r1, r4
 1433 0074 3848     		ldr	r0, .L97+28
 1434 0076 FFF7FEFF 		bl	atk_8266_send_cmd
 1435              	.LVL148:
 304:../app/ESP8266/common.c **** 	p=atk_8266_check_cmd("SDK version:");
 1436              		.loc 1 304 2 view .LVU322
 1437              		.loc 1 304 4 is_stmt 0 view .LVU323
 1438 007a 3848     		ldr	r0, .L97+32
 1439 007c FFF7FEFF 		bl	atk_8266_check_cmd
 1440              	.LVL149:
 1441 0080 0146     		mov	r1, r0
 1442              	.LVL150:
 305:../app/ESP8266/common.c **** 	printf("固件版本:%s\r\n",p);
 1443              		.loc 1 305 2 is_stmt 1 view .LVU324
 1444 0082 3748     		ldr	r0, .L97+36
 1445              	.LVL151:
 1446              		.loc 1 305 2 is_stmt 0 view .LVU325
 1447 0084 FFF7FEFF 		bl	printf
 1448              	.LVL152:
 306:../app/ESP8266/common.c **** 	
 307:../app/ESP8266/common.c **** 	atk_8266_send_cmd("AT+CWMODE?","+CWMODE:",20);	//获取网络模式
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 35


 1449              		.loc 1 307 2 is_stmt 1 view .LVU326
 1450 0088 1422     		movs	r2, #20
 1451 008a 3649     		ldr	r1, .L97+40
 1452 008c 3648     		ldr	r0, .L97+44
 1453 008e FFF7FEFF 		bl	atk_8266_send_cmd
 1454              	.LVL153:
 308:../app/ESP8266/common.c **** 	p=atk_8266_check_cmd(":");
 1455              		.loc 1 308 2 view .LVU327
 1456              		.loc 1 308 4 is_stmt 0 view .LVU328
 1457 0092 3648     		ldr	r0, .L97+48
 1458 0094 FFF7FEFF 		bl	atk_8266_check_cmd
 1459              	.LVL154:
 309:../app/ESP8266/common.c **** 	printf("网络模式:%s\r\n",(u8*)ATK_ESP8266_CWMODE_TBL[*(p+1)-'1']);
 1460              		.loc 1 309 2 is_stmt 1 view .LVU329
 1461              		.loc 1 309 55 is_stmt 0 view .LVU330
 1462 0098 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 1463              		.loc 1 309 61 view .LVU331
 1464 009a 313B     		subs	r3, r3, #49
 1465              		.loc 1 309 2 view .LVU332
 1466 009c 344A     		ldr	r2, .L97+52
 1467 009e 52F82310 		ldr	r1, [r2, r3, lsl #2]
 1468 00a2 3448     		ldr	r0, .L97+56
 1469              	.LVL155:
 1470              		.loc 1 309 2 view .LVU333
 1471 00a4 FFF7FEFF 		bl	printf
 1472              	.LVL156:
 310:../app/ESP8266/common.c **** 	
 311:../app/ESP8266/common.c **** 	atk_8266_send_cmd("AT+CWSAP?","+CWSAP:",20);	//获取wifi配置
 1473              		.loc 1 311 2 is_stmt 1 view .LVU334
 1474 00a8 1422     		movs	r2, #20
 1475 00aa 3349     		ldr	r1, .L97+60
 1476 00ac 3348     		ldr	r0, .L97+64
 1477 00ae FFF7FEFF 		bl	atk_8266_send_cmd
 1478              	.LVL157:
 312:../app/ESP8266/common.c **** 	p=atk_8266_check_cmd("\"");
 1479              		.loc 1 312 2 view .LVU335
 1480              		.loc 1 312 4 is_stmt 0 view .LVU336
 1481 00b2 3348     		ldr	r0, .L97+68
 1482 00b4 FFF7FEFF 		bl	atk_8266_check_cmd
 1483              	.LVL158:
 313:../app/ESP8266/common.c **** 	p1=(u8*)strstr((const char*)(p+1),"\"");
 1484              		.loc 1 313 2 is_stmt 1 view .LVU337
 1485              		.loc 1 313 32 is_stmt 0 view .LVU338
 1486 00b8 451C     		adds	r5, r0, #1
 1487              		.loc 1 313 10 view .LVU339
 1488 00ba 2221     		movs	r1, #34
 1489 00bc 2846     		mov	r0, r5
 1490              	.LVL159:
 1491              		.loc 1 313 10 view .LVU340
 1492 00be FFF7FEFF 		bl	strchr
 1493              	.LVL160:
 314:../app/ESP8266/common.c **** 	p2=p1;
 1494              		.loc 1 314 2 is_stmt 1 view .LVU341
 315:../app/ESP8266/common.c **** 	*p1=0;
 1495              		.loc 1 315 2 view .LVU342
 1496              		.loc 1 315 5 is_stmt 0 view .LVU343
 1497 00c2 0027     		movs	r7, #0
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 36


 1498 00c4 0446     		mov	r4, r0
 1499 00c6 04F8017B 		strb	r7, [r4], #1
 316:../app/ESP8266/common.c **** 	printf("SSID号:%s\r\n",p+1);
 1500              		.loc 1 316 2 is_stmt 1 view .LVU344
 1501 00ca 2946     		mov	r1, r5
 1502 00cc 2D48     		ldr	r0, .L97+72
 1503              	.LVL161:
 1504              		.loc 1 316 2 is_stmt 0 view .LVU345
 1505 00ce FFF7FEFF 		bl	printf
 1506              	.LVL162:
 317:../app/ESP8266/common.c **** 	p=(u8*)strstr((const char*)(p2+1),"\"");
 1507              		.loc 1 317 2 is_stmt 1 view .LVU346
 1508              		.loc 1 317 9 is_stmt 0 view .LVU347
 1509 00d2 2221     		movs	r1, #34
 1510 00d4 2046     		mov	r0, r4
 1511 00d6 FFF7FEFF 		bl	strchr
 1512              	.LVL163:
 318:../app/ESP8266/common.c **** 	p1=(u8*)strstr((const char*)(p+1),"\"");
 1513              		.loc 1 318 2 is_stmt 1 view .LVU348
 1514              		.loc 1 318 32 is_stmt 0 view .LVU349
 1515 00da 441C     		adds	r4, r0, #1
 1516              	.LVL164:
 1517              		.loc 1 318 10 view .LVU350
 1518 00dc 2221     		movs	r1, #34
 1519 00de 2046     		mov	r0, r4
 1520              	.LVL165:
 1521              		.loc 1 318 10 view .LVU351
 1522 00e0 FFF7FEFF 		bl	strchr
 1523              	.LVL166:
 1524              		.loc 1 318 10 view .LVU352
 1525 00e4 0546     		mov	r5, r0
 1526              	.LVL167:
 319:../app/ESP8266/common.c **** 	p2=p1;
 1527              		.loc 1 319 2 is_stmt 1 view .LVU353
 320:../app/ESP8266/common.c **** 	*p1=0;		
 1528              		.loc 1 320 2 view .LVU354
 1529              		.loc 1 320 5 is_stmt 0 view .LVU355
 1530 00e6 0646     		mov	r6, r0
 1531 00e8 06F8017B 		strb	r7, [r6], #1
 321:../app/ESP8266/common.c **** 	printf("密码:%s\r\n",p+1);
 1532              		.loc 1 321 2 is_stmt 1 view .LVU356
 1533 00ec 2146     		mov	r1, r4
 1534 00ee 2648     		ldr	r0, .L97+76
 1535              	.LVL168:
 1536              		.loc 1 321 2 is_stmt 0 view .LVU357
 1537 00f0 FFF7FEFF 		bl	printf
 1538              	.LVL169:
 322:../app/ESP8266/common.c **** 	p=(u8*)strstr((const char*)(p2+1),",");
 1539              		.loc 1 322 2 is_stmt 1 view .LVU358
 1540              		.loc 1 322 9 is_stmt 0 view .LVU359
 1541 00f4 2C21     		movs	r1, #44
 1542 00f6 3046     		mov	r0, r6
 1543 00f8 FFF7FEFF 		bl	strchr
 1544              	.LVL170:
 1545 00fc 0646     		mov	r6, r0
 1546              	.LVL171:
 323:../app/ESP8266/common.c **** 	p1=(u8*)strstr((const char*)(p+1),",");
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 37


 1547              		.loc 1 323 2 is_stmt 1 view .LVU360
 1548              		.loc 1 323 32 is_stmt 0 view .LVU361
 1549 00fe 00F10108 		add	r8, r0, #1
 1550              		.loc 1 323 10 view .LVU362
 1551 0102 2C21     		movs	r1, #44
 1552 0104 4046     		mov	r0, r8
 1553              	.LVL172:
 1554              		.loc 1 323 10 view .LVU363
 1555 0106 FFF7FEFF 		bl	strchr
 1556              	.LVL173:
 1557 010a 0446     		mov	r4, r0
 1558              	.LVL174:
 324:../app/ESP8266/common.c **** 	*p1=0;
 1559              		.loc 1 324 2 is_stmt 1 view .LVU364
 1560              		.loc 1 324 5 is_stmt 0 view .LVU365
 1561 010c 0770     		strb	r7, [r0]
 325:../app/ESP8266/common.c **** 	printf("通道号:%s\r\n",p+1);
 1562              		.loc 1 325 2 is_stmt 1 view .LVU366
 1563 010e 4146     		mov	r1, r8
 1564 0110 1E48     		ldr	r0, .L97+80
 1565              	.LVL175:
 1566              		.loc 1 325 2 is_stmt 0 view .LVU367
 1567 0112 FFF7FEFF 		bl	printf
 1568              	.LVL176:
 326:../app/ESP8266/common.c **** 	printf("加密方式:%s\r\n",(u8*)ATK_ESP8266_ECN_TBL[*(p1+1)-'0']);
 1569              		.loc 1 326 2 is_stmt 1 view .LVU368
 1570              		.loc 1 326 52 is_stmt 0 view .LVU369
 1571 0116 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 1572              		.loc 1 326 59 view .LVU370
 1573 0118 303B     		subs	r3, r3, #48
 1574              		.loc 1 326 2 view .LVU371
 1575 011a 1D4A     		ldr	r2, .L97+84
 1576 011c 52F82310 		ldr	r1, [r2, r3, lsl #2]
 1577 0120 1C48     		ldr	r0, .L97+88
 1578 0122 FFF7FEFF 		bl	printf
 1579              	.LVL177:
 327:../app/ESP8266/common.c **** 	myfree(p);		//释放内存 
 1580              		.loc 1 327 2 is_stmt 1 view .LVU372
 1581 0126 3046     		mov	r0, r6
 1582 0128 FFF7FEFF 		bl	myfree
 1583              	.LVL178:
 328:../app/ESP8266/common.c **** 	myfree(p1);		//释放内存 
 1584              		.loc 1 328 2 view .LVU373
 1585 012c 2046     		mov	r0, r4
 1586 012e FFF7FEFF 		bl	myfree
 1587              	.LVL179:
 329:../app/ESP8266/common.c **** 	myfree(p2);		//释放内存 	
 1588              		.loc 1 329 2 view .LVU374
 1589 0132 2846     		mov	r0, r5
 1590 0134 FFF7FEFF 		bl	myfree
 1591              	.LVL180:
 330:../app/ESP8266/common.c **** }
 1592              		.loc 1 330 1 is_stmt 0 view .LVU375
 1593 0138 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1594              	.LVL181:
 1595              	.L98:
 1596              		.loc 1 330 1 view .LVU376
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 38


 1597              		.align	2
 1598              	.L97:
 1599 013c 00000000 		.word	.LC28
 1600 0140 00000000 		.word	.LC3
 1601 0144 1C000000 		.word	.LC29
 1602 0148 28000000 		.word	.LC30
 1603 014c 00000000 		.word	.LANCHOR2
 1604 0150 00000000 		.word	.LANCHOR3
 1605 0154 30000000 		.word	.LC31
 1606 0158 48000000 		.word	.LC32
 1607 015c 50000000 		.word	.LC33
 1608 0160 60000000 		.word	.LC34
 1609 0164 70000000 		.word	.LC35
 1610 0168 7C000000 		.word	.LC36
 1611 016c 00000000 		.word	.LC5
 1612 0170 00000000 		.word	.LANCHOR4
 1613 0174 88000000 		.word	.LC37
 1614 0178 98000000 		.word	.LC38
 1615 017c A0000000 		.word	.LC39
 1616 0180 0C000000 		.word	.LC13
 1617 0184 AC000000 		.word	.LC40
 1618 0188 B8000000 		.word	.LC41
 1619 018c C4000000 		.word	.LC42
 1620 0190 00000000 		.word	.LANCHOR5
 1621 0194 D0000000 		.word	.LC43
 1622              		.cfi_endproc
 1623              	.LFE44:
 1625              		.section	.rodata.atk_8266_test.str1.4,"aMS",%progbits,1
 1626              		.align	2
 1627              	.LC44:
 1628 0000 41544B2D 		.ascii	"ATK-ESP8266 WIFI\304\243\277\351\262\342\312\324\000"
 1628      45535038 
 1628      32363620 
 1628      57494649 
 1628      C4A3BFE9 
 1629 0019 000000   		.align	2
 1630              	.LC45:
 1631 001c 41542B43 		.ascii	"AT+CIPMODE=0\000"
 1631      49504D4F 
 1631      44453D30 
 1631      00
 1632 0029 000000   		.align	2
 1633              	.LC46:
 1634 002c CEB4BCEC 		.ascii	"\316\264\274\354\262\342\265\275\304\243\277\351!!!"
 1634      B2E2B5BD 
 1634      C4A3BFE9 
 1634      212121
 1635 003b 00       		.ascii	"\000"
 1636              		.align	2
 1637              	.LC47:
 1638 003c B3A2CAD4 		.ascii	"\263\242\312\324\301\254\275\323\304\243\277\351..."
 1638      C1ACBDD3 
 1638      C4A3BFE9 
 1638      2E2E2E
 1639 004b 00       		.ascii	"\000"
 1640              		.align	2
 1641              	.LC48:
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 39


 1642 004c 41544530 		.ascii	"ATE0\000"
 1642      00
 1643 0051 000000   		.align	2
 1644              	.LC49:
 1645 0054 41544B2D 		.ascii	"ATK-ESP WIFI-STA \262\342\312\324\000"
 1645      45535020 
 1645      57494649 
 1645      2D535441 
 1645      20B2E2CA 
 1646 006a 0000     		.align	2
 1647              	.LC50:
 1648 006c D5FDD4DA 		.ascii	"\325\375\324\332\305\344\326\303ATK-ESP8266\304\243"
 1648      C5E4D6C3 
 1648      41544B2D 
 1648      45535038 
 1648      323636C4 
 1649 0081 BFE9A3AC 		.ascii	"\277\351\243\254\307\353\311\324\265\310...\000"
 1649      C7EBC9D4 
 1649      B5C82E2E 
 1649      2E00
 1650              		.section	.text.atk_8266_test,"ax",%progbits
 1651              		.align	1
 1652              		.global	atk_8266_test
 1653              		.syntax unified
 1654              		.thumb
 1655              		.thumb_func
 1657              	atk_8266_test:
 1658              	.LVL182:
 1659              	.LFB45:
 331:../app/ESP8266/common.c **** 
 332:../app/ESP8266/common.c **** 
 333:../app/ESP8266/common.c **** //ATK-ESP8266模块测试主函数
 334:../app/ESP8266/common.c **** void atk_8266_test(const char* name)
 335:../app/ESP8266/common.c **** {
 1660              		.loc 1 335 1 is_stmt 1 view -0
 1661              		.cfi_startproc
 1662              		@ Volatile: function does not return.
 1663              		@ args = 0, pretend = 0, frame = 0
 1664              		@ frame_needed = 0, uses_anonymous_args = 0
 1665              		.loc 1 335 1 is_stmt 0 view .LVU378
 1666 0000 08B5     		push	{r3, lr}
 1667              	.LCFI16:
 1668              		.cfi_def_cfa_offset 8
 1669              		.cfi_offset 3, -8
 1670              		.cfi_offset 14, -4
 336:../app/ESP8266/common.c **** 	printf("ATK-ESP8266 WIFI模块测试"); 
 1671              		.loc 1 336 2 is_stmt 1 view .LVU379
 1672 0002 1A48     		ldr	r0, .L105
 1673              	.LVL183:
 1674              		.loc 1 336 2 is_stmt 0 view .LVU380
 1675 0004 FFF7FEFF 		bl	printf
 1676              	.LVL184:
 337:../app/ESP8266/common.c **** 	while(atk_8266_send_cmd("AT","OK",20))//检查WIFI模块是否在线
 1677              		.loc 1 337 2 is_stmt 1 view .LVU381
 1678              		.loc 1 337 7 is_stmt 0 view .LVU382
 1679 0008 10E0     		b	.L100
 1680              	.L101:
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 40


 338:../app/ESP8266/common.c **** 	{
 339:../app/ESP8266/common.c **** 		atk_8266_quit_trans();//退出透传
 1681              		.loc 1 339 3 is_stmt 1 view .LVU383
 1682 000a FFF7FEFF 		bl	atk_8266_quit_trans
 1683              	.LVL185:
 340:../app/ESP8266/common.c **** 		atk_8266_send_cmd("AT+CIPMODE=0","OK",200);  //关闭透传模式	
 1684              		.loc 1 340 3 view .LVU384
 1685 000e C822     		movs	r2, #200
 1686 0010 1749     		ldr	r1, .L105+4
 1687 0012 1848     		ldr	r0, .L105+8
 1688 0014 FFF7FEFF 		bl	atk_8266_send_cmd
 1689              	.LVL186:
 341:../app/ESP8266/common.c **** 		printf("未检测到模块!!!");
 1690              		.loc 1 341 3 view .LVU385
 1691 0018 1748     		ldr	r0, .L105+12
 1692 001a FFF7FEFF 		bl	printf
 1693              	.LVL187:
 342:../app/ESP8266/common.c **** 		delay_ms(800);
 1694              		.loc 1 342 3 view .LVU386
 1695 001e 4FF44870 		mov	r0, #800
 1696 0022 FFF7FEFF 		bl	delay_ms
 1697              	.LVL188:
 343:../app/ESP8266/common.c **** 		printf("尝试连接模块..."); 
 1698              		.loc 1 343 3 view .LVU387
 1699 0026 1548     		ldr	r0, .L105+16
 1700 0028 FFF7FEFF 		bl	printf
 1701              	.LVL189:
 1702              	.L100:
 337:../app/ESP8266/common.c **** 	{
 1703              		.loc 1 337 7 view .LVU388
 337:../app/ESP8266/common.c **** 	{
 1704              		.loc 1 337 8 is_stmt 0 view .LVU389
 1705 002c 1422     		movs	r2, #20
 1706 002e 1049     		ldr	r1, .L105+4
 1707 0030 1348     		ldr	r0, .L105+20
 1708 0032 FFF7FEFF 		bl	atk_8266_send_cmd
 1709              	.LVL190:
 337:../app/ESP8266/common.c **** 	{
 1710              		.loc 1 337 7 view .LVU390
 1711 0036 0028     		cmp	r0, #0
 1712 0038 E7D1     		bne	.L101
 1713              	.L102:
 344:../app/ESP8266/common.c **** 	} 
 345:../app/ESP8266/common.c **** 	while(atk_8266_send_cmd("ATE0","OK",20));//关闭回显
 1714              		.loc 1 345 42 is_stmt 1 discriminator 1 view .LVU391
 1715              		.loc 1 345 7 discriminator 1 view .LVU392
 1716              		.loc 1 345 8 is_stmt 0 discriminator 1 view .LVU393
 1717 003a 1422     		movs	r2, #20
 1718 003c 0C49     		ldr	r1, .L105+4
 1719 003e 1148     		ldr	r0, .L105+24
 1720 0040 FFF7FEFF 		bl	atk_8266_send_cmd
 1721              	.LVL191:
 1722              		.loc 1 345 7 discriminator 1 view .LVU394
 1723 0044 0028     		cmp	r0, #0
 1724 0046 F8D1     		bne	.L102
 346:../app/ESP8266/common.c **** 	atk_8266_mtest_ui();
 1725              		.loc 1 346 2 is_stmt 1 view .LVU395
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 41


 1726 0048 FFF7FEFF 		bl	atk_8266_mtest_ui
 1727              	.LVL192:
 1728              	.L103:
 347:../app/ESP8266/common.c **** 	while(1)
 1729              		.loc 1 347 2 discriminator 1 view .LVU396
 348:../app/ESP8266/common.c **** 	{
 349:../app/ESP8266/common.c **** 		delay_ms(10); 
 1730              		.loc 1 349 3 discriminator 1 view .LVU397
 1731 004c 0A20     		movs	r0, #10
 1732 004e FFF7FEFF 		bl	delay_ms
 1733              	.LVL193:
 350:../app/ESP8266/common.c **** 		atk_8266_at_response(1);//检查ATK-ESP8266模块发送过来的数据,及时上传给电脑
 1734              		.loc 1 350 3 discriminator 1 view .LVU398
 1735 0052 0120     		movs	r0, #1
 1736 0054 FFF7FEFF 		bl	atk_8266_at_response
 1737              	.LVL194:
 351:../app/ESP8266/common.c **** 		
 352:../app/ESP8266/common.c **** 		printf("ATK-ESP WIFI-STA 测试\n");
 1738              		.loc 1 352 3 discriminator 1 view .LVU399
 1739 0058 0B48     		ldr	r0, .L105+28
 1740 005a FFF7FEFF 		bl	puts
 1741              	.LVL195:
 353:../app/ESP8266/common.c **** 		printf("正在配置ATK-ESP8266模块，请稍等...\n");
 1742              		.loc 1 353 3 discriminator 1 view .LVU400
 1743 005e 0B48     		ldr	r0, .L105+32
 1744 0060 FFF7FEFF 		bl	puts
 1745              	.LVL196:
 354:../app/ESP8266/common.c **** 		atk_8266_wifista_test();
 1746              		.loc 1 354 3 discriminator 1 view .LVU401
 1747 0064 FFF7FEFF 		bl	atk_8266_wifista_test
 1748              	.LVL197:
 347:../app/ESP8266/common.c **** 	{
 1749              		.loc 1 347 7 discriminator 1 view .LVU402
 1750 0068 F0E7     		b	.L103
 1751              	.L106:
 1752 006a 00BF     		.align	2
 1753              	.L105:
 1754 006c 00000000 		.word	.LC44
 1755 0070 00000000 		.word	.LC3
 1756 0074 1C000000 		.word	.LC45
 1757 0078 2C000000 		.word	.LC46
 1758 007c 3C000000 		.word	.LC47
 1759 0080 04000000 		.word	.LC4
 1760 0084 4C000000 		.word	.LC48
 1761 0088 54000000 		.word	.LC49
 1762 008c 6C000000 		.word	.LC50
 1763              		.cfi_endproc
 1764              	.LFE45:
 1766              		.global	ATK_ESP8266_ECN_TBL
 1767              		.section	.rodata.str1.4,"aMS",%progbits,1
 1768              		.align	2
 1769              	.LC51:
 1770 0000 4F50454E 		.ascii	"OPEN\000"
 1770      00
 1771 0005 000000   		.align	2
 1772              	.LC52:
 1773 0008 57455000 		.ascii	"WEP\000"
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 42


 1774              		.align	2
 1775              	.LC53:
 1776 000c 5750415F 		.ascii	"WPA_PSK\000"
 1776      50534B00 
 1777              		.align	2
 1778              	.LC54:
 1779 0014 57504132 		.ascii	"WPA2_PSK\000"
 1779      5F50534B 
 1779      00
 1780 001d 000000   		.align	2
 1781              	.LC55:
 1782 0020 5750415F 		.ascii	"WPA_WAP2_PSK\000"
 1782      57415032 
 1782      5F50534B 
 1782      00
 1783              		.global	ATK_ESP8266_WORKMODE_TBL
 1784 002d 000000   		.align	2
 1785              	.LC56:
 1786 0030 544350B7 		.ascii	"TCP\267\376\316\361\306\367\000"
 1786      FECEF1C6 
 1786      F700
 1787 003a 0000     		.align	2
 1788              	.LC57:
 1789 003c 20554450 		.ascii	" UDP\304\243\312\275\000"
 1789      C4A3CABD 
 1789      00
 1790              		.global	ATK_ESP8266_CWMODE_TBL
 1791 0045 000000   		.align	2
 1792              	.LC58:
 1793 0048 535441C4 		.ascii	"STA\304\243\312\275 \000"
 1793      A3CABD20 
 1793      00
 1794 0051 000000   		.align	2
 1795              	.LC59:
 1796 0054 4150C4A3 		.ascii	"AP\304\243\312\275 \000"
 1796      CABD2000 
 1797              		.align	2
 1798              	.LC60:
 1799 005c 41502653 		.ascii	"AP&STA\304\243\312\275 \000"
 1799      5441C4A3 
 1799      CABD2000 
 1800              		.global	wifiap_password
 1801              		.align	2
 1802              	.LC61:
 1803 0068 31323334 		.ascii	"12345678\000"
 1803      35363738 
 1803      00
 1804              		.global	wifiap_encryption
 1805 0071 000000   		.align	2
 1806              	.LC62:
 1807 0074 77706177 		.ascii	"wpawpa2_aes\000"
 1807      7061325F 
 1807      61657300 
 1808              		.global	wifiap_ssid
 1809              		.align	2
 1810              	.LC63:
 1811 0080 41544B2D 		.ascii	"ATK-ESP8266\000"
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 43


 1811      45535038 
 1811      32363600 
 1812              		.global	wifista_password
 1813              		.align	2
 1814              	.LC64:
 1815 008c 31353930 		.ascii	"15902020353\000"
 1815      32303230 
 1815      33353300 
 1816              		.global	wifista_encryption
 1817              		.align	2
 1818              	.LC65:
 1819 0098 77706132 		.ascii	"wpa2_aes\000"
 1819      5F616573 
 1819      00
 1820              		.global	wifista_ssid
 1821 00a1 000000   		.align	2
 1822              	.LC66:
 1823 00a4 414C4945 		.ascii	"ALIENTEK\000"
 1823      4E54454B 
 1823      00
 1824              		.global	portnum
 1825 00ad 000000   		.align	2
 1826              	.LC67:
 1827 00b0 38303836 		.ascii	"8086\000"
 1827      00
 1828              		.section	.data.ATK_ESP8266_CWMODE_TBL,"aw"
 1829              		.align	2
 1830              		.set	.LANCHOR4,. + 0
 1833              	ATK_ESP8266_CWMODE_TBL:
 1834 0000 48000000 		.word	.LC58
 1835 0004 54000000 		.word	.LC59
 1836 0008 5C000000 		.word	.LC60
 1837              		.section	.data.ATK_ESP8266_ECN_TBL,"aw"
 1838              		.align	2
 1839              		.set	.LANCHOR5,. + 0
 1842              	ATK_ESP8266_ECN_TBL:
 1843 0000 00000000 		.word	.LC51
 1844 0004 08000000 		.word	.LC52
 1845 0008 0C000000 		.word	.LC53
 1846 000c 14000000 		.word	.LC54
 1847 0010 20000000 		.word	.LC55
 1848              		.section	.data.ATK_ESP8266_WORKMODE_TBL,"aw"
 1849              		.align	2
 1850              		.set	.LANCHOR1,. + 0
 1853              	ATK_ESP8266_WORKMODE_TBL:
 1854 0000 30000000 		.word	.LC56
 1855 0004 3C000000 		.word	.LC25
 1856 0008 3C000000 		.word	.LC57
 1857              		.section	.data.portnum,"aw"
 1858              		.align	2
 1859              		.set	.LANCHOR0,. + 0
 1862              	portnum:
 1863 0000 B0000000 		.word	.LC67
 1864              		.section	.data.wifiap_encryption,"aw"
 1865              		.align	2
 1868              	wifiap_encryption:
 1869 0000 74000000 		.word	.LC62
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 44


 1870              		.section	.data.wifiap_password,"aw"
 1871              		.align	2
 1872              		.set	.LANCHOR2,. + 0
 1875              	wifiap_password:
 1876 0000 68000000 		.word	.LC61
 1877              		.section	.data.wifiap_ssid,"aw"
 1878              		.align	2
 1879              		.set	.LANCHOR3,. + 0
 1882              	wifiap_ssid:
 1883 0000 80000000 		.word	.LC63
 1884              		.section	.data.wifista_encryption,"aw"
 1885              		.align	2
 1888              	wifista_encryption:
 1889 0000 98000000 		.word	.LC65
 1890              		.section	.data.wifista_password,"aw"
 1891              		.align	2
 1894              	wifista_password:
 1895 0000 8C000000 		.word	.LC64
 1896              		.section	.data.wifista_ssid,"aw"
 1897              		.align	2
 1900              	wifista_ssid:
 1901 0000 A4000000 		.word	.LC66
 1902              		.text
 1903              	.Letext0:
 1904              		.file 2 "g:\\software\\vscode_for_stm32\\2024-q4-armgcc\\10 2021.10\\arm-none-eabi\\include\\machi
 1905              		.file 3 "g:\\software\\vscode_for_stm32\\2024-q4-armgcc\\10 2021.10\\arm-none-eabi\\include\\sys\\
 1906              		.file 4 "../user/stm32f10x.h"
 1907              		.file 5 "../bsp/bsp_usart2.h"
 1908              		.file 6 "../app/ESP8266/common.h"
 1909              		.file 7 "g:\\software\\vscode_for_stm32\\2024-q4-armgcc\\10 2021.10\\arm-none-eabi\\include\\stdio
 1910              		.file 8 "../system/delay/delay.h"
 1911              		.file 9 "../bsp/malloc.h"
 1912              		.file 10 "<built-in>"
 1913              		.file 11 "g:\\software\\vscode_for_stm32\\2024-q4-armgcc\\10 2021.10\\arm-none-eabi\\include\\stri
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 45


DEFINED SYMBOLS
                            *ABS*:00000000 common.c
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:18     .rodata.atk_8266_at_response.str1.4:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:22     .text.atk_8266_at_response:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:28     .text.atk_8266_at_response:00000000 atk_8266_at_response
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:80     .text.atk_8266_at_response:0000002c $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:87     .text.atk_8266_check_cmd:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:93     .text.atk_8266_check_cmd:00000000 atk_8266_check_cmd
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:144    .text.atk_8266_check_cmd:00000024 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:150    .rodata.atk_8266_send_cmd.str1.4:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:157    .text.atk_8266_send_cmd:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:163    .text.atk_8266_send_cmd:00000000 atk_8266_send_cmd
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:274    .text.atk_8266_send_cmd:0000005c $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:281    .text.atk_8266_send_data:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:287    .text.atk_8266_send_data:00000000 atk_8266_send_data
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:388    .text.atk_8266_send_data:00000050 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:394    .rodata.atk_8266_quit_trans.str1.4:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:401    .text.atk_8266_quit_trans:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:407    .text.atk_8266_quit_trans:00000000 atk_8266_quit_trans
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:486    .text.atk_8266_quit_trans:00000054 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:493    .rodata.atk_8266_apsta_check.str1.4:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:512    .text.atk_8266_apsta_check:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:518    .text.atk_8266_apsta_check:00000000 atk_8266_apsta_check
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:583    .text.atk_8266_apsta_check:00000040 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:593    .rodata.atk_8266_consta_check.str1.4:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:597    .text.atk_8266_consta_check:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:603    .text.atk_8266_consta_check:00000000 atk_8266_consta_check
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:649    .text.atk_8266_consta_check:00000020 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:656    .rodata.atk_8266_get_wanip.str1.4:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:663    .text.atk_8266_get_wanip:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:669    .text.atk_8266_get_wanip:00000000 atk_8266_get_wanip
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:737    .text.atk_8266_get_wanip:00000034 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:744    .rodata.atk_8266_get_ip.str1.4:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:757    .text.atk_8266_get_ip:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:763    .text.atk_8266_get_ip:00000000 atk_8266_get_ip
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:932    .text.atk_8266_get_ip:000000b4 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:943    .rodata.atk_8266_netpro_sel.str1.4:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:957    .text.atk_8266_netpro_sel:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:963    .text.atk_8266_netpro_sel:00000000 atk_8266_netpro_sel
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1064   .text.atk_8266_netpro_sel:00000058 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1072   .text.atk_8266_ip_set:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1078   .text.atk_8266_ip_set:00000000 atk_8266_ip_set
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1115   .rodata.atk_8266_mode_cofig.str1.4:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1134   .text.atk_8266_mode_cofig:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1140   .text.atk_8266_mode_cofig:00000000 atk_8266_mode_cofig
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1278   .text.atk_8266_mode_cofig:00000094 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1291   .rodata.atk_8266_mtest_ui.str1.4:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1341   .text.atk_8266_mtest_ui:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1347   .text.atk_8266_mtest_ui:00000000 atk_8266_mtest_ui
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1599   .text.atk_8266_mtest_ui:0000013c $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1626   .rodata.atk_8266_test.str1.4:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1651   .text.atk_8266_test:00000000 $t
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1657   .text.atk_8266_test:00000000 atk_8266_test
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1754   .text.atk_8266_test:0000006c $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1842   .data.ATK_ESP8266_ECN_TBL:00000000 ATK_ESP8266_ECN_TBL
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1768   .rodata.str1.4:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1853   .data.ATK_ESP8266_WORKMODE_TBL:00000000 ATK_ESP8266_WORKMODE_TBL
ARM GAS  C:\Users\28470\AppData\Local\Temp\ccP7kewz.s 			page 46


C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1833   .data.ATK_ESP8266_CWMODE_TBL:00000000 ATK_ESP8266_CWMODE_TBL
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1875   .data.wifiap_password:00000000 wifiap_password
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1868   .data.wifiap_encryption:00000000 wifiap_encryption
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1882   .data.wifiap_ssid:00000000 wifiap_ssid
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1894   .data.wifista_password:00000000 wifista_password
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1888   .data.wifista_encryption:00000000 wifista_encryption
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1900   .data.wifista_ssid:00000000 wifista_ssid
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1862   .data.portnum:00000000 portnum
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1829   .data.ATK_ESP8266_CWMODE_TBL:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1838   .data.ATK_ESP8266_ECN_TBL:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1849   .data.ATK_ESP8266_WORKMODE_TBL:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1858   .data.portnum:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1865   .data.wifiap_encryption:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1871   .data.wifiap_password:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1878   .data.wifiap_ssid:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1885   .data.wifista_encryption:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1891   .data.wifista_password:00000000 $d
C:\Users\28470\AppData\Local\Temp\ccP7kewz.s:1897   .data.wifista_ssid:00000000 $d

UNDEFINED SYMBOLS
printf
USART2_RX_STA
USART2_RX_BUF
strstr
u2_printf
delay_ms
strchr
strcpy
mymalloc
sprintf
myfree
strcmp
puts
atk_8266_wifista_test
